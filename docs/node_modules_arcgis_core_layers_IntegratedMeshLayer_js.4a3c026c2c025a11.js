"use strict";var ee=Object.defineProperty,te=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,J=(y,a,e)=>a in y?ee(y,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):y[a]=e,c=(y,a)=>{for(var e in a||(a={}))re.call(a,e)&&J(y,e,a[e]);if(j)for(var e of j(a))ie.call(a,e)&&J(y,e,a[e]);return y},g=(y,a)=>te(y,oe(a));(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([["node_modules_arcgis_core_layers_IntegratedMeshLayer_js"],{31370:(y,a,e)=>{e.r(a),e.d(a,{default:()=>q});var L,p=e(15861),r=e(17626),S=e(26584),P=e(72392),m=e(62208),V=e(99959),D=e(10699),N=e(32917),l=e(77712),K=(e(85931),e(8314),e(90912),e(68653)),O=e(76898),T=e(40405),E=e(44917),G=e(50085),B=e(65088),W=e(49286),z=e(6647),H=e(99555),C=e(10157),Y=e(13812),h=e(35031),F=e(84792),Q=e(74333),x=e(86810),X=e(21726),$=(e(29132),e(58817)),w=e(14889),b=e(99433),M=e(54614),U=e(37118);let d=L=class extends x.wq{constructor(t){super(t),this.geometry=null,this.type="clip"}writeGeometry(t,o,s,i){if(i.layer&&i.layer.spatialReference&&!i.layer.spatialReference.equals(this.geometry.spatialReference)){if(!(0,M.Up)(t.spatialReference,i.layer.spatialReference))return void(i&&i.messages&&i.messages.push(new w.Z("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:i.layer.spatialReference,context:i})));const u=new U.Z;(0,M.Wt)(t,u,i.layer.spatialReference),o[s]=u.toJSON(i)}else o[s]=t.toJSON(i);delete o[s].spatialReference}clone(){return new L({geometry:(0,$.d9)(this.geometry),type:this.type})}};(0,r._)([(0,l.Cb)({type:U.Z}),(0,T.B)()],d.prototype,"geometry",void 0),(0,r._)([(0,b.c)(["web-scene","portal-item"],"geometry")],d.prototype,"writeGeometry",null),(0,r._)([(0,l.Cb)({type:["clip","mask","replace"],nonNullable:!0}),(0,T.B)()],d.prototype,"type",void 0),d=L=(0,r._)([(0,O.j)("esri.layers.support.SceneModification")],d);const I=d;var v;let f=v=class extends((0,x.eC)(Q.Z.ofType(I))){constructor(t){super(t),this.url=null}clone(){return new v({url:this.url,items:this.items.map(t=>t.clone())})}toJSON(t){return this.toArray().map(o=>o.toJSON(t)).filter(o=>!!o.geometry)}static fromJSON(t,o){const s=new v;for(const i of t)s.add(I.fromJSON(i,o));return s}static fromUrl(t,o,s){return(0,p.Z)(function*(){const i={url:(0,X.mN)(t),origin:"service"},u=yield(0,F.default)(t,{responseType:"json",signal:(0,m.U2)(s,"signal")}),_=o.toJSON(),R=[];for(const A of u.data)R.push(I.fromJSON(g(c({},A),{geometry:g(c({},A.geometry),{spatialReference:_})}),i));return new v({url:t,items:R})})()}};(0,r._)([(0,l.Cb)({type:String})],f.prototype,"url",void 0),f=v=(0,r._)([(0,O.j)("esri.layers.support.SceneModifications")],f);const Z=f;var k=e(29840);let n=class extends((0,C.Vt)((0,B.Y)((0,W.q)((0,z.I)((0,H.M)((0,V.R)((0,G.V)(E.Z)))))))){constructor(...t){super(...t),this._handles=new P.Z,this.geometryType="mesh",this.operationalLayerType="IntegratedMeshLayer",this.type="integrated-mesh",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.profile="mesh-pyramids",this.modifications=null,this._modificationsSource=null,this.elevationInfo=null,this.path=null}destroy(){this._handles.destroy()}initialize(){this._handles.add((0,N.on)(()=>this.modifications,"after-changes",()=>this.modifications=this.modifications,N.Z_))}normalizeCtorArgs(t,o){return"string"==typeof t?c({url:t},o):t}readModifications(t,o,s){this._modificationsSource={url:(0,k.f)(t,s),context:s}}load(t){var o=this;return(0,p.Z)(function*(){return o.addResolvingPromise(o._doLoad(t)),o})()}_doLoad(t){var o=this;return(0,p.Z)(function*(){const s=(0,m.U2)(t,"signal");try{yield o.loadFromPortal({supportedTypes:["Scene Service"]},t)}catch(i){(0,D.r9)(i)}if(yield o._fetchService(s),(0,m.pC)(o._modificationsSource)){const i=yield Z.fromUrl(o._modificationsSource.url,o.spatialReference,t);o.setAtOrigin("modifications",i,o._modificationsSource.context.origin),o._modificationsSource=null}yield o._fetchIndexAndUpdateExtent(o.nodePages,s)})()}beforeSave(){if(!(0,m.Wi)(this._modificationsSource))return this.load().then(()=>{},()=>{})}saveAs(t,o){var s=this;return(0,p.Z)(function*(){return s._debouncedSaveOperations(C.xp.SAVE_AS,g(c({},o),{getTypeKeywords:()=>s._getTypeKeywords(),portalItemLayerType:"integrated-mesh"}),t)})()}save(){var t=this;return(0,p.Z)(function*(){const o={getTypeKeywords:()=>t._getTypeKeywords(),portalItemLayerType:"integrated-mesh"};return t._debouncedSaveOperations(C.xp.SAVE,o)})()}validateLayer(t){if(t.layerType&&"IntegratedMesh"!==t.layerType)throw new S.Z("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:t.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new S.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new S.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})}_getTypeKeywords(){return["IntegratedMeshLayer"]}};(0,r._)([(0,l.Cb)({type:String,readOnly:!0})],n.prototype,"geometryType",void 0),(0,r._)([(0,l.Cb)({type:["show","hide"]})],n.prototype,"listMode",void 0),(0,r._)([(0,l.Cb)({type:["IntegratedMeshLayer"]})],n.prototype,"operationalLayerType",void 0),(0,r._)([(0,l.Cb)({json:{read:!1},readOnly:!0})],n.prototype,"type",void 0),(0,r._)([(0,l.Cb)({type:h.U4,readOnly:!0})],n.prototype,"nodePages",void 0),(0,r._)([(0,l.Cb)({type:[h.QI],readOnly:!0})],n.prototype,"materialDefinitions",void 0),(0,r._)([(0,l.Cb)({type:[h.Yh],readOnly:!0})],n.prototype,"textureSetDefinitions",void 0),(0,r._)([(0,l.Cb)({type:[h.H3],readOnly:!0})],n.prototype,"geometryDefinitions",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],n.prototype,"serviceUpdateTimeStamp",void 0),(0,r._)([(0,l.Cb)({type:Z}),(0,T.B)({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],n.prototype,"modifications",void 0),(0,r._)([(0,K.r)(["web-scene","portal-item"],"modifications")],n.prototype,"readModifications",null),(0,r._)([(0,l.Cb)(Y.PV)],n.prototype,"elevationInfo",void 0),(0,r._)([(0,l.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],n.prototype,"path",void 0),n=(0,r._)([(0,O.j)("esri.layers.IntegratedMeshLayer")],n);const q=n}}]);
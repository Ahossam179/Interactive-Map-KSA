"use strict";var me=Object.defineProperty,ge=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,fe=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,ye=(q,z,a)=>z in q?me(q,z,{enumerable:!0,configurable:!0,writable:!0,value:a}):q[z]=a,oe=(q,z)=>{for(var a in z||(z={}))Ee.call(z,a)&&ye(q,a,z[a]);if(fe)for(var a of fe(z))Oe.call(z,a)&&ye(q,a,z[a]);return q},le=(q,z)=>ge(q,ve(z));(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[8592],{7006:(q,z,a)=>{a.d(z,{A:()=>W,B:()=>M,C:()=>R,D:()=>F,E:()=>V,F:()=>G,G:()=>X,H:()=>Y,I:()=>Q,J:()=>re,K:()=>se,a:()=>L,b:()=>g,c:()=>P,d:()=>C,e:()=>E,f:()=>m,g:()=>ae,h:()=>U,i:()=>T,j:()=>x,k:()=>O,l:()=>h,m:()=>d,n:()=>y,o:()=>v,p:()=>I,q:()=>B,r:()=>l,s:()=>D,t:()=>p,u:()=>K,v:()=>w,w:()=>b,x:()=>H,y:()=>$,z:()=>j});var _=a(4918),A=a(15994);function E(S){return _.G.extendedSpatialReferenceInfo(S)}function P(S,N,J){return _.G.clip(A.N,S,N,J)}function L(S,N,J){return _.G.cut(A.N,S,N,J)}function g(S,N,J){return _.G.contains(A.N,S,N,J)}function C(S,N,J){return _.G.crosses(A.N,S,N,J)}function m(S,N,J,Z){return _.G.distance(A.N,S,N,J,Z)}function U(S,N,J){return _.G.equals(A.N,S,N,J)}function T(S,N,J){return _.G.intersects(A.N,S,N,J)}function p(S,N,J){return _.G.touches(A.N,S,N,J)}function b(S,N,J){return _.G.within(A.N,S,N,J)}function x(S,N,J){return _.G.disjoint(A.N,S,N,J)}function v(S,N,J){return _.G.overlaps(A.N,S,N,J)}function l(S,N,J,Z){return _.G.relate(A.N,S,N,J,Z)}function O(S,N){return _.G.isSimple(A.N,S,N)}function D(S,N){return _.G.simplify(A.N,S,N)}function h(S,N,J=!1){return _.G.convexHull(A.N,S,N,J)}function d(S,N,J){return _.G.difference(A.N,S,N,J)}function y(S,N,J){return _.G.symmetricDifference(A.N,S,N,J)}function I(S,N,J){return _.G.intersect(A.N,S,N,J)}function K(S,N,J=null){return _.G.union(A.N,S,N,J)}function B(S,N,J,Z,k,ee,te){return _.G.offset(A.N,S,N,J,Z,k,ee,te)}function w(S,N,J,Z,k=!1){return _.G.buffer(A.N,S,N,J,Z,k)}function H(S,N,J,Z,k,ee,te){return _.G.geodesicBuffer(A.N,S,N,J,Z,k,ee,te)}function $(S,N,J,Z=!0){return _.G.nearestCoordinate(A.N,S,N,J,Z)}function j(S,N,J){return _.G.nearestVertex(A.N,S,N,J)}function W(S,N,J,Z,k){return _.G.nearestVertices(A.N,S,N,J,Z,k)}function M(S,N,J,Z){if(null==N||null==Z)throw new Error("Illegal Argument Exception");const k=_.G.rotate(N,J,Z);return k.spatialReference=S,k}function R(S,N,J){if(null==N||null==J)throw new Error("Illegal Argument Exception");const Z=_.G.flipHorizontal(N,J);return Z.spatialReference=S,Z}function F(S,N,J){if(null==N||null==J)throw new Error("Illegal Argument Exception");const Z=_.G.flipVertical(N,J);return Z.spatialReference=S,Z}function V(S,N,J,Z,k){return _.G.generalize(A.N,S,N,J,Z,k)}function G(S,N,J,Z){return _.G.densify(A.N,S,N,J,Z)}function X(S,N,J,Z,k=0){return _.G.geodesicDensify(A.N,S,N,J,Z,k)}function Y(S,N,J){return _.G.planarArea(A.N,S,N,J)}function Q(S,N,J){return _.G.planarLength(A.N,S,N,J)}function re(S,N,J,Z){return _.G.geodesicArea(A.N,S,N,J,Z)}function se(S,N,J,Z){return _.G.geodesicLength(A.N,S,N,J,Z)}const ae=Object.freeze(Object.defineProperty({__proto__:null,extendedSpatialReferenceInfo:E,clip:P,cut:L,contains:g,crosses:C,distance:m,equals:U,intersects:T,touches:p,within:b,disjoint:x,overlaps:v,relate:l,isSimple:O,simplify:D,convexHull:h,difference:d,symmetricDifference:y,intersect:I,union:K,offset:B,buffer:w,geodesicBuffer:H,nearestCoordinate:$,nearestVertex:j,nearestVertices:W,rotate:M,flipHorizontal:R,flipVertical:F,generalize:V,densify:G,geodesicDensify:X,planarArea:Y,planarLength:Q,geodesicArea:re,geodesicLength:se},Symbol.toStringTag,{value:"Module"}))},2071:(q,z,a)=>{a.d(z,{b:()=>O,c:()=>l,d:()=>I,g:()=>K,i:()=>W,m:()=>ae}),a(8314);var T,Z,A=a(63290),E=a(21286),P=a(62208),L=a(28347),g=a(84161),C=a(28093),m=a(993),U=a(4794);(Z=T||(T={}))[Z.X=0]="X",Z[Z.Y=1]="Y",Z[Z.Z=2]="Z";var p=a(70562),b=a(34054),x=a(26242);const v=A.Z.getLogger("esri.geometry.support.sphere");function l(){return(0,U.c)()}function O(Z,k=l()){return(0,m.c)(k,Z)}function I(Z){return Z[3]}function K(Z){return Z}function $(Z,k,ee){if((0,P.Wi)(k))return!1;const{origin:te,direction:ne}=k,ie=j;ie[0]=te[0]-Z[0],ie[1]=te[1]-Z[1],ie[2]=te[2]-Z[2];const ce=ne[0]*ne[0]+ne[1]*ne[1]+ne[2]*ne[2],ue=2*(ne[0]*ie[0]+ne[1]*ie[1]+ne[2]*ie[2]),de=ue*ue-4*ce*(ie[0]*ie[0]+ie[1]*ie[1]+ie[2]*ie[2]-Z[3]*Z[3]);if(de<0)return!1;const pe=Math.sqrt(de);let _e=(-ue-pe)/(2*ce);const he=(-ue+pe)/(2*ce);return(_e<0||he<_e&&he>0)&&(_e=he),!(_e<0||(ee&&(ee[0]=te[0]+ne[0]*_e,ee[1]=te[1]+ne[1]*_e,ee[2]=te[2]+ne[2]*_e),0))}const j=(0,C.c)();function W(Z,k){return $(Z,k,null)}function R(Z,k,ee){const te=x.WM.get(),ne=x.MP.get();(0,g.f)(te,k.origin,k.direction);const ie=I(Z);(0,g.f)(ee,te,k.origin),(0,g.g)(ee,ee,1/(0,g.l)(ee)*ie);const ce=X(Z,k.origin),ue=(0,b.EU)(k.origin,ee);return(0,L.d)(ne,ue+ce,te),(0,g.m)(ee,ee,ne),ee}function V(Z,k,ee){const te=(0,g.b)(x.WM.get(),k,Z),ne=(0,g.g)(x.WM.get(),te,Z[3]/(0,g.l)(te));return(0,g.a)(ee,ne,Z)}function X(Z,k){const ee=(0,g.b)(x.WM.get(),k,Z),te=(0,g.l)(ee),ne=I(Z),ie=ne+Math.abs(ne-te);return(0,E.ZF)(ne/ie)}const Y=(0,C.c)();function Q(Z,k,ee,te){const ne=(0,g.b)(Y,k,Z);switch(ee){case T.X:{const ie=(0,E.jE)(ne,Y)[2];return(0,g.s)(te,-Math.sin(ie),Math.cos(ie),0)}case T.Y:{const ie=(0,E.jE)(ne,Y),ce=ie[1],ue=ie[2],de=Math.sin(ce);return(0,g.s)(te,-de*Math.cos(ue),-de*Math.sin(ue),Math.cos(ce))}case T.Z:return(0,g.n)(te,ne);default:return}}function re(Z,k){const ee=(0,g.b)(S,k,Z);return(0,g.l)(ee)-Z[3]}function ae(Z,k){const ee=(0,g.d)(Z,k),te=I(Z);return ee<=te*te}const S=(0,C.c)(),N=l();Object.freeze(Object.defineProperty({__proto__:null,create:l,copy:O,fromCenterAndRadius:function D(Z,k){return(0,U.f)(Z[0],Z[1],Z[2],k)},wrap:function h(Z){return Z},clear:function d(Z){Z[0]=Z[1]=Z[2]=Z[3]=0},fromRadius:function y(Z,k){return Z[0]=Z[1]=Z[2]=0,Z[3]=k,Z},getRadius:I,getCenter:K,fromValues:function B(Z,k,ee,te){return(0,U.f)(Z,k,ee,te)},elevate:function w(Z,k,ee){return Z!==ee&&(0,g.c)(ee,Z),ee[3]=Z[3]+k,ee},setExtent:function H(Z,k,ee){return v.error("sphere.setExtent is not yet supported"),Z===ee?ee:O(Z,ee)},intersectRay:$,intersectsRay:W,intersectRayClosestSilhouette:function M(Z,k,ee){if($(Z,k,ee))return ee;const te=R(Z,k,x.WM.get());return(0,g.a)(ee,k.origin,(0,g.g)(x.WM.get(),k.direction,(0,g.i)(k.origin,te)/(0,g.l)(k.direction))),ee},closestPointOnSilhouette:R,closestPoint:function F(Z,k,ee){return $(Z,k,ee)?ee:((0,p.JI)(k,Z,ee),V(Z,ee,ee))},projectPoint:V,distanceToSilhouette:function G(Z,k){const ee=(0,g.b)(x.WM.get(),k,Z),te=(0,g.p)(ee);return Math.sqrt(Math.abs(te-Z[3]*Z[3]))},angleToSilhouette:X,axisAt:Q,altitudeAt:re,setAltitudeAt:function se(Z,k,ee,te){const ne=re(Z,k),ie=Q(Z,k,T.Z,S),ce=(0,g.g)(S,ie,ee-ne);return(0,g.a)(te,k,ce)},containsPoint:ae,tmpSphere:N},Symbol.toStringTag,{value:"Module"}))},65389:(q,z,a)=>{a.d(z,{Z:()=>A});var _=a(62208);class A{constructor(P){this.size=0,this._start=0,this.maxSize=P,this._buffer=new Array(P)}get entries(){return this._buffer}enqueue(P){if(this.size===this.maxSize){const L=this._buffer[this._start];return this._buffer[this._start]=P,this._start=(this._start+1)%this.maxSize,L}return this._buffer[(this._start+this.size++)%this.maxSize]=P,null}dequeue(){if(0===this.size)return null;const P=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,P}peek(){return 0===this.size?null:this._buffer[this._start]}find(P){if(0===this.size)return null;for(const L of this._buffer)if((0,_.pC)(L)&&P(L))return L;return null}clear(P){let L=this.dequeue();for(;(0,_.pC)(L);)P&&P(L),L=this.dequeue()}}},40405:(q,z,a)=>{a.d(z,{B:()=>D});var _=a(15861),A=a(62208),E=a(22558),P=a(21726),L=a(35948),g=a(34117),C=a(31283),m=a(77712);function U(M){return b[function T(M){return M instanceof Blob?M.type:function p(M){const R=(0,P.Ml)(M);return l[R]||x}(M.url)}(M)]||v}const b={},x="text/plain",v=b[x],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const M in l)b[l[M]]=M;var O=a(29840);function D(M){const R=(0,A.pC)(M)&&M.origins?M.origins:[void 0];return(F,V)=>{const G=function h(M,R,F){if((0,A.pC)(M)&&"resource"===M.type)return function d(M,R,F){const V=(0,g.VZ)(R,F);return{type:String,read:(G,X,Y)=>{const Q=(0,O.r)(G,X,Y);return V.type===String?Q:"function"==typeof V.type?new V.type({url:Q}):void 0},write:{writer(G,X,Y,Q){if(!Q||!Q.resources)return"string"==typeof G?void(X[Y]=(0,O.t)(G,Q)):void(X[Y]=G.write({},Q));const re=function j(M){return(0,A.Wi)(M)?null:"string"==typeof M?M:M.url}(G),se=re?(0,O.t)(re,le(oe({},Q),{verifyItemRelativeUrls:Q&&Q.verifyItemRelativeUrls?{writtenUrls:Q.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null}),O.M.NO):null,ae=V.type!==String&&(!(0,E.l)(this)||Q&&Q.origin&&this.originIdOf(F)>(0,C.M9)(Q.origin));Q&&Q.portalItem&&(0,A.pC)(se)&&!(0,P.YP)(se)?ae?function I(M,R,F,V,G,X,Y,Q){const re=Y.portalItem.resourceFromPath(V),se=w(F,V,Y);U(se)===(0,P.Ml)(re.path)?(B(M,R,re,se,Y.resources.toUpdate),G[X]=V):y(M,R,F,V,G,X,Y,Q)}(this,F,G,se,X,Y,Q,M):function K(M,R,F,V){V.resources.toKeep.push({resource:V.portalItem.resourceFromPath(M)}),R[F]=M}(se,X,Y,Q):Q&&Q.portalItem&&((0,A.Wi)(se)||(0,A.pC)((0,O.i)(se))||(0,P.jc)(se)||ae)?y(this,F,G,se,X,Y,Q,M):X[Y]=se}}}}(M,R,F);switch((0,A.pC)(M)&&M.type?M.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:V,write:G}=O.p;return{read:V,write:G}}}}(M,F,V);for(const X of R){const Y=(0,m.CJ)(F,X,V);for(const Q in G)Y[Q]=G[Q]}}}function y(M,R,F,V,G,X,Y,Q){const re=(0,L.D)(),se=w(F,V,Y),ae=(0,P.v_)((0,A.U2)(Q,"prefix"),re),S=`${ae}.${U(se)}`,N=Y.portalItem.resourceFromPath(S);(0,P.jc)(V)&&Y.resources.pendingOperations.push(function H(M){return $.apply(this,arguments)}(V).then(J=>{N.path=`${ae}.${U(J)}`,G[X]=N.itemRelativeUrl}).catch(()=>{})),B(M,R,N,se,Y.resources.toAdd),G[X]=N.itemRelativeUrl}function B(M,R,F,V,G){G.push({resource:F,content:V,finish:X=>{!function W(M,R,F){"string"==typeof M[R]?M[R]=F.url:M[R].url=F.url}(M,R,X)}})}function w(M,R,F){return"string"==typeof M?{url:R}:new Blob([JSON.stringify(M.toJSON(F))],{type:"application/json"})}function $(){return($=(0,_.Z)(function*(M){const R=(yield Promise.resolve().then(a.bind(a,84792))).default,{data:F}=yield R(M,{responseType:"blob"});return F})).apply(this,arguments)}},77777:(q,z,a)=>{a.r(z),a.d(z,{hydratedAdapter:()=>g});var _=a(2004),A=a(72854),E=a(49672),P=a(37118),L=a(55214);const g={convertToGEGeometry:function C(x,v){if(null==v)return null;let l="cache"in v?v.cache._geVersion:void 0;return null==l&&(l=x.convertJSONToGeometry(v),"cache"in v&&(v.cache._geVersion=l)),l},exportPoint:function m(x,v,l){const O=x.hasZ(v),D=x.hasM(v),h=new E.Z({x:x.getPointX(v),y:x.getPointY(v),spatialReference:l});return O&&(h.z=x.getPointZ(v)),D&&(h.m=x.getPointM(v)),h.cache._geVersion=v,h},exportPolygon:function U(x,v,l){const O=new P.Z({rings:x.exportPaths(v),hasZ:x.hasZ(v),hasM:x.hasM(v),spatialReference:l});return O.cache._geVersion=v,O},exportPolyline:function T(x,v,l){const O=new L.Z({paths:x.exportPaths(v),hasZ:x.hasZ(v),hasM:x.hasM(v),spatialReference:l});return O.cache._geVersion=v,O},exportMultipoint:function p(x,v,l){const O=new A.Z({hasZ:x.hasZ(v),hasM:x.hasM(v),points:x.exportPoints(v),spatialReference:l});return O.cache._geVersion=v,O},exportExtent:function b(x,v,l){const O=x.hasZ(v),D=x.hasM(v),h=new _.Z({xmin:x.getXMin(v),ymin:x.getYMin(v),xmax:x.getXMax(v),ymax:x.getYMax(v),spatialReference:l});if(O){const d=x.getZExtent(v);h.zmin=d.vmin,h.zmax=d.vmax}if(D){const d=x.getMExtent(v);h.mmin=d.vmin,h.mmax=d.vmax}return h.cache._geVersion=v,h}}},32825:(q,z,a)=>{a.r(z),a.d(z,{buffer:()=>E.v,clip:()=>E.c,contains:()=>E.b,convexHull:()=>E.l,crosses:()=>E.d,cut:()=>E.a,densify:()=>E.F,difference:()=>E.m,disjoint:()=>E.j,distance:()=>E.f,equals:()=>E.h,extendedSpatialReferenceInfo:()=>E.e,flipHorizontal:()=>E.C,flipVertical:()=>E.D,generalize:()=>E.E,geodesicArea:()=>E.J,geodesicBuffer:()=>E.x,geodesicDensify:()=>E.G,geodesicLength:()=>E.K,intersect:()=>E.p,intersects:()=>E.i,isSimple:()=>E.k,nearestCoordinate:()=>E.y,nearestVertex:()=>E.z,nearestVertices:()=>E.A,offset:()=>E.q,overlaps:()=>E.o,planarArea:()=>E.H,planarLength:()=>E.I,relate:()=>E.r,rotate:()=>E.B,simplify:()=>E.s,symmetricDifference:()=>E.n,touches:()=>E.t,union:()=>E.u,within:()=>E.w}),a(4918),a(15994);var E=a(7006)},57932:(q,z,a)=>{a.d(z,{$7:()=>x,$e:()=>g,E0:()=>p,N5:()=>b,lW:()=>C});var _=a(15861),E=(a(8314),a(26584)),P=a(62208),L=a(21726);function g(v){const l=p(v);return(0,P.pC)(l)?l.toDataURL():""}function C(v){return m.apply(this,arguments)}function m(){return(m=(0,_.Z)(function*(v){const l=p(v);if((0,P.Wi)(l))throw new E.Z("imageToArrayBuffer","Unsupported image type");const O=yield U(v),D=yield new Promise(h=>l.toBlob(h,O));if(!D)throw new E.Z("imageToArrayBuffer","Failed to encode image");return{data:yield D.arrayBuffer(),type:O}})).apply(this,arguments)}function U(v){return T.apply(this,arguments)}function T(){return(T=(0,_.Z)(function*(v){if(!(v instanceof HTMLImageElement))return"image/png";const l=v.src;if((0,L.HK)(l)){const{mediaType:O}=(0,L.sJ)(l);return"image/jpeg"===O?O:"image/png"}return/\.png$/i.test(l)?"image/png":/\.(jpg|jpeg)$/i.test(l)?"image/jpeg":"image/png"})).apply(this,arguments)}function p(v){if(v instanceof HTMLCanvasElement)return v;if(v instanceof HTMLVideoElement)return null;const l=document.createElement("canvas");l.width=v.width,l.height=v.height;const O=l.getContext("2d");return v instanceof HTMLImageElement?O.drawImage(v,0,0,v.width,v.height):v instanceof ImageData&&O.putImageData(v,0,0),l}function b(v){const l=[],O=new Uint8Array(v);for(let D=0;D<O.length;D++)l.push(String.fromCharCode(O[D]));return"data:application/octet-stream;base64,"+btoa(l.join(""))}function x(v){if(v.byteLength<8)return!1;const l=new Uint8Array(v);return 137===l[0]&&80===l[1]&&78===l[2]&&71===l[3]&&13===l[4]&&10===l[5]&&26===l[6]&&10===l[7]}},70562:(q,z,a)=>{a.d(z,{JI:()=>v,Ue:()=>g,re:()=>m}),a(85931);var A=a(97535),E=a(84161),P=a(28093);function g(D){return D?{origin:(0,P.a)(D.origin),direction:(0,P.a)(D.direction)}:{origin:(0,P.c)(),direction:(0,P.c)()}}function m(D,h){const d=O.get();return d.origin=D,d.direction=h,d}function v(D,h,d){const y=(0,E.e)(D.direction,(0,E.b)(d,h,D.origin));return(0,E.a)(d,D.origin,(0,E.g)(d,D.direction,y)),d}a(26242);const O=new A.x(function l(){return{origin:null,direction:null}})},83137:(q,z,a)=>{a.d(z,{dp:()=>P,yZ:()=>E});var _=a(16730);function E(C,m){const U=m||C.extent,T=C.width,p=(0,_.c9)(U&&U.spatialReference);return U&&T?U.width/T*p*_.hd*96:0}function P(C,m){return C/((0,_.c9)(m)*_.hd*96)}},34054:(q,z,a)=>{a.d(z,{EU:()=>g});var _=a(21286),A=a(84161),E=a(28093);function g(T,p){const b=(0,A.e)(T,p)/((0,A.l)(T)*(0,A.l)(p));return-(0,_.ZF)(b)}(0,E.c)(),(0,E.c)()},28678:(q,z,a)=>{a.r(z),a.d(z,{default:()=>W});var _=a(17626),E=(a(29132),a(84792)),P=a(26584),L=a(99959),g=a(77275),C=a(21726),m=a(77712),b=(a(85931),a(8314),a(90912),a(68653)),x=a(76898),v=a(99433),l=a(44917),O=a(552),D=a(49286),h=a(6647),d=a(30346),y=a(99555),I=a(72258),K=a(2584),B=a(91309),w=a(2004),H=a(65234),$=a(49672);let j=class extends((0,O.h)((0,d.Q)((0,y.M)((0,D.q)((0,h.I)((0,L.R)(l.Z))))))){constructor(...M){super(...M),this.copyright="",this.fullExtent=new w.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,H.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=H.Z.WebMercator,this.subDomains=null,this.tileInfo=new K.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new $.Z({x:-20037508.342787,y:20037508.342787,spatialReference:H.Z.WebMercator}),spatialReference:H.Z.WebMercator,lods:[new I.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new I.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new I.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new I.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new I.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new I.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new I.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new I.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new I.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new I.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new I.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new I.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new I.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new I.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new I.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new I.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new I.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new I.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new I.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new I.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new I.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new I.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new I.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new I.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(M,R){return"string"==typeof M?oe({urlTemplate:M},R):M}load(M){const R=this.loadFromPortal({supportedTypes:["WMTS"]},M).then(()=>{let F="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const V=new C.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&V.authority.includes("{subDomain}")&&(F="is missing 'subDomains' property")}else F="spatialReference must match tileInfo.spatialReference";else F="is missing the required 'urlTemplate' property value";if(F)throw new P.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${F}`)});return this.addResolvingPromise(R),Promise.resolve(this)}get levelValues(){const M=[];if(!this.tileInfo)return null;for(const R of this.tileInfo.lods)M[R.level]=R.levelValue||R.level;return M}readSpatialReference(M,R){return M||R.fullExtent&&R.fullExtent.spatialReference&&H.Z.fromJSON(R.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const M=[],{urlTemplate:R,subDomains:F}=this,V=new C.R9(R),G=V.scheme?V.scheme+"://":"//",X=G+V.authority+"/";if(V.authority.includes("{subDomain}")){if(F&&F.length>0&&V.authority.split(".").length>1)for(const Y of F)M.push(G+V.authority.replace(/\{subDomain\}/gi,Y)+"/")}else M.push(X);return M.map(Y=>("/"!==Y.charAt(Y.length-1)&&(Y+="/"),Y))}get urlPath(){if(!this.urlTemplate)return null;const M=this.urlTemplate,R=new C.R9(M);return M.substring(((R.scheme?R.scheme+"://":"//")+R.authority+"/").length)}readUrlTemplate(M,R){return M||R.templateUrl}writeUrlTemplate(M,R){M&&(0,C.oC)(M)&&(M="https:"+M),M&&(M=M.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),M=(0,C.Fv)(M)),R.templateUrl=M}fetchTile(M,R,F,V={}){const{signal:G}=V,X=this.getTileUrl(M,R,F),Y={responseType:"image",signal:G,query:oe({},this.refreshParameters)};return(0,E.default)(X,Y).then(Q=>Q.data)}getTileUrl(M,R,F){const V=this.levelValues[M];return this.tileServers[R%this.tileServers.length]+(0,g.gx)(this.urlPath,{level:V,z:V,col:F,x:F,row:R,y:R})}};(0,_._)([(0,m.Cb)({type:String,value:"",json:{write:!0}})],j.prototype,"copyright",void 0),(0,_._)([(0,m.Cb)({type:w.Z,json:{write:!0},nonNullable:!0})],j.prototype,"fullExtent",void 0),(0,_._)([(0,m.Cb)({readOnly:!0,json:{read:!1,write:!1}})],j.prototype,"legendEnabled",void 0),(0,_._)([(0,m.Cb)({type:["show","hide"]})],j.prototype,"listMode",void 0),(0,_._)([(0,m.Cb)({json:{read:!0,write:!0}})],j.prototype,"blendMode",void 0),(0,_._)([(0,m.Cb)()],j.prototype,"levelValues",null),(0,_._)([(0,m.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],j.prototype,"isReference",void 0),(0,_._)([(0,m.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],j.prototype,"operationalLayerType",void 0),(0,_._)([(0,m.Cb)({readOnly:!0,json:{read:!1,write:!1}})],j.prototype,"popupEnabled",void 0),(0,_._)([(0,m.Cb)({type:H.Z})],j.prototype,"spatialReference",void 0),(0,_._)([(0,b.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],j.prototype,"readSpatialReference",null),(0,_._)([(0,m.Cb)({type:[String],json:{write:!0}})],j.prototype,"subDomains",void 0),(0,_._)([(0,m.Cb)({type:K.Z,json:{write:!0}})],j.prototype,"tileInfo",void 0),(0,_._)([(0,m.Cb)({readOnly:!0})],j.prototype,"tileServers",null),(0,_._)([(0,m.Cb)({json:{read:!1}})],j.prototype,"type",void 0),(0,_._)([(0,m.Cb)()],j.prototype,"urlPath",null),(0,_._)([(0,m.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],j.prototype,"urlTemplate",void 0),(0,_._)([(0,b.r)("urlTemplate",["urlTemplate","templateUrl"])],j.prototype,"readUrlTemplate",null),(0,_._)([(0,v.c)("urlTemplate",{templateUrl:{type:String}})],j.prototype,"writeUrlTemplate",null),(0,_._)([(0,m.Cb)({type:B.B,json:{write:!0}})],j.prototype,"wmtsInfo",void 0),j=(0,_._)([(0,x.j)("esri.layers.WebTileLayer")],j);const W=j},1476:(q,z,a)=>{a.d(z,{S:()=>A,X:()=>_});const _=1;function A(E,P){var g;let L=0;for(const C of P){const m=null==(g=C.attributes)?void 0:g[E];"number"==typeof m&&isFinite(m)&&(L=Math.max(L,m))}return L}},35775:(q,z,a)=>{a.d(z,{O0:()=>p,av:()=>C,b:()=>D,d1:()=>U,og:()=>v});var _=a(15861),A=a(62208),E=a(37053),P=a(36630);class L{constructor(){this.code=null,this.description=null}}class g{constructor(y){this.error=new L,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=y}}function C(d){return new g(d)}class m{constructor(y){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=y}}function U(d){return new m(d)}const T=new Set;function p(d,y,I,K=!1,B){T.clear();for(const w in I){const H=d.get(w);if(!H)continue;const $=I[w],j=b(H,$);if(j!==$&&B&&B.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:H,originalValue:$,sanitizedValue:j}}),T.add(H.name),H&&(K||H.editable)){const W=(0,P.Qc)(H,j);if(W)return C((0,P.vP)(W,H,j));y[H.name]=j}}for(const w of d.requiredFields)if(!T.has(w.name))return C(`missing required field "${w.name}"`);return null}function b(d,y){let I=y;return"string"==typeof y&&(0,P.H7)(d)?I=parseFloat(y):null!=y&&(0,P.qN)(d)&&"string"!=typeof y&&(I=String(y)),(0,P.Pz)(I)}let x;function v(d,y){if(!d||!(0,E.JY)(y))return d;if("rings"in d||"paths"in d){if((0,A.Wi)(x))throw new TypeError("geometry engine not loaded");return x.simplify(y,d)}return d}function l(){return O.apply(this,arguments)}function O(){return(O=(0,_.Z)(function*(){return(0,A.Wi)(x)&&(x=yield Promise.all([a.e(4918),a.e(8592)]).then(a.bind(a,32825))),x})).apply(this,arguments)}function D(d,y){return h.apply(this,arguments)}function h(){return(h=(0,_.Z)(function*(d,y){!(0,E.JY)(d)||"esriGeometryPolygon"!==y&&"esriGeometryPolyline"!==y||(yield l())})).apply(this,arguments)}},5143:(q,z,a)=>{a.d(z,{Z:()=>b});var _=a(17626),E=(a(29132),a(77712)),C=(a(85931),a(8314),a(90912),a(68653)),m=a(76898),U=a(51026),T=a(28930),p=a(65234);const b=x=>{let v=class extends x{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(l,O){return null!=O.minLOD&&null!=O.maxLOD?l:0}readMaxScale(l,O){return null!=O.minLOD&&null!=O.maxLOD?l:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(l,O){return O.capabilities&&O.capabilities.includes("Tilemap")?new T.y({layer:this}):null}};return(0,_._)([(0,E.Cb)({json:{read:{source:"copyrightText"}}})],v.prototype,"copyright",void 0),(0,_._)([(0,E.Cb)()],v.prototype,"minScale",void 0),(0,_._)([(0,C.r)("service","minScale")],v.prototype,"readMinScale",null),(0,_._)([(0,E.Cb)()],v.prototype,"maxScale",void 0),(0,_._)([(0,C.r)("service","maxScale")],v.prototype,"readMaxScale",null),(0,_._)([(0,E.Cb)({type:p.Z})],v.prototype,"spatialReference",void 0),(0,_._)([(0,E.Cb)({readOnly:!0})],v.prototype,"supportsBlankTile",null),(0,_._)([(0,E.Cb)(U.h)],v.prototype,"tileInfo",void 0),(0,_._)([(0,E.Cb)()],v.prototype,"tilemapCache",void 0),(0,_._)([(0,C.r)("service","tilemapCache",["capabilities"])],v.prototype,"readTilemapCache",null),(0,_._)([(0,E.Cb)()],v.prototype,"version",void 0),v=(0,_._)([(0,m.j)("esri.layers.mixins.ArcGISCachedService")],v),v}},22825:(q,z,a)=>{a.d(z,{A:()=>A});const _=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function A(E){return _.some(([P,L])=>E>=P&&E<=L)}},14772:(q,z,a)=>{a.d(z,{R:()=>l});var _=a(17626),A=a(14517),E=a(80542),P=a(62208),L=a(95737),g=a(77712),T=(a(85931),a(8314),a(90912),a(76898)),p=a(13812),b=a(59990),x=a(13410);const v={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let l=class extends((0,E.p)(A.Z)){constructor(O){super(O),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const O=this.visibleSublayers.map(D=>{const h=(0,b.f)(this.floors,D);return D.toExportImageJSON(h)});return O.length?JSON.stringify(O):null}get hasDynamicLayers(){return this.layer&&(0,x.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(O){this._get("layer")!==O&&(this._set("layer",O),this.handles.remove("layer"),O&&this.handles.add([O.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),O.on("sublayer-update",D=>this.notifyChange(v[D.propertyName]))],"layer"))}get layers(){const O=this.visibleSublayers;return O?O.length?"show:"+O.map(D=>D.id).join(","):"show:-1":null}get layerDefs(){var h;const O=!(null==(h=this.floors)||!h.length),D=this.visibleSublayers.filter(d=>null!=d.definitionExpression||O&&null!=d.floorInfo);return D.length?JSON.stringify(D.reduce((d,y)=>{const I=(0,b.f)(this.floors,y),K=(0,L._)(I,y.definitionExpression);return(0,P.pC)(K)&&(d[y.id]=K),d},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const O=this.layer;return O&&(O.commitProperty("dpi"),O.commitProperty("imageFormat"),O.commitProperty("imageTransparency"),O.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const O=[];if(!this.layer)return O;const D=this.layer.sublayers,h=y=>{const I=this.scale;y.visible&&(0===I||(0===y.minScale||I<=y.minScale)&&(0===y.maxScale||I>=y.maxScale))&&(y.sublayers?y.sublayers.forEach(h):O.unshift(y))};D&&D.forEach(h);const d=this._get("visibleSublayers");return!d||d.length!==O.length||d.some((y,I)=>O[I]!==y)?O:d}toJSON(){const O=this.layer;let D={dpi:O.dpi,format:O.imageFormat,transparent:O.imageTransparency,gdbVersion:O.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?D.dynamicLayers=this.dynamicLayers:D=le(oe({},D),{layers:this.layers,layerDefs:this.layerDefs}),D}};(0,_._)([(0,g.Cb)({readOnly:!0})],l.prototype,"dynamicLayers",null),(0,_._)([(0,g.Cb)()],l.prototype,"floors",void 0),(0,_._)([(0,g.Cb)({readOnly:!0})],l.prototype,"hasDynamicLayers",null),(0,_._)([(0,g.Cb)()],l.prototype,"layer",null),(0,_._)([(0,g.Cb)({readOnly:!0})],l.prototype,"layers",null),(0,_._)([(0,g.Cb)({readOnly:!0})],l.prototype,"layerDefs",null),(0,_._)([(0,g.Cb)({type:Number})],l.prototype,"scale",void 0),(0,_._)([(0,g.Cb)(p.qG)],l.prototype,"timeExtent",void 0),(0,_._)([(0,g.Cb)({readOnly:!0})],l.prototype,"version",null),(0,_._)([(0,g.Cb)({readOnly:!0})],l.prototype,"visibleSublayers",null),l=(0,_._)([(0,T.j)("esri.layers.mixins.ExportImageParameters")],l)},51920:(q,z,a)=>{a.d(z,{j:()=>T});var _=a(17626),A=a(14517),E=a(80542),P=a(77712),m=(a(85931),a(8314),a(90912),a(76898));const U={visible:"visibleSublayers"};let T=class extends((0,E.p)(A.Z)){constructor(p){super(p),this.scale=0}set layer(p){this._get("layer")!==p&&(this._set("layer",p),this.handles.remove("layer"),p&&this.handles.add([p.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),p.on("wms-sublayer-update",b=>this.notifyChange(U[b.propertyName]))],"layer"))}get layers(){const{visibleSublayers:p}=this;return p.filter(b=>b.name).map(b=>b.name).join(",")}get version(){this.commitProperty("layers");const p=this.layer;return p&&p.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:p,scale:b}=this,x=null==p?void 0:p.sublayers,v=[],l=O=>{const{minScale:D,maxScale:h,sublayers:d,visible:y}=O;y&&(0===b||(0===D||b<=D)&&(0===h||b>=h))&&(d?d.forEach(l):v.unshift(O))};return null==x||x.forEach(l),v}toJSON(){const{layer:p,layers:b}=this,{imageFormat:x,imageTransparency:v,version:l}=p;return{format:x,request:"GetMap",service:"WMS",styles:"",transparent:v?"TRUE":"FALSE",version:l,layers:b}}};(0,_._)([(0,P.Cb)()],T.prototype,"layer",null),(0,_._)([(0,P.Cb)({readOnly:!0})],T.prototype,"layers",null),(0,_._)([(0,P.Cb)({type:Number})],T.prototype,"scale",void 0),(0,_._)([(0,P.Cb)({readOnly:!0})],T.prototype,"version",null),(0,_._)([(0,P.Cb)({readOnly:!0})],T.prototype,"visibleSublayers",null),T=(0,_._)([(0,m.j)("esri.layers.support.ExportWMSImageParameters")],T)},74711:(q,z,a)=>{a.d(z,{W:()=>U});var _=a(15861),A=a(24263),E=a(84792),P=a(62208),L=a(10699),g=a(32258),C=a(84687),m=a(55463);class U{constructor(p,b,x,v){this.parsedUrl=p,this.portalItem=b,this.apiKey=x,this.signal=v,this.rootDocument=null;const l=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);l&&(this.urlParts={root:l[1],layerId:parseInt(l[2],10)})}fetch(){var p=this;return(0,_.Z)(function*(){var v;if(!p.urlParts)return null;const b=null!=(v=p.portalItem)?v:yield p._portalItemFromServiceItemId();if((0,P.Wi)(b))return p._loadFromUrl();const x=yield p._findAndLoadRelatedPortalItem(b);return(0,P.Wi)(x)?null:p._loadFeatureLayerFromPortalItem(x)})()}fetchPortalItem(){var p=this;return(0,_.Z)(function*(){var x;if(!p.urlParts)return null;const b=null!=(x=p.portalItem)?x:yield p._portalItemFromServiceItemId();return(0,P.Wi)(b)?null:p._findAndLoadRelatedPortalItem(b)})()}_fetchRootDocument(){var p=this;return(0,_.Z)(function*(){if((0,P.pC)(p.rootDocument))return p.rootDocument;if((0,P.Wi)(p.urlParts))return p.rootDocument={},{};const b={query:{f:"json",token:p.apiKey},responseType:"json",signal:p.signal},x=`${p.urlParts.root}/SceneServer`;try{const v=yield(0,E.default)(x,b);p.rootDocument=v.data}catch(v){p.rootDocument={}}return p.rootDocument})()}_fetchServiceOwningPortalUrl(){var p=this;return(0,_.Z)(function*(){var v;const b=null==(v=A.id)?void 0:v.findServerInfo(p.parsedUrl.path);if(null!=b&&b.owningSystemUrl)return b.owningSystemUrl;const x=p.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const l=(yield(0,E.default)(x,{query:{f:"json"},responseType:"json",signal:p.signal})).data.owningSystemUrl;if(l)return l}catch(l){(0,L.r9)(l)}return null})()}_findAndLoadRelatedPortalItem(p){var b=this;return(0,_.Z)(function*(){try{return(yield p.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:b.signal})).find(x=>"Feature Service"===x.type)||null}catch(x){return(0,L.r9)(x),null}})()}_loadFeatureLayerFromPortalItem(p){var b=this;return(0,_.Z)(function*(){yield p.load({signal:b.signal});const x=yield b._findMatchingAssociatedSublayerUrl(p.url);return new g.default({url:x,portalItem:p}).load({signal:b.signal})})()}_loadFromUrl(){var p=this;return(0,_.Z)(function*(){const b=yield p._findMatchingAssociatedSublayerUrl(`${p.urlParts.root}/FeatureServer`);return new g.default({url:b}).load({signal:p.signal})})()}_findMatchingAssociatedSublayerUrl(p){var b=this;return(0,_.Z)(function*(){const x=p.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),v={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:b.signal},l=b.urlParts.layerId,O=b._fetchRootDocument(),D=(0,E.default)(x,v),[h,d]=yield Promise.all([D,O]),y=d&&d.layers,I=h.data&&h.data.layers;if(!Array.isArray(I))throw new Error("expected layers array");if(Array.isArray(y)){for(let K=0;K<Math.min(y.length,I.length);K++)if(y[K].id===l)return`${x}/${I[K].id}`}else if(l<I.length)return`${x}/${I[l].id}`;throw new Error("could not find matching associated sublayer")})()}_portalItemFromServiceItemId(){var p=this;return(0,_.Z)(function*(){const b=(yield p._fetchRootDocument()).serviceItemId;if(!b)return null;const x=new m.default({id:b,apiKey:p.apiKey}),v=yield p._fetchServiceOwningPortalUrl();(0,P.pC)(v)&&(x.portal=new C.Z({url:v}));try{return x.load({signal:p.signal})}catch(l){return(0,L.r9)(l),null}})()}}},35031:(q,z,a)=>{a.d(z,{H3:()=>h,QI:()=>b,U4:()=>U,Yh:()=>v});var _=a(17626),A=a(86810),E=a(77712),C=(a(85931),a(8314),a(90912),a(55342)),m=a(76898);let U=class extends A.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,_._)([(0,E.Cb)({type:Number})],U.prototype,"nodesPerPage",void 0),(0,_._)([(0,E.Cb)({type:Number})],U.prototype,"rootIndex",void 0),(0,_._)([(0,E.Cb)({type:String})],U.prototype,"lodSelectionMetricType",void 0),U=(0,_._)([(0,m.j)("esri.layer.support.I3SNodePageDefinition")],U);let T=class extends A.wq{constructor(){super(...arguments),this.factor=1}};(0,_._)([(0,E.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],T.prototype,"id",void 0),(0,_._)([(0,E.Cb)({type:Number})],T.prototype,"factor",void 0),T=(0,_._)([(0,m.j)("esri.layer.support.I3SMaterialTexture")],T);let p=class extends A.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,_._)([(0,E.Cb)({type:[Number]})],p.prototype,"baseColorFactor",void 0),(0,_._)([(0,E.Cb)({type:T})],p.prototype,"baseColorTexture",void 0),(0,_._)([(0,E.Cb)({type:T})],p.prototype,"metallicRoughnessTexture",void 0),(0,_._)([(0,E.Cb)({type:Number})],p.prototype,"metallicFactor",void 0),(0,_._)([(0,E.Cb)({type:Number})],p.prototype,"roughnessFactor",void 0),p=(0,_._)([(0,m.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],p);let b=class extends A.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,_._)([(0,C.J)({opaque:"opaque",mask:"mask",blend:"blend"})],b.prototype,"alphaMode",void 0),(0,_._)([(0,E.Cb)({type:Number})],b.prototype,"alphaCutoff",void 0),(0,_._)([(0,E.Cb)({type:Boolean})],b.prototype,"doubleSided",void 0),(0,_._)([(0,C.J)({none:"none",back:"back",front:"front"})],b.prototype,"cullFace",void 0),(0,_._)([(0,E.Cb)({type:T})],b.prototype,"normalTexture",void 0),(0,_._)([(0,E.Cb)({type:T})],b.prototype,"occlusionTexture",void 0),(0,_._)([(0,E.Cb)({type:T})],b.prototype,"emissiveTexture",void 0),(0,_._)([(0,E.Cb)({type:[Number]})],b.prototype,"emissiveFactor",void 0),(0,_._)([(0,E.Cb)({type:p})],b.prototype,"pbrMetallicRoughness",void 0),b=(0,_._)([(0,m.j)("esri.layer.support.I3SMaterialDefinition")],b);let x=class extends A.wq{};(0,_._)([(0,E.Cb)({type:String,json:{read:{source:["name","index"],reader:(d,y)=>null!=d?d:`${y.index}`}}})],x.prototype,"name",void 0),(0,_._)([(0,C.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],x.prototype,"format",void 0),x=(0,_._)([(0,m.j)("esri.layer.support.I3STextureFormat")],x);let v=class extends A.wq{constructor(){super(...arguments),this.atlas=!1}};(0,_._)([(0,E.Cb)({type:[x]})],v.prototype,"formats",void 0),(0,_._)([(0,E.Cb)({type:Boolean})],v.prototype,"atlas",void 0),v=(0,_._)([(0,m.j)("esri.layer.support.I3STextureSetDefinition")],v);let l=class extends A.wq{};(0,_._)([(0,C.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],l.prototype,"type",void 0),(0,_._)([(0,E.Cb)({type:Number})],l.prototype,"component",void 0),l=(0,_._)([(0,m.j)("esri.layer.support.I3SGeometryAttribute")],l);let O=class extends A.wq{};(0,_._)([(0,C.J)({draco:"draco"})],O.prototype,"encoding",void 0),(0,_._)([(0,E.Cb)({type:[String]})],O.prototype,"attributes",void 0),O=(0,_._)([(0,m.j)("esri.layer.support.I3SGeometryCompressedAttributes")],O);let D=class extends A.wq{constructor(){super(...arguments),this.offset=0}};(0,_._)([(0,E.Cb)({type:Number})],D.prototype,"offset",void 0),(0,_._)([(0,E.Cb)({type:l})],D.prototype,"position",void 0),(0,_._)([(0,E.Cb)({type:l})],D.prototype,"normal",void 0),(0,_._)([(0,E.Cb)({type:l})],D.prototype,"uv0",void 0),(0,_._)([(0,E.Cb)({type:l})],D.prototype,"color",void 0),(0,_._)([(0,E.Cb)({type:l})],D.prototype,"uvRegion",void 0),(0,_._)([(0,E.Cb)({type:l})],D.prototype,"featureId",void 0),(0,_._)([(0,E.Cb)({type:l})],D.prototype,"faceRange",void 0),(0,_._)([(0,E.Cb)({type:O})],D.prototype,"compressedAttributes",void 0),D=(0,_._)([(0,m.j)("esri.layer.support.I3SGeometryBuffer")],D);let h=class extends A.wq{};(0,_._)([(0,C.J)({triangle:"triangle"})],h.prototype,"topology",void 0),(0,_._)([(0,E.Cb)()],h.prototype,"geometryBuffers",void 0),h=(0,_._)([(0,m.j)("esri.layer.support.I3SGeometryDefinition")],h)},28930:(q,z,a)=>{a.d(z,{y:()=>$});var w,_=a(15861),A=a(17626),E=a(84792),P=a(14517),L=a(27306),g=a(26584),C=a(80542),m=a(63290),U=a(93961),T=a(77029),p=a(10699),b=a(32917),x=a(50618),v=a(21726),l=a(77712),O=a(85931),h=(a(8314),a(66656)),d=a(76898),y=a(58817);class I{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(W,M){if("unknown"!==this._allAvailability)return this._allAvailability;const R=(W-this.location.top)*this.location.width+(M-this.location.left),V=R>>3,G=this._tileAvailabilityBitSet;return V<0||V>G.length?"unknown":G[V]&1<<R%8?"available":"unavailable"}_updateFromData(W){let F=!0,V=!0;const G=Math.ceil(this.location.width*this.location.height/8),X=new Uint8Array(G);let Y=0;for(let Q=0;Q<W.length;Q++){const re=Q%8;W[Q]?(V=!1,X[Y]|=1<<re):F=!1,7===re&&++Y}V?this._allAvailability="unavailable":F?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=X,this.byteSize+=X.length)}static fromDefinition(W,M){const R=W.service.request||E.default,{row:F,col:V,width:G,height:X}=W,Y={query:{f:"json"}};return M=M?oe(oe({},Y),M):Y,R(function B(j){let W;if("vector-tile"===j.service.type)W=`${j.service.url}/tilemap/${j.level}/${j.row}/${j.col}/${j.width}/${j.height}`;else{const R=j.service.tileServers;W=`${R&&R.length?R[j.row%R.length]:j.service.url}/tilemap/${j.level}/${j.row}/${j.col}/${j.width}/${j.height}`}const M=j.service.query;return M&&(W=`${W}?${M}`),W}(W),M).then(Q=>Q.data).catch(Q=>{if(Q&&Q.details&&422===Q.details.httpStatus)return{location:{top:F,left:V,width:G,height:X},valid:!0,data:(0,O.a9)(G*X,0)};throw Q}).then(Q=>{if(Q.location&&(Q.location.top!==F||Q.location.left!==V||Q.location.width!==G||Q.location.height!==X))throw new g.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:Q,definition:{top:F,left:V,width:G,height:X}});return I.fromJSON(Q)})}static fromJSON(W){I._validateJSON(W);const M=new I;return M.location=Object.freeze((0,y.d9)(W.location)),M._updateFromData(W.data),Object.freeze(M)}static _validateJSON(W){if(!W||!W.location)throw new g.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===W.valid)throw new g.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!W.data)throw new g.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(W.data))throw new g.Z("tilemap:data-mismatch","Data must be an array of numbers");if(W.data.length!==W.location.width*W.location.height)throw new g.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function K(j){return`${j.level}/${j.row}/${j.col}/${j.width}/${j.height}`}const H=m.Z.getLogger("esri.layers.support.TilemapCache");let $=w=class extends((0,C.p)(P.Z)){constructor(j){super(j),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*L.Y8.MEGABYTES,this.request=E.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new U.Z(this.cacheByteSize),this.own([(0,b.YP)(()=>{const{layer:j}=this;return[null==j?void 0:j.parsedUrl,null==j?void 0:j.tileServers,null==j?void 0:j.apiKey,null==j?void 0:j.customParameters]},()=>this._initializeTilemapDefinition()),(0,b.YP)(()=>{var j,W;return null==(W=null==(j=this.layer)?void 0:j.tileInfo)?void 0:W.lods},j=>this._initializeAvailableLevels(j),b.tX)]),this._initializeTilemapDefinition()}castLevels(j){return j<=2?(H.error("Minimum levels for Tilemap is 3, but got ",j),3):j}get size(){return 1<<this.levels}fetchTilemap(j,W,M,R){if(!this._availableLevels[j])return Promise.reject(new g.Z("tilemap-cache:level-unavailable",`Level ${j} is unavailable in the service`));const F=this._tmpTilemapDefinition,V=this._tilemapFromCache(j,W,M,F);if(V)return Promise.resolve(V);const G=R&&R.signal;return R=le(oe({},R),{signal:null}),new Promise((X,Y)=>{(0,p.fu)(G,()=>Y((0,p.zE)()));const Q=K(F);let re=this._pendingTilemapRequests[Q];if(!re){re=I.fromDefinition(F,R).then(ae=>(this._tilemapCache.put(Q,ae,ae.byteSize),ae));const se=()=>delete this._pendingTilemapRequests[Q];this._pendingTilemapRequests[Q]=re,re.then(se,se)}re.then(X,Y)})}getAvailability(j,W,M){if(!this._availableLevels[j])return"unavailable";const R=this._tilemapFromCache(j,W,M,this._tmpTilemapDefinition);return R?R.getAvailability(W,M):"unknown"}fetchAvailability(j,W,M,R){return this._availableLevels[j]?this.fetchTilemap(j,W,M,R).catch(F=>F).then(F=>{if(F instanceof I){const V=F.getAvailability(W,M);if("unavailable"===V)throw new g.Z("tile-map:tile-unavailable","Tile is not available",{level:j,row:W,col:M});return V}if((0,p.D_)(F))throw F;return"unknown"}):Promise.reject(new g.Z("tilemap-cache:level-unavailable",`Level ${j} is unavailable in the service`))}fetchAvailabilityUpsample(j,W,M,R,F){R.level=j,R.row=W,R.col=M;const V=this.layer.tileInfo;V.updateTileInfo(R);const G=this.fetchAvailability(j,W,M,F).catch(X=>{if((0,p.D_)(X))throw X;if(V.upsampleTile(R))return this.fetchAvailabilityUpsample(R.level,R.row,R.col,R);throw X});return this._fetchAvailabilityUpsamplePrefetch(R.id,j,W,M,F,G),G}_fetchAvailabilityUpsamplePrefetch(j,W,M,R,F,V){var G=this;return(0,_.Z)(function*(){if(!G._prefetchingEnabled)return;const X=`prefetch-${j}`;if(G.handles.has(X))return;const Y=new AbortController;V.then(()=>Y.abort(),()=>Y.abort());let Q=!1;if(G.handles.add({remove(){Q||(Q=!0,Y.abort())}},X),yield(0,x.MU)(10,Y.signal).catch(()=>{}),Q||(Q=!0,G.handles.remove(X)),(0,p.Hc)(Y))return;const se={id:j,level:W,row:M,col:R},ae=le(oe({},F),{signal:Y.signal}),S=G.layer.tileInfo;for(let N=0;w._prefetches.length<w._maxPrefetch&&S.upsampleTile(se);++N){const J=G.fetchAvailability(se.level,se.row,se.col,ae);w._prefetches.push(J);const Z=()=>{w._prefetches.removeUnordered(J)};J.then(Z,Z)}})()}_initializeTilemapDefinition(){var R;if(!this.layer.parsedUrl)return;const{parsedUrl:j,apiKey:W,customParameters:M}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:j.path,query:(0,v.B7)(le(oe(oe({},j.query),M),{token:null!=W?W:null==(R=j.query)?void 0:R.token})),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(j,W,M,R){R.level=j,R.row=W-W%this.size,R.col=M-M%this.size;const F=K(R);return this._tilemapCache.get(F)}_initializeAvailableLevels(j){this._availableLevels={},j&&j.forEach(W=>this._availableLevels[W.level]=!0)}get test(){const j=this;return{get prefetchingEnabled(){return j._prefetchingEnabled},set prefetchingEnabled(W){j._prefetchingEnabled=W},hasTilemap:(W,M,R)=>!!j._tilemapFromCache(W,M,R,j._tmpTilemapDefinition)}}};$._maxPrefetch=4,$._prefetches=new T.Z({initialSize:w._maxPrefetch}),(0,A._)([(0,l.Cb)({constructOnly:!0,type:Number})],$.prototype,"levels",void 0),(0,A._)([(0,h.p)("levels")],$.prototype,"castLevels",null),(0,A._)([(0,l.Cb)({readOnly:!0,type:Number})],$.prototype,"size",null),(0,A._)([(0,l.Cb)({constructOnly:!0,type:Number})],$.prototype,"cacheByteSize",void 0),(0,A._)([(0,l.Cb)({constructOnly:!0})],$.prototype,"layer",void 0),(0,A._)([(0,l.Cb)({constructOnly:!0})],$.prototype,"request",void 0),$=w=(0,A._)([(0,d.j)("esri.layers.support.TilemapCache")],$)},91309:(q,z,a)=>{a.d(z,{B:()=>m});var C,_=a(17626),A=a(86810),E=a(58817),P=a(77712),g=(a(90912),a(76898));let m=C=class extends A.wq{constructor(U){super(U)}clone(){return new C({customLayerParameters:(0,E.d9)(this.customLayerParameters),customParameters:(0,E.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,_._)([(0,P.Cb)({json:{type:Object,write:!0}})],m.prototype,"customLayerParameters",void 0),(0,_._)([(0,P.Cb)({json:{type:Object,write:!0}})],m.prototype,"customParameters",void 0),(0,_._)([(0,P.Cb)({type:String,json:{write:!0}})],m.prototype,"layerIdentifier",void 0),(0,_._)([(0,P.Cb)({type:String,json:{write:!0}})],m.prototype,"tileMatrixSet",void 0),(0,_._)([(0,P.Cb)({type:String,json:{write:!0}})],m.prototype,"url",void 0),m=C=(0,_._)([(0,g.j)("esri.layer.support.WMTSLayerInfo")],m)},24578:(q,z,a)=>{a.r(z),a.d(z,{fetchFeatureService:()=>y,fromUrl:()=>m});var _=a(15861),A=a(84792),E=a(26584),P=a(62208),L=a(21726),g=a(38305),C=a(30164);function m(W){return U.apply(this,arguments)}function U(){return(U=(0,_.Z)(function*(W){var G;const M=null==(G=W.properties)?void 0:G.customParameters,R=yield b(W.url,M),F=le(oe({},W.properties),{url:W.url});if(!R.sublayerIds)return null!=R.layerOrTableId&&(F.layerId=R.layerOrTableId,F.sourceJSON=R.sourceJSON),new R.Constructor(F);const V=new((yield a.e(5964).then(a.bind(a,25964))).default)({title:R.parsedUrl.title});return p(V,R,F),V})).apply(this,arguments)}function T(W,M){return W?W.find(R=>R.id===M):null}function p(W,M,R){function F(V,G){const X=le(oe({},R),{layerId:V,sublayerTitleMode:"service-name"});return(0,P.pC)(G)&&(X.sourceJSON=G),new M.Constructor(X)}M.sublayerIds.forEach(V=>{const G=F(V,T(M.sublayerInfos,V));W.add(G)}),M.tableIds.forEach(V=>{const G=F(V,T(M.tableInfos,V));W.tables.add(G)})}function b(W,M){return x.apply(this,arguments)}function x(){return(x=(0,_.Z)(function*(W,M){var ae,S;let R=(0,g.Qc)(W);if((0,P.Wi)(R)&&(R=yield v(W,M)),(0,P.Wi)(R))throw new E.Z("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:W});const{serverType:F,sublayer:V}=R;let G;const X={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(F){case"MapServer":G=null!=V?"FeatureLayer":w(W,M).then(N=>N?"TileLayer":"MapImageLayer");break;case"ImageServer":G=$(W,{customParameters:M}).then(N=>{const J=N.tileInfo&&N.tileInfo.format;return N.tileInfo?"LERC"!==(null==J?void 0:J.toUpperCase())||N.cacheType&&"elevation"!==N.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"});break;case"SceneServer":G=$(R.url.path,{customParameters:M}).then(N=>{var J;if(N){if("Voxel"===(null==N?void 0:N.layerType))return"VoxelLayer";if((null==N?void 0:N.layers)&&Array.isArray(N.layers)&&N.layers.length>0){const Z={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},k=null==(J=N.layers[0])?void 0:J.layerType;if(null!=Z[k])return Z[k]}}return"SceneLayer"});break;default:G=X[F]}const Q="FeatureServer"===F,re={parsedUrl:R,Constructor:null,layerOrTableId:Q?V:null,sublayerIds:null,tableIds:null},se=yield G;if({FeatureLayer:!0,SceneLayer:!0}[se]&&null==V){const N=yield D(W,F,M);Q&&(re.sublayerInfos=N.layerInfos,re.tableInfos=N.tableInfos),N.layerIds.length+N.tableIds.length!==1?(re.sublayerIds=N.layerIds,re.tableIds=N.tableIds):Q&&(re.layerOrTableId=null!=(ae=N.layerIds[0])?ae:N.tableIds[0],re.sourceJSON=null!=(S=N.layerInfos[0])?S:N.tableInfos[0])}return re.Constructor=yield K(se),re})).apply(this,arguments)}function v(W,M){return l.apply(this,arguments)}function l(){return(l=(0,_.Z)(function*(W,M){var Y;const R=yield $(W,{customParameters:M});let F=null,V=null;const G=R.type;if("Feature Layer"===G||"Table"===G?(F="FeatureServer",V=R.id):"indexedVector"===G?F="VectorTileServer":R.hasOwnProperty("mapName")?F="MapServer":R.hasOwnProperty("bandCount")&&R.hasOwnProperty("pixelSizeX")?F="ImageServer":R.hasOwnProperty("maxRecordCount")&&R.hasOwnProperty("allowGeometryUpdates")?F="FeatureServer":R.hasOwnProperty("streamUrls")?F="StreamServer":O(R)?(F="SceneServer",V=R.id):R.hasOwnProperty("layers")&&O(null==(Y=R.layers)?void 0:Y[0])&&(F="SceneServer"),!F)return null;const X=null!=V?(0,g.DR)(W):null;return{title:(0,P.pC)(X)&&R.name||(0,L.vt)(W),serverType:F,sublayer:V,url:{path:(0,P.pC)(X)?X.serviceUrl:(0,L.mN)(W).path}}})).apply(this,arguments)}function O(W){return(null==W?void 0:W.hasOwnProperty("store"))&&W.hasOwnProperty("id")&&"number"==typeof W.id}function D(W,M,R){return h.apply(this,arguments)}function h(){return(h=(0,_.Z)(function*(W,M,R){let F,V=!1;if("FeatureServer"===M){const Y=yield y(W,{customParameters:R});V=!!Y.layersJSON,F=Y.layersJSON||Y.serviceJSON}else F=yield $(W,{customParameters:R});const G=null==F?void 0:F.layers,X=null==F?void 0:F.tables;return{layerIds:(null==G?void 0:G.map(Y=>Y.id).reverse())||[],tableIds:(null==X?void 0:X.map(Y=>Y.id).reverse())||[],layerInfos:V?G:[],tableInfos:V?X:[]}})).apply(this,arguments)}function d(W){return!W.type||"Feature Layer"===W.type}function y(W,M){return I.apply(this,arguments)}function I(){return(I=(0,_.Z)(function*(W,M){var G,X;let R=yield $(W,M);R=R||{},R.layers=(null==(G=R.layers)?void 0:G.filter(d))||[];const F={serviceJSON:R};if(R.currentVersion<10.5)return F;const V=yield $(W+"/layers",M);return F.layersJSON={layers:(null==(X=null==V?void 0:V.layers)?void 0:X.filter(d))||[],tables:(null==V?void 0:V.tables)||[]},F})).apply(this,arguments)}function K(W){return B.apply(this,arguments)}function B(){return(B=(0,_.Z)(function*(W){return(0,C.T[W])()})).apply(this,arguments)}function w(W,M){return H.apply(this,arguments)}function H(){return(H=(0,_.Z)(function*(W,M){return(yield $(W,{customParameters:M})).tileInfo})).apply(this,arguments)}function $(W,M){return j.apply(this,arguments)}function j(){return(j=(0,_.Z)(function*(W,M){return(yield(0,A.default)(W,{responseType:"json",query:le(oe({f:"json"},null==M?void 0:M.customParameters),{token:null==M?void 0:M.apiKey})})).data})).apply(this,arguments)}},59787:(q,z,a)=>{a.d(z,{C:()=>_});const _={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},98686:(q,z,a)=>{a.d(z,{CS:()=>l,Cw:()=>v,Yu:()=>y,j5:()=>O,lm:()=>K});var _=a(15861),A=a(59318),E=a(24263),P=a(73281),L=a(84792),g=a(58817),C=a(21726),m=a(65234),U=a(5548),T=a(32442),p=a(33474),b=a(17253);const x={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function v(B){const w=B.folders||[],H=w.slice(),$=new Map,j=new Map,W=new Map,M=new Map,R=new Map,F={esriGeometryPoint:j,esriGeometryPolyline:W,esriGeometryPolygon:M};(B.featureCollection&&B.featureCollection.layers||[]).forEach(G=>{const X=(0,g.d9)(G);X.featureSet.features=[];const Y=G.featureSet.geometryType;$.set(Y,X);const Q=G.layerDefinition.objectIdField;"esriGeometryPoint"===Y?D(j,Q,G.featureSet.features):"esriGeometryPolyline"===Y?D(W,Q,G.featureSet.features):"esriGeometryPolygon"===Y&&D(M,Q,G.featureSet.features)}),B.groundOverlays&&B.groundOverlays.forEach(G=>{R.set(G.id,G)}),w.forEach(G=>{G.networkLinkIds.forEach(X=>{const Y=function d(B,w,H){const $=function h(B,w){let H;return w.some($=>$.id===B&&(H=$,!0)),H}(B,H);return $&&($.parentFolderId=w,$.networkLink=$),$}(X,G.id,B.networkLinks);Y&&H.push(Y)})}),H.forEach(G=>{if(G.featureInfos){G.points=(0,g.d9)($.get("esriGeometryPoint")),G.polylines=(0,g.d9)($.get("esriGeometryPolyline")),G.polygons=(0,g.d9)($.get("esriGeometryPolygon")),G.mapImages=[];for(const X of G.featureInfos)switch(X.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const Y=F[X.type].get(X.id);Y&&G[x[X.type]].featureSet.features.push(Y);break}case"GroundOverlay":{const Y=R.get(X.id);Y&&G.mapImages.push(Y);break}}G.fullExtent=K([G])}});const V=K(H);return{folders:w,sublayers:H,extent:V}}function l(B,w,H,$){const j=E.id&&E.id.findCredential(B);return B=(0,C.fl)(B,{token:j&&j.token}),(0,L.default)(A.Z.kmlServiceUrl,{query:{url:B,model:"simple",folders:"",refresh:0!==H||void 0,outSR:JSON.stringify(w)},responseType:"json",signal:$})}function O(B,w,H=null,$=[]){const j=[],W={},M=w.sublayers,R=w.folders.map(F=>F.id);return M.forEach(F=>{const V=new B;if(H?V.read(F,H):V.read(F),$.length&&R.includes(V.id)&&(V.visible=$.includes(V.id)),W[F.id]=V,null!=F.parentFolderId&&-1!==F.parentFolderId){const G=W[F.parentFolderId];G.sublayers||(G.sublayers=[]),G.sublayers.unshift(V)}else j.unshift(V)}),j}function D(B,w,H){H.forEach($=>{B.set($.attributes[w],$)})}function y(B){return I.apply(this,arguments)}function I(){return(I=(0,_.Z)(function*(B){const w=b.default.fromJSON(B.featureSet).features,$=(0,p.i)(B.layerDefinition.drawingInfo.renderer),j=P.Z.fromJSON(B.popupInfo),W=[];for(const M of w){const R=yield $.getSymbolAsync(M);M.symbol=R,M.popupTemplate=j,M.visible=!0,W.push(M)}return W})).apply(this,arguments)}function K(B){const w=(0,U.Ue)(U.Gv),H=(0,U.Ue)(U.Gv);for(const $ of B){if($.polygons&&$.polygons.featureSet&&$.polygons.featureSet.features)for(const j of $.polygons.featureSet.features)(0,T.Yg)(w,j.geometry),(0,U.TC)(H,w);if($.polylines&&$.polylines.featureSet&&$.polylines.featureSet.features)for(const j of $.polylines.featureSet.features)(0,T.Yg)(w,j.geometry),(0,U.TC)(H,w);if($.points&&$.points.featureSet&&$.points.featureSet.features)for(const j of $.points.featureSet.features)(0,T.Yg)(w,j.geometry),(0,U.TC)(H,w);if($.mapImages)for(const j of $.mapImages)(0,T.Yg)(w,j.extent),(0,U.TC)(H,w)}return(0,U.fS)(H,U.Gv)?null:{xmin:H[0],ymin:H[1],zmin:H[2],xmax:H[3],ymax:H[4],zmax:H[5],spatialReference:m.Z.WGS84}}},61068:(q,z,a)=>{a.d(z,{OE:()=>b,Gc:()=>l,Qg:()=>x,Rq:()=>m,gX:()=>v,z2:()=>U,ET:()=>T,Vx:()=>D}),a(29132);var A=a(62208),P=a(28594),L=a(49672);const g=new Map,C=new class E{constructor(d=15e3,y=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=d,this._interval=Math.min(d,y)}decreaseRefCount(d,y){const I=d+"/"+y,K=this._cachedBlocks;if(K.has(I)){const B=K.get(I);return B.refCount--,B.refCount<=0&&(K.delete(I),B.controller&&B.controller.abort()),B.refCount}return 0}getBlock(d,y){const I=d+"/"+y,K=this._cachedBlocks;if(K.has(I)){const B=K.get(I);return B.ts=Date.now(),B.refCount++,K.delete(I),K.set(I,B),B.block}return null}putBlock(d,y,I,K=null){const B=this._cachedBlocks,w=d+"/"+y;if(B.has(w)){const H=B.get(w);H.ts=Date.now(),H.refCount++}else B.set(w,{block:I,ts:Date.now(),refCount:1,controller:K});this._trim(),this._updateTimer()}deleteBlock(d,y){const I=this._cachedBlocks,K=d+"/"+y;I.has(K)&&I.delete(K)}updateMaxSize(d){this._size=d,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const d=this._cachedBlocks;this._timer=setInterval(()=>{const y=Array.from(d),I=Date.now();for(let K=0;K<y.length&&y[K][1].ts<=I-this._duration;K++)d.delete(y[K][0]);0===d.size&&this._clearTimer()},this._interval)}_trim(){const d=this._cachedBlocks;if(-1===this._size||this._size>=d.size)return;const y=Array.from(d);for(let I=0;I<y.length-this._size;I++)d.delete(y[I][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function m(h,d){return null==d?h:`${h}?sliceId=${d}`}function U(h,d){const y={extent:null,rasterInfo:d,cache:new Map};if(g.has(h)){const I=g.get(h);return I.push(y),I.length-1}return g.set(h,[y]),0}function T(h,d){if(g.has(h)){const y=g.get(h);y[d]=null,y.some(I=>null!=I)||g.delete(h)}}function b(h,d,y){if(!g.has(h))return null==d?C.decreaseRefCount(h,y):0;const I=g.get(h);if(null==I[d])return C.decreaseRefCount(h,y);const K=I[d].cache;if(K.has(y)){const B=K.get(y);if(B.refCount--,0===B.refCount){K.delete(y);for(let w=0;w<I.length;w++)I[w]&&I[w].cache.has(y)&&I[w].cache.delete(y);B.controller&&B.controller.abort()}return B.refCount}return 0}function x(h,d,y){if(!g.has(h))return null==d?C.getBlock(h,y):null;const I=g.get(h);if(null==I[d]){for(let B=0;B<I.length;B++)if(I[B]&&I[B].cache.has(y)){const w=I[B].cache.get(y);return w.refCount++,w.block}return C.getBlock(h,y)}const K=I[d].cache;if(K.has(y)){const B=K.get(y);return B.refCount++,B.block}for(let B=0;B<I.length;B++)if(B!==d&&I[B]&&I[B]&&I[B].cache.has(y)){const w=I[B].cache.get(y);return w.refCount++,K.set(y,w),w.block}return null}function v(h,d,y,I,K=null){if(!g.has(h))return void(null==d&&C.putBlock(h,y,I,K));const B=g.get(h);if(null==B[d])return void C.putBlock(h,y,I,K);const w={refCount:1,block:I,isResolved:!1,isRejected:!1,controller:K};I.then(()=>w.isResolved=!0).catch(()=>w.isRejected=!0),B[d].cache.set(y,w)}function l(h,d,y){if(!g.has(h))return void(null==d&&C.deleteBlock(h,y));const I=g.get(h);null!=I[d]?I[d].cache.delete(y):C.deleteBlock(h,y)}function D(h,d,y,I,K,B,w=null){const H=function O(h,d){if(!g.has(h))return null;const y=g.get(h);return null==y[d]?null:y[d]}(h,d),$=H.extent,{cache:j,rasterInfo:W}=H;if($&&$.xmin===y.xmin&&$.xmax===y.xmax&&$.ymin===y.ymin&&$.ymax===y.ymax)return;const M=y.clone().normalize(),{spatialReference:R,transform:F}=W,V=new Set;for(let G=0;G<M.length;G++){const X=M[G];if(X.xmax-X.xmin<=I||X.ymax-X.ymin<=I)continue;let Y=(0,P.tB)(X,R,w);(0,A.pC)(F)&&(Y=F.inverseTransform(Y));const Q=new L.Z({x:I,y:I,spatialReference:X.spatialReference});if(null==K&&!(K=(0,P.VO)(Q,R,X,w)))return;const{pyramidLevel:re,pyramidResolution:se,excessiveReading:ae}=(0,P.kr)(K,W,B||"closest");if(ae)return;const{storageInfo:S}=W,{origin:N}=S,J={x:Math.max(0,Math.floor((Y.xmin-N.x)/se.x)),y:Math.max(0,Math.floor((N.y-Y.ymax)/se.y))},Z=Math.ceil((Y.xmax-Y.xmin)/se.x-.1),k=Math.ceil((Y.ymax-Y.ymin)/se.y-.1),ee=re>0?S.pyramidBlockWidth:S.blockWidth,te=re>0?S.pyramidBlockHeight:S.blockHeight,ne=1,ie=Math.max(0,Math.floor(J.x/ee)-ne),ce=Math.max(0,Math.floor(J.y/te)-ne),ue=Math.floor((J.x+Z-1)/ee)+ne,de=Math.floor((J.y+k-1)/te)+ne;for(let pe=ce;pe<=de;pe++)for(let _e=ie;_e<=ue;_e++)V.add(`${re}/${pe}/${_e}`)}j.forEach((G,X)=>{if(!V.has(X)){const Y=j.get(X);(null==Y||Y.isResolved||Y.isRejected)&&j.delete(X)}}),H.extent={xmin:y.xmin,ymin:y.ymin,xmax:y.xmax,ymax:y.ymax}}},96504:(q,z,a)=>{a.d(z,{Z:()=>U});var _=a(17626),A=a(86810),E=a(77712),C=(a(85931),a(8314),a(90912),a(76898));let m=class extends A.wq{get affectsPixelSize(){return!1}forwardTransform(T){return T}inverseTransform(T){return T}};(0,_._)([(0,E.Cb)()],m.prototype,"affectsPixelSize",null),(0,_._)([(0,E.Cb)({json:{write:!0}})],m.prototype,"spatialReference",void 0),m=(0,_._)([(0,C.j)("esri.layers.support.rasterTransforms.BaseRasterTransform")],m);const U=m},76671:(q,z,a)=>{a.d(z,{Z:()=>T});var _=a(17626),A=a(77712),g=(a(85931),a(8314),a(90912),a(55342)),C=a(76898),m=a(96504);let U=class extends m.Z{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(p){return"point"===(p=p.clone()).type?(p.x>180+this.tolerance&&(p.x-=360),p):(p.xmin>=180-this.tolerance?(p.xmax-=360,p.xmin-=360):p.xmax>180+this.tolerance&&(p.xmin=-180,p.xmax=180),p)}inverseTransform(p){return"point"===(p=p.clone()).type?(p.x<-this.tolerance&&(p.x+=360),p):(p.xmin<-this.tolerance&&(p.xmin+=360,p.xmax+=360),p)}};(0,_._)([(0,g.J)({GCSShiftXform:"gcs-shift"})],U.prototype,"type",void 0),(0,_._)([(0,A.Cb)()],U.prototype,"tolerance",void 0),U=(0,_._)([(0,C.j)("esri.layers.support.rasterTransforms.GCSShiftTransform")],U);const T=U},85374:(q,z,a)=>{a.d(z,{Z:()=>h});var _=a(17626),E=(a(29132),a(77712)),C=(a(85931),a(8314),a(90912),a(55342)),m=a(68653),U=a(76898),T=a(99433),p=a(96504),b=a(49672),x=a(2004);function v(d,y,I){const{x:K,y:B}=y;if(I<2)return{x:d[0]+K*d[2]+B*d[4],y:d[1]+K*d[3]+B*d[5]};if(2===I){const F=K*K,V=B*B,G=K*B;return{x:d[0]+K*d[2]+B*d[4]+F*d[6]+G*d[8]+V*d[10],y:d[1]+K*d[3]+B*d[5]+F*d[7]+G*d[9]+V*d[11]}}const w=K*K,H=B*B,$=K*B,j=w*K,W=w*B,M=K*H,R=B*H;return{x:d[0]+K*d[2]+B*d[4]+w*d[6]+$*d[8]+H*d[10]+j*d[12]+W*d[14]+M*d[16]+R*d[18],y:d[1]+K*d[3]+B*d[5]+w*d[7]+$*d[9]+H*d[11]+j*d[13]+W*d[15]+M*d[17]+R*d[19]}}function l(d,y,I){const{xmin:K,ymin:B,xmax:w,ymax:H,spatialReference:$}=y;let j=[];if(I<2)j.push({x:K,y:H}),j.push({x:w,y:H}),j.push({x:K,y:B}),j.push({x:w,y:B});else{let R=10;for(let F=0;F<R;F++)j.push({x:K,y:B+(H-B)*F/(R-1)}),j.push({x:w,y:B+(H-B)*F/(R-1)});R=8;for(let F=1;F<=R;F++)j.push({x:K+(w-K)*F/R,y:B}),j.push({x:K+(w-K)*F/R,y:H})}j=j.map(R=>v(d,R,I));const W=j.map(R=>R.x),M=j.map(R=>R.y);return new x.Z({xmin:Math.min.apply(null,W),xmax:Math.max.apply(null,W),ymin:Math.min.apply(null,M),ymax:Math.max.apply(null,M),spatialReference:$})}let D=class extends p.Z{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(d,y){const{coeffX:I,coeffY:K}=y;if(null==I||!I.length||null==K||!K.length||I.length!==K.length)return null;const B=[];for(let w=0;w<I.length;w++)B.push(I[w]),B.push(K[w]);return B}writeForwardCoefficients(d,y,I){const K=[],B=[];for(let w=0;w<(null==d?void 0:d.length);w++)w%2==0?K.push(d[w]):B.push(d[w]);y.coeffX=K,y.coeffY=B}get inverseCoefficients(){let d=this._get("inverseCoefficients");const y=this._get("forwardCoefficients");return!d&&y&&this.polynomialOrder<2&&(d=function O(d){const[y,I,K,B,w,H]=d,$=K*H-w*B,j=w*B-K*H;return[(w*I-y*H)/$,(K*I-y*B)/j,H/$,B/j,-w/$,-K/j]}(y)),d}set inverseCoefficients(d){this._set("inverseCoefficients",d)}readInverseCoefficients(d,y){const{inverseCoeffX:I,inverseCoeffY:K}=y;if(null==I||!I.length||null==K||!K.length||I.length!==K.length)return null;const B=[];for(let w=0;w<I.length;w++)B.push(I[w]),B.push(K[w]);return B}writeInverseCoefficients(d,y,I){const K=[],B=[];for(let w=0;w<(null==d?void 0:d.length);w++)w%2==0?K.push(d[w]):B.push(d[w]);y.inverseCoeffX=K,y.inverseCoeffY=B}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(d){if("point"===d.type){const y=v(this.forwardCoefficients,d,this.polynomialOrder);return new b.Z({x:y.x,y:y.y,spatialReference:d.spatialReference})}return l(this.forwardCoefficients,d,this.polynomialOrder)}inverseTransform(d){if("point"===d.type){const y=v(this.inverseCoefficients,d,this.polynomialOrder);return new b.Z({x:y.x,y:y.y,spatialReference:d.spatialReference})}return l(this.inverseCoefficients,d,this.polynomialOrder)}};(0,_._)([(0,E.Cb)({json:{write:!0}})],D.prototype,"polynomialOrder",void 0),(0,_._)([(0,E.Cb)()],D.prototype,"forwardCoefficients",void 0),(0,_._)([(0,m.r)("forwardCoefficients",["coeffX","coeffY"])],D.prototype,"readForwardCoefficients",null),(0,_._)([(0,T.c)("forwardCoefficients")],D.prototype,"writeForwardCoefficients",null),(0,_._)([(0,E.Cb)({json:{write:!0}})],D.prototype,"inverseCoefficients",null),(0,_._)([(0,m.r)("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],D.prototype,"readInverseCoefficients",null),(0,_._)([(0,T.c)("inverseCoefficients")],D.prototype,"writeInverseCoefficients",null),(0,_._)([(0,E.Cb)()],D.prototype,"affectsPixelSize",null),(0,_._)([(0,C.J)({PolynomialXform:"polynomial"})],D.prototype,"type",void 0),D=(0,_._)([(0,U.j)("esri.layers.support.rasterTransforms.PolynomialTransform")],D);const h=D},46572:(q,z,a)=>{a.d(z,{j:()=>O,c:()=>D});var _=a(76671),A=a(17626),m=(a(63290),a(90912),a(85931),a(8314),a(82255),a(55342)),U=a(76898),T=a(96504);let p=class extends T.Z{constructor(){super(...arguments),this.type="identity"}};(0,A._)([(0,m.J)({IdentityXform:"identity"})],p.prototype,"type",void 0),p=(0,A._)([(0,U.j)("esri.layers.support.rasterTransforms.IdentityTransform")],p);const b=p;var x=a(85374);const v={GCSShiftXform:_.Z,IdentityXform:b,PolynomialXform:x.Z},l=Object.keys(v);function O(h){return!h||l.includes(null==h?void 0:h.type)}function D(h){if(!(null==h?void 0:h.type))return null;const y=v[null==h?void 0:h.type];if(y){const I=new y;return I.read(h),I}return null}},51026:(q,z,a)=>{a.d(z,{d:()=>E,h:()=>A});var _=a(2584);const A={type:_.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:E}}}}};function E(P,L,g,C){if(!P)return null;const{minScale:m,maxScale:U,minLOD:T,maxLOD:p}=L;if(null!=T&&null!=p)return _.Z.fromJSON(C&&C.ignoreMinMaxLOD?P:le(oe({},P),{lods:P.lods.filter(({level:b})=>null!=b&&b>=T&&b<=p)}));if(0!==m&&0!==U){const b=l=>Math.round(1e4*l)/1e4,x=m?b(m):1/0,v=U?b(U):-1/0;return _.Z.fromJSON(le(oe({},P),{lods:P.lods.filter(l=>{const O=b(l.scale);return O<=x&&O>=v})}))}return _.Z.fromJSON(P)}},53776:(q,z,a)=>{a.d(z,{Z:()=>O});var p,_=a(17626),A=a(58817),E=a(77712),P=a(90912),L=a(55342),g=a(76898),C=a(80573),m=a(10914),U=a(91558),T=a(86810);let b=p=class extends T.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new p({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,A.d9)(this.color)})}};(0,_._)([(0,E.Cb)({type:String,json:{write:!0}})],b.prototype,"description",void 0),(0,_._)([(0,E.Cb)({type:String,json:{write:!0}})],b.prototype,"label",void 0),(0,_._)([(0,E.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],b.prototype,"minValue",void 0),(0,_._)([(0,E.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],b.prototype,"maxValue",void 0),(0,_._)([(0,E.Cb)({type:U.Z,json:{type:[P.z8],write:!0}})],b.prototype,"color",void 0),b=p=(0,_._)([(0,g.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],b);const x=b;var v;let l=v=class extends C.Z{constructor(D){super(D),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new v(le(oe({},this.cloneProperties()),{field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,A.d9)(this.colorClassBreakInfos),legendOptions:(0,A.d9)(this.legendOptions)}))}};(0,_._)([(0,L.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],l.prototype,"type",void 0),(0,_._)([(0,E.Cb)({json:{write:!0},type:String})],l.prototype,"field",void 0),(0,_._)([(0,E.Cb)({type:m.I,json:{write:!0}})],l.prototype,"legendOptions",void 0),(0,_._)([(0,E.Cb)({type:C.Z.fieldTransformTypeKebabDict.apiValues,json:{type:C.Z.fieldTransformTypeKebabDict.jsonValues,read:C.Z.fieldTransformTypeKebabDict.read,write:C.Z.fieldTransformTypeKebabDict.write}})],l.prototype,"fieldTransformType",void 0),(0,_._)([(0,E.Cb)({type:[x],json:{write:!0}})],l.prototype,"colorClassBreakInfos",void 0),l=v=(0,_._)([(0,g.j)("esri.renderers.PointCloudClassBreaksRenderer")],l);const O=l},80573:(q,z,a)=>{a.d(z,{Z:()=>$});var T,_=a(17626),A=a(2076),E=a(86810),P=a(58817),L=a(77712),C=(a(90912),a(76898));a(85931),a(8314);let p=T=class extends E.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new T({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,_._)([(0,L.Cb)({type:String,json:{write:!0}})],p.prototype,"field",void 0),(0,_._)([(0,L.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],p.prototype,"minValue",void 0),(0,_._)([(0,L.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],p.prototype,"maxValue",void 0),p=T=(0,_._)([(0,C.j)("esri.renderers.support.pointCloud.ColorModulation")],p);const b=p,x=new A.X({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let v=class extends E.wq{};(0,_._)([(0,L.Cb)({type:x.apiValues,readOnly:!0,nonNullable:!0,json:{type:x.jsonValues,read:!1,write:x.write}})],v.prototype,"type",void 0),v=(0,_._)([(0,C.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],v);const l=v;var D,O=a(55342);let h=D=class extends l{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new D({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,_._)([(0,O.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],h.prototype,"type",void 0),(0,_._)([(0,L.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],h.prototype,"size",void 0),(0,_._)([(0,L.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"useRealWorldSymbolSizes",void 0),h=D=(0,_._)([(0,C.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],h);const d=h;var y;let I=y=class extends l{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new y({scaleFactor:this.scaleFactor})}};(0,_._)([(0,O.J)({pointCloudSplatAlgorithm:"splat"})],I.prototype,"type",void 0),(0,_._)([(0,L.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],I.prototype,"scaleFactor",void 0),I=y=(0,_._)([(0,C.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],I);const B={key:"type",base:l,typeMap:{"fixed-size":d,splat:I}},w=(0,A.w)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let H=class extends E.wq{constructor(j){super(j),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,P.d9)(this.pointSizeAlgorithm),colorModulation:(0,P.d9)(this.colorModulation),pointsPerInch:(0,P.d9)(this.pointsPerInch)}}};(0,_._)([(0,L.Cb)({type:w.apiValues,readOnly:!0,nonNullable:!0,json:{type:w.jsonValues,read:!1,write:w.write}})],H.prototype,"type",void 0),(0,_._)([(0,L.Cb)({types:B,json:{write:!0}})],H.prototype,"pointSizeAlgorithm",void 0),(0,_._)([(0,L.Cb)({type:b,json:{write:!0}})],H.prototype,"colorModulation",void 0),(0,_._)([(0,L.Cb)({json:{write:!0},nonNullable:!0,type:Number})],H.prototype,"pointsPerInch",void 0),H=(0,_._)([(0,C.j)("esri.renderers.PointCloudRenderer")],H),(H||(H={})).fieldTransformTypeKebabDict=new A.X({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const $=H},23899:(q,z,a)=>{a.d(z,{Z:()=>b});var T,_=a(17626),A=a(58817),E=a(77712),L=(a(90912),a(55342)),g=a(76898),C=a(80573),m=a(10914),U=a(8029);let p=T=class extends C.Z{constructor(x){super(x),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new T(le(oe({},this.cloneProperties()),{field:(0,A.d9)(this.field),fieldTransformType:(0,A.d9)(this.fieldTransformType),stops:(0,A.d9)(this.stops),legendOptions:(0,A.d9)(this.legendOptions)}))}};(0,_._)([(0,L.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],p.prototype,"type",void 0),(0,_._)([(0,E.Cb)({json:{write:!0},type:String})],p.prototype,"field",void 0),(0,_._)([(0,E.Cb)({type:m.I,json:{write:!0}})],p.prototype,"legendOptions",void 0),(0,_._)([(0,E.Cb)({type:C.Z.fieldTransformTypeKebabDict.apiValues,json:{type:C.Z.fieldTransformTypeKebabDict.jsonValues,read:C.Z.fieldTransformTypeKebabDict.read,write:C.Z.fieldTransformTypeKebabDict.write}})],p.prototype,"fieldTransformType",void 0),(0,_._)([(0,E.Cb)({type:[U.Z],json:{write:!0}})],p.prototype,"stops",void 0),p=T=(0,_._)([(0,g.j)("esri.renderers.PointCloudStretchRenderer")],p);const b=p},98610:(q,z,a)=>{a.d(z,{Z:()=>O});var p,_=a(17626),A=a(58817),E=a(77712),P=a(90912),L=a(55342),g=a(76898),C=a(80573),m=a(10914),U=a(91558),T=a(86810);let b=p=class extends T.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new p({description:this.description,label:this.label,values:(0,A.d9)(this.values),color:(0,A.d9)(this.color)})}};(0,_._)([(0,E.Cb)({type:String,json:{write:!0}})],b.prototype,"description",void 0),(0,_._)([(0,E.Cb)({type:String,json:{write:!0}})],b.prototype,"label",void 0),(0,_._)([(0,E.Cb)({type:[String],json:{write:!0}})],b.prototype,"values",void 0),(0,_._)([(0,E.Cb)({type:U.Z,json:{type:[P.z8],write:!0}})],b.prototype,"color",void 0),b=p=(0,_._)([(0,g.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],b);const x=b;var v;let l=v=class extends C.Z{constructor(D){super(D),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new v(le(oe({},this.cloneProperties()),{field:(0,A.d9)(this.field),fieldTransformType:(0,A.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,A.d9)(this.colorUniqueValueInfos),legendOptions:(0,A.d9)(this.legendOptions)}))}};(0,_._)([(0,L.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],l.prototype,"type",void 0),(0,_._)([(0,E.Cb)({json:{write:!0},type:String})],l.prototype,"field",void 0),(0,_._)([(0,E.Cb)({type:C.Z.fieldTransformTypeKebabDict.apiValues,json:{type:C.Z.fieldTransformTypeKebabDict.jsonValues,read:C.Z.fieldTransformTypeKebabDict.read,write:C.Z.fieldTransformTypeKebabDict.write}})],l.prototype,"fieldTransformType",void 0),(0,_._)([(0,E.Cb)({type:[x],json:{write:!0}})],l.prototype,"colorUniqueValueInfos",void 0),(0,_._)([(0,E.Cb)({type:m.I,json:{write:!0}})],l.prototype,"legendOptions",void 0),l=v=(0,_._)([(0,g.j)("esri.renderers.PointCloudUniqueValueRenderer")],l);const O=l},22264:(q,z,a)=>{function _(g,C){return C?"xoffset"in C&&C.xoffset?Math.max(g,Math.abs(C.xoffset)):"yoffset"in C&&C.yoffset?Math.max(g,Math.abs(C.yoffset||0)):g:g}function E(g,C){return"number"==typeof g?g:g&&g.stops&&g.stops.length?function A(g){let C=0,m=0;for(let U=0;U<g.length;U++){const T=g[U].size;"number"==typeof T&&(C+=T,m++)}return C/m}(g.stops):C}function L(g){const C=g&&g.renderer,m="touch"===(g&&g.event&&g.event.pointerType)?9:6;if(!C)return m;const U="visualVariables"in C?function P(g,C){if(!C)return g;const m=C.filter(b=>"size"===b.type).map(b=>{const{maxSize:x,minSize:v}=b;return(E(x,g)+E(v,g))/2});let U=0;const T=m.length;if(0===T)return g;for(let b=0;b<T;b++)U+=m[b];const p=Math.floor(U/T);return Math.max(p,g)}(m,C.visualVariables):m;if("simple"===C.type)return _(U,C.symbol);if("unique-value"===C.type){let T=U;return C.uniqueValueInfos.forEach(p=>{T=_(T,p.symbol)}),T}if("class-breaks"===C.type){let T=U;return C.classBreakInfos.forEach(p=>{T=_(T,p.symbol)}),T}return U}a.d(z,{k:()=>L})},70026:(q,z,a)=>{a.d(z,{t:()=>E});var _=a(15861),A=a(84792);function E(L,g){return P.apply(this,arguments)}function P(){return(P=(0,_.Z)(function*(L,g){const{data:C}=yield(0,A.default)(L,oe({responseType:"image"},g));return C})).apply(this,arguments)}},32837:(q,z,a)=>{a.d(z,{Z:()=>g});var _=a(35909),A=a(31375),E=a(47139),P=a(80991);class g{constructor(m){this._resourceManager=m}dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(m,U,T){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===m.type||"esriSFS"===m.type){const[d,y,I]=_.fN.rasterizeSimpleFill(this._rasterizationCanvas,m.style,U);return{size:[y,I],image:new Uint32Array(d.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===m.type||"esriSLS"===m.type||"line"===m.type&&m.dashTemplate){let d,y;if("simple-line"===m.type||"esriSLS"===m.type)switch(d=(0,_.U1)(m.style,m.cap),m.cap){case"butt":y="Butt";break;case"square":y="Square";break;default:y="Round"}else d=m.dashTemplate,y=m.cim.capStyle;const[I,K,B]=_.fN.rasterizeSimpleLine(d,y);return{size:[K,B],image:new Uint32Array(I.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let p,b,x;if("simple-marker"===m.type||"esriSMS"===m.type||"line-marker"===m.type?(p=_.B$.fromSimpleMarker(m),x=(0,E.Fp)(p)):m.cim&&"CIMHatchFill"===m.cim.type?(p=_.B$.fromCIMHatchFill(m.cim),b=new A.Z(p.frame.xmin,-p.frame.ymax,p.frame.xmax-p.frame.xmin,p.frame.ymax-p.frame.ymin)):m.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===m.cim.markerPlacement.type?(p=_.B$.fromCIMInsidePolygon(m.cim),b=new A.Z(p.frame.xmin,-p.frame.ymax,p.frame.xmax-p.frame.xmin,p.frame.ymax-p.frame.ymin)):(p=m.cim,x=(0,E.Fp)(p)),x&&!T){const[d,y,I]=(0,E.RL)(x);return d?{size:[y,I],image:new Uint32Array(d.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[v,l,O,D,h]=_.B$.rasterize(this._rasterizationCanvas,p,b,this._resourceManager,!T);return v?{size:[l,O],image:new Uint32Array(v.buffer),sdf:!1,simplePattern:!1,anchorX:D,anchorY:h}:null}rasterizeImageResource(m,U,T,p){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=m,this._rasterizationCanvas.height=U;const b=this._rasterizationCanvas.getContext("2d");T instanceof ImageData?b.putImageData(T,0,0):(T.setAttribute("width",`${m}px`),T.setAttribute("height",`${U}px`),b.drawImage(T,0,0,m,U));const x=b.getImageData(0,0,m,U),v=new Uint8Array(x.data);if(p)for(const y of p)if(y&&y.oldColor&&4===y.oldColor.length&&y.newColor&&4===y.newColor.length){const[I,K,B,w]=y.oldColor,[H,$,j,W]=y.newColor;if(I===H&&K===$&&B===j&&w===W)continue;for(let M=0;M<v.length;M+=4)I===v[M]&&K===v[M+1]&&B===v[M+2]&&w===v[M+3]&&(v[M]=H,v[M+1]=$,v[M+2]=j,v[M+3]=W)}let l;for(let y=0;y<v.length;y+=4)l=v[y+3]/255,v[y]=v[y]*l,v[y+1]=v[y+1]*l,v[y+2]=v[y+2]*l;let O=v,D=m,h=U;const d=512;if(D>=d||h>=d){const y=D/h;y>1?(D=d,h=Math.round(d/y)):(h=d,D=Math.round(d*y)),O=new Uint8Array(4*D*h);const I=new Uint8ClampedArray(O.buffer);(0,P.TT)(v,m,U,I,D,h,!1)}return{size:[D,h],image:new Uint32Array(O.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},50998:(q,z,a)=>{a.r(z),a.d(z,{fetchSymbolFromStyle:()=>x,resolveWebStyleSymbol:()=>b});var _=a(65787),A=a(83100),E=a(26584),P=a(62208),L=a(21726),g=a(84687),C=a(29840),m=a(65270),U=a(77345),T=a(78241),p=a(96296);function b(l,O,D,h){return l.name?l.styleName&&"Esri2DPointSymbolsStyle"===l.styleName?function v(l,O,D){const h=T.wm.replace(/\{SymbolName\}/gi,l.name),d=(0,P.pC)(O.portal)?O.portal:g.Z.getDefault();return(0,T.EJ)(h,D).then(y=>{const I=(0,T.KV)(y.data);return(0,m.im)(I,{portal:d,url:(0,L.mN)((0,L.Yd)(h)),origin:"portal-item"})})}(l,O,h):(0,T.n2)(l,O,h).then(d=>x(d,l.name,O,D,h)):Promise.reject(new E.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function x(l,O,D,h,d){const y=l.data,I=D&&(0,P.pC)(D.portal)?D.portal:g.Z.getDefault(),K={portal:I,url:(0,L.mN)(l.baseUrl),origin:"portal-item"},B=y.items.find(W=>W.name===O);if(!B)return Promise.reject(new E.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${O}' could not be found`,{symbolName:O}));let w=(0,C.f)((0,T.v9)(B,h),K),H=B.thumbnail&&B.thumbnail.href;const $=B.thumbnail&&B.thumbnail.imageData;(0,A.XO)()&&(w=(0,A.pJ)(w),H=(0,A.pJ)(H));const j={portal:I,url:(0,L.mN)((0,L.Yd)(w)),origin:"portal-item"};return(0,T.EJ)(w,d).then(W=>{const M="cimRef"===h?(0,T.KV)(W.data):W.data,R=(0,m.im)(M,j);if(R&&(0,_.dU)(R)){if(H){const F=(0,C.f)(H,K);R.thumbnail=new p.p({url:F})}else $&&(R.thumbnail=new p.p({url:`data:image/png;base64,${$}`}));l.styleUrl?R.styleOrigin=new U.Z({portal:D.portal,styleUrl:l.styleUrl,name:O}):l.styleName&&(R.styleOrigin=new U.Z({portal:D.portal,styleName:l.styleName,name:O}))}return R})}},45e3:(q,z,a)=>{a.d(z,{G:()=>E});var _=a(44589),A=a(67969);class E extends _.Z{constructor(){super(...arguments),this.requiresDedicatedFBO=!1}dispose(){}doRender(L){const g=this.createRenderParams(L),{context:C,painter:m,profiler:U}=g;this._prevFBO=C.getBoundFramebufferObject(),U.recordContainerStart(this.name);const T=this._getFbo(g),p=m.getRenderTarget();C.bindFramebuffer(T),m.setRenderTarget(T),C.setDepthWriteEnabled(!0),C.setColorMask(!0,!0,!0,!0),C.setClearColor(0,0,0,0),C.setClearDepth(1),C.clear(C.gl.COLOR_BUFFER_BIT|C.gl.DEPTH_BUFFER_BIT),C.setDepthWriteEnabled(!1);for(const b of this.children)b.beforeRender(L);for(const b of this.children)b.processRender(g);for(const b of this.children)b.afterRender(L);m.setRenderTarget(p),m.releaseFbo(T),C.bindFramebuffer(this._prevFBO),m.beforeRenderLayer(g,this._clippingInfos?255:0,this.computedOpacity),C.setStencilTestEnabled(!1),C.setStencilWriteMask(0),m.blitTexture(C,T.colorTexture,A.cw.NEAREST),m.compositeLayer(g,this.computedOpacity),U.recordContainerEnd()}createRenderParams(L){return le(oe({},super.createRenderParams(L)),{blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1})}_getFbo(L){const{context:g,painter:C}=L,{width:m,height:U}=g.getViewport();return C.acquireFbo(m,U)}}},55746:(q,z,a)=>{a.d(z,{k:()=>b,p:()=>x});var _=a(65389),A=a(61885),P=(a(8314),a(62208)),L=a(76279),g=a(5548),C=a(16669),m=a(52397);function U(v,l){return v<<16|l}function T(v){return(4294901760&v)>>>16}function p(v){return 65535&v}const b={getObjectId:v=>v.getObjectId(),getAttributes:v=>v.readAttributes(),getAttribute:(v,l)=>v.readAttribute(l),cloneWithGeometry:(v,l)=>v,getGeometry:v=>v.readHydratedGeometry(),getCentroid:(v,l)=>v.readCentroid()};class x extends C.J{constructor(l,O,D){super(l,O),this.featureAdapter=b,this.events=new A.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new _.Z(50),this._index=(0,L.r)(9,h=>({minX:this._storage.getXMin(h),minY:this._storage.getYMin(h),maxX:this._storage.getXMax(h),maxY:this._storage.getYMax(h)})),this.mode=D}get storeStatistics(){let l=0,O=0,D=0;return this.forEach(h=>{const d=h.readGeometry();d&&(O+=d.isPoint?1:d.lengths.reduce((y,I)=>y+I,0),D+=d.isPoint?1:d.lengths.length,l+=1)}),{featureCount:l,vertexCount:O,ringCount:D}}hasInstance(l){return this._featureSetsByInstance.has(l)}onTileData(l,O){if((0,P.Wi)(O.addOrUpdate))return O;if(O.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const h=O.addOrUpdate.getCursor();for(;h.next();){const d=h.getDisplayId();this.setComputedAttributes(this._storage,h,d,l.scale)}return O}this._featureSetsByInstance.set(O.addOrUpdate.instance,O.addOrUpdate);const D=O.addOrUpdate.getCursor();for(;D.next();)this._insertFeature(D,l.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),O}search(l){this._rebuildIndex();const O=l.id,D=this._indexSearchCache.find(I=>I.tileId===O);if((0,P.pC)(D))return D.readers;const h=new Map,d=this._searchIndex(l.bounds),y=[];for(const I of d){const K=this._storage.getInstanceId(I),B=T(K),w=p(K);h.has(B)||h.set(B,[]),h.get(B).push(w)}return h.forEach((I,K)=>{const B=this._featureSetsByInstance.get(K);y.push(m.t.from(B,I))}),this._indexSearchCache.enqueue({tileId:O,readers:y}),y}insert(l){var h;const O=l.getCursor(),D=this._storage;for(;O.next();){const d=U(O.instance,O.getIndex()),y=O.getObjectId(),I=null!=(h=this._objectIdToDisplayId.get(y))?h:this._storage.createDisplayId();O.setDisplayId(I),D.setInstanceId(I,d),this._objectIdToDisplayId.set(y,I)}this._featureSetsByInstance.set(l.instance,l),this._spatialIndexInvalid=!0}remove(l){const O=this._objectIdToDisplayId.get(l);if(!O)return;const D=this._storage.getInstanceId(O),h=p(D),d=T(D),y=this._featureSetsByInstance.get(d);this._objectIdToDisplayId.delete(l),this._storage.releaseDisplayId(O),y.removeAtIndex(h),y.isEmpty&&this._featureSetsByInstance.delete(d),this._spatialIndexInvalid=!0}toArray(){const l=new Array;return this.forEach(O=>l.push(O)),l}forEach(l){this._objectIdToDisplayId.forEach(O=>{const D=this._storage.getInstanceId(O),h=this._lookupFeature(D);l(h)})}forEachUnsafe(l){this._objectIdToDisplayId.forEach(O=>{const D=this._storage.getInstanceId(O),h=T(D),d=p(D),y=this._getFeatureSet(h);y.setIndex(d),l(y)})}forEachInBounds(l,O){const D=this._searchIndex(l);for(const h of D){const d=this.lookupFeatureByDisplayId(h,this._storage);O((0,P.Wg)(d))}}forEachBounds(l,O,D){this._rebuildIndex();const h=[0,0,0,0];for(const d of l){if(!d.readGeometry())continue;const y=d.getDisplayId();h[0]=this._storage.getXMin(y),h[1]=this._storage.getYMin(y),h[2]=this._storage.getXMax(y),h[3]=this._storage.getYMax(y),O((0,g.JR)(D,h))}}sweepFeatures(l,O,D){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((h,d)=>{l.has(h)||(O.releaseDisplayId(h),D&&D.unsetAttributeData(h),this._objectIdToDisplayId.delete(d))}),this.events.emit("changed")}sweepFeatureSets(l){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((O,D)=>{l.has(D)||this._featureSetsByInstance.delete(D)})}lookupObjectId(l,O){const D=this.lookupFeatureByDisplayId(l,O);return(0,P.Wi)(D)?null:D.getObjectId()}lookupDisplayId(l){return this._objectIdToDisplayId.get(l)}lookupFeatureByDisplayId(l,O){const D=O.getInstanceId(l);return this._lookupFeature(D)}lookupByDisplayIdUnsafe(l){const O=this._storage.getInstanceId(l),D=T(O),h=p(O),d=this._getFeatureSet(D);return d?(d.setIndex(h),d):null}_insertFeature(l,O){const D=this._storage,h=l.getObjectId(),d=U(l.instance,l.getIndex());D.getInstanceId(l.getDisplayId());let y=this._objectIdToDisplayId.get(h);y||(y=D.createDisplayId(),this._objectIdToDisplayId.set(h,y),this._spatialIndexInvalid=!0),l.setDisplayId(y),D.setInstanceId(y,d),this.setComputedAttributes(D,l,y,O)}_searchIndex(l){return this._rebuildIndex(),this._index.search({minX:l[0],minY:l[1],maxX:l[2],maxY:l[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const l=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(O=>{const D=O.getCursor();for(;D.next();){const h=D.getDisplayId();this._storage.setBounds(h,D)&&l.push(h)}}):this._objectIdToDisplayId.forEach(O=>{const D=this._storage.getInstanceId(O);this._storage.setBounds(O,this._lookupFeature(D))&&l.push(O)}),this._index.clear(),this._index.load(l),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(l){const O=T(l),D=this._getFeatureSet(O);if(!D)return null;const h=D.getCursor(),d=p(l);return h.setIndex(d),h}_getFeatureSet(l){return this._featureSetsByInstance.get(l)}}},16669:(q,z,a)=>{a.d(z,{J:()=>U});var _=a(15861),A=a(8314),E=a(62208),P=a(84682),L=a(46679),g=a(63290);const m=a.e(2445).then(a.bind(a,22445));class U{constructor(p,b){this._canCacheExpressionValue=!1,this._sourceInfo=p,this._storage=b,this._bitsets={computed:b.getBitset(b.createBitset())}}get storage(){return this._storage}invalidate(){this._bitsets.computed.clear()}updateSchema(p,b){var x=this;return(0,_.Z)(function*(){const v=(0,P.Hg)(x._schema,b);if(x._schema=b,!b||(0,E.Wi)(v)||!(0,P.uD)(v,"attributes"))return;(0,A.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",v),x._bitsets.computed.clear(),p.targets[b.name]=!0;const l=b.attributes,O=[],D=[];for(const h in l){const d=l[h];switch(d.type){case"field":break;case"expression":O.push(x._createArcadeComputedField(d));break;case"label-expression":O.push(x._createLabelArcadeComputedField(d));break;case"statistic":D.push(d)}}x._computedFields=yield Promise.all(O),x._canCacheExpressionValue=!x._computedFields.some(h=>"expression"===h.type&&h.expression.referencesScale()),x._statisticFields=D})()}setComputedAttributes(p,b,x,v){const l=this._bitsets.computed;if(!this._canCacheExpressionValue||!l.has(x)){l.set(x);for(const O of this._computedFields){const D=this._evaluateField(b,O,v);switch(O.resultType){case"numeric":p.setComputedNumericAtIndex(x,O.fieldIndex,D);break;case"string":p.setComputedStringAtIndex(x,O.fieldIndex,D)}}}}_createArcadeComputedField(p){var b=this;return(0,_.Z)(function*(){const x=b._sourceInfo.spatialReference,v=b._sourceInfo.fieldsIndex;return le(oe({},p),{expression:yield(0,L.Yi)(p.valueExpression,x,v)})})()}_createLabelArcadeComputedField(p){var b=this;return(0,_.Z)(function*(){const x=b._sourceInfo.spatialReference,v=b._sourceInfo.fieldsIndex,{createLabelFunction:l}=yield m,O=yield l(p.label,v,x);return le(oe({},p),{builder:O})})()}_evaluateField(p,b,x){switch(b.type){case"label-expression":{const v=p.readArcadeFeature();return b.builder.evaluate(v)||""}case"expression":{const{expression:v}=b;return function C(T,p,b){T.referencesGeometry();const x=p.readArcadeFeature();try{return T.evaluate(le(oe({},b),{$feature:x}))}catch(v){return g.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",v),null}}(v,p,{$view:{scale:x}})}}}}},13112:(q,z,a)=>{a.d(z,{Z:()=>U});var _=a(17626),A=a(80542),E=a(77712),C=(a(85931),a(8314),a(90912),a(76898));let m=class extends A.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const T=this.get("tileStore.tileScheme.spatialReference");return T&&T.toJSON()||null}};(0,_._)([(0,E.Cb)({readOnly:!0})],m.prototype,"supportsTileUpdates",null),(0,_._)([(0,E.Cb)({constructOnly:!0})],m.prototype,"remoteClient",void 0),(0,_._)([(0,E.Cb)({constructOnly:!0})],m.prototype,"service",void 0),(0,_._)([(0,E.Cb)()],m.prototype,"spatialReference",null),(0,_._)([(0,E.Cb)({constructOnly:!0})],m.prototype,"tileInfo",void 0),(0,_._)([(0,E.Cb)({constructOnly:!0})],m.prototype,"tileStore",void 0),m=(0,_._)([(0,C.j)("esri.views.2d.layers.features.processors.BaseProcessor")],m);const U=m},52397:(q,z,a)=>{a.d(z,{t:()=>A});var _=a(25208);class A extends _.s{constructor(P,L){super(_.s.createInstance(),P.fullSchema()),this._currentIndex=-1,this._reader=P,this._indices=L}static from(P,L){return new A(P.copy(),L)}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const P=new A(this._reader.copy(),this._indices);return P._currentIndex=this._currentIndex,P}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(P){this._reader.setArcadeSpatialReference(P)}attachStorage(P){this._reader.attachStorage(P)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(P){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(P,L){return this._reader.setComputedNumericAtIndex(L,0)}getComputedString(P){return this._reader.getComputedStringAtIndex(0)}setComputedString(P,L){return this._reader.setComputedStringAtIndex(0,L)}getComputedNumericAtIndex(P){return this._reader.getComputedNumericAtIndex(P)}setComputedNumericAtIndex(P,L){this._reader.setComputedNumericAtIndex(P,L)}getComputedStringAtIndex(P){return this._reader.getComputedStringAtIndex(P)}setComputedStringAtIndex(P,L){return this._reader.setComputedStringAtIndex(P,L)}transform(P,L,g,C){const m=this.copy();return m._reader=this._reader.transform(P,L,g,C),m}readAttribute(P,L=!1){return this._reader.readAttribute(P,L)}readAttributes(){return this._reader.readAttributes()}joinAttributes(P){return this._reader.joinAttributes(P)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(P){return this.readAttribute(P,!0)}hasField(P){return this._reader.hasField(P)}setField(P,L){return this._reader.setField(P,L)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getFieldNames(){return this._reader.getFieldNames()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(P){return this._reader.setDisplayId(P)}getGroupId(){return this._reader.getGroupId()}setGroupId(P){return this._reader.setGroupId(P)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(P){return this._reader.setIndex(P)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(P,L){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},84225:(q,z,a)=>{a.d(z,{Z:()=>U});var _=a(17626),A=a(80542),E=a(77712),C=(a(85931),a(8314),a(90912),a(76898));let m=class extends A.r{constructor(T){super(T),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(T){const p=this.createTile(T);return p.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(T.id,p),p}forceAttributeTextureUpload(){}forEachTile(T){this.tiles.forEach(T)}releaseTile(T){this.tiles.delete(T.key.id),this.disposeTile(T)}isUpdating(){let T=!0;return this.tiles.forEach(p=>{T=T&&p.isReady}),!T}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};(0,_._)([(0,E.Cb)()],m.prototype,"layer",void 0),(0,_._)([(0,E.Cb)()],m.prototype,"layerView",void 0),(0,_._)([(0,E.Cb)()],m.prototype,"tileInfoView",void 0),(0,_._)([(0,E.Cb)()],m.prototype,"updating",null),m=(0,_._)([(0,C.j)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],m);const U=m},36275:(q,z,a)=>{a.d(z,{Z:()=>E});var _=a(39406),A=a(55051);class E extends A.Z{renderChildren(L){this.attributeView.bindTextures(L.context,!1),this.children.some(g=>g.hasData)&&(super.renderChildren(L),L.drawPhase===_.jx.MAP&&this._renderChildren(L),this.hasHighlight()&&L.drawPhase===_.jx.HIGHLIGHT&&this._renderHighlight(L),this._boundsRenderer&&this._boundsRenderer.doRender(L))}_renderHighlight(L){const{painter:g}=L,C=g.effects.highlight;C.bind(L),this._renderChildren(L,C.defines),C.draw(L),C.unbind()}}},13305:(q,z,a)=>{a.d(z,{Z:()=>b});var _=a(17626),C=(a(63290),a(90912),a(85931),a(8314),a(82255),a(76898)),m=a(39406),U=a(55051),T=a(67969);let p=class extends U.Z{doRender(x){x.drawPhase===m.jx.HIGHLIGHT&&super.doRender(x)}renderChildren(x){if(this.attributeView.bindTextures(x.context),!this.children.some(O=>O.hasData))return;super.renderChildren(x);const{painter:v}=x,l=v.effects.highlight;l.bind(x),x.context.setColorMask(!0,!0,!0,!0),x.context.clear(T.lk.COLOR_BUFFER_BIT),this._renderChildren(x,l.defines.concat(["highlightAll"])),l.draw(x),l.unbind()}};p=(0,_._)([(0,C.j)("esri.views.2d.layers.support.HighlightGraphicContainer")],p);const b=p},88569:(q,z,a)=>{a.d(z,{Bh:()=>b,IB:()=>g,j7:()=>C,je:()=>p,ve:()=>U,wu:()=>P});var _=a(42743),A=a(67969),E=a(2078);const P=(0,E.wK)(A.zi.SRC_ALPHA,A.zi.ONE,A.zi.ONE_MINUS_SRC_ALPHA,A.zi.ONE_MINUS_SRC_ALPHA),L=(0,E.if)(A.zi.ONE,A.zi.ONE),g=(0,E.if)(A.zi.ZERO,A.zi.ONE_MINUS_SRC_ALPHA);function C(x){return x===_.Am.FrontFace?null:x===_.Am.Alpha?g:L}const U=5e5,T={factor:-1,units:-2};function p(x){return x?T:null}function b(x,v=A.wb.LESS){return x===_.Am.NONE||x===_.Am.FrontFace?v:A.wb.LEQUAL}},2282:(q,z,a)=>{a.d(z,{hu:()=>g,yK:()=>m}),a(99770),a(993),(0,a(4794).c)();class L{constructor(d){this.message=d}toString(){return`AssertException: ${this.message}`}}function g(h,d){if(!h)throw d=d||"assert",console.log(new Error(d).stack),new L(d)}function m(h,d,y,I){let K,B=(y[0]-h[0])/d[0],w=(I[0]-h[0])/d[0];B>w&&(K=B,B=w,w=K);let H=(y[1]-h[1])/d[1],$=(I[1]-h[1])/d[1];if(H>$&&(K=H,H=$,$=K),B>$||H>w)return!1;H>B&&(B=H),$<w&&(w=$);let j=(y[2]-h[2])/d[2],W=(I[2]-h[2])/d[2];return j>W&&(K=j,j=W,W=K),!(B>W||j>w||(W<w&&(w=W),w<0))}},42743:(q,z,a)=>{var _,A,E,P,L,g,C,m,U,T,p,b,x,v,l;a.d(z,{Am:()=>P,CE:()=>p,Gv:()=>A,JJ:()=>x,MX:()=>T,Rw:()=>g,Vr:()=>_,hU:()=>C}),(l=_||(_={}))[l.None=0]="None",l[l.Front=1]="Front",l[l.Back=2]="Back",l[l.COUNT=3]="COUNT",function(l){l[l.Less=0]="Less",l[l.Lequal=1]="Lequal",l[l.COUNT=2]="COUNT"}(A||(A={})),function(l){l[l.NONE=0]="NONE",l[l.SMAA=1]="SMAA"}(E||(E={})),function(l){l[l.Color=0]="Color",l[l.Alpha=1]="Alpha",l[l.FrontFace=2]="FrontFace",l[l.NONE=3]="NONE",l[l.COUNT=4]="COUNT"}(P||(P={})),function(l){l[l.BACKGROUND=0]="BACKGROUND",l[l.UPDATE=1]="UPDATE"}(L||(L={})),function(l){l[l.NOT_LOADED=0]="NOT_LOADED",l[l.LOADING=1]="LOADING",l[l.LOADED=2]="LOADED"}(g||(g={})),function(l){l[l.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",l[l.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(C||(C={})),function(l){l[l.ASYNC=0]="ASYNC",l[l.SYNC=1]="SYNC"}(m||(m={})),function(l){l[l.Highlight=0]="Highlight",l[l.MaskOccludee=1]="MaskOccludee",l[l.COUNT=2]="COUNT"}(U||(U={})),function(l){l[l.Triangle=0]="Triangle",l[l.Point=1]="Point",l[l.Line=2]="Line"}(T||(T={})),function(l){l[l.STRETCH=1]="STRETCH",l[l.PAD=2]="PAD"}(p||(p={})),function(l){l[l.CHANGED=0]="CHANGED",l[l.UNCHANGED=1]="UNCHANGED"}(b||(b={})),function(l){l[l.Blend=0]="Blend",l[l.Opaque=1]="Opaque",l[l.Mask=2]="Mask",l[l.MaskBlend=3]="MaskBlend",l[l.COUNT=4]="COUNT"}(x||(x={})),function(l){l[l.OFF=0]="OFF",l[l.ON=1]="ON"}(v||(v={}))},94672:(q,z,a)=>{a.d(z,{K:()=>L}),a(29132);var A=a(62208),E=a(16730),P=a(2004);function L(m,U,T,p=new P.Z){let b;if("2d"===T.type)b=U*T.resolution;else if("3d"===T.type){const h=T.overlayPixelSizeInMapUnits(m),d=T.basemapSpatialReference;b=(0,A.pC)(d)&&!d.equals(T.spatialReference)?(0,E.c9)(d)/(0,E.c9)(T.spatialReference):U*h}const x=m.x-b,v=m.y-b,l=m.x+b,O=m.y+b,{spatialReference:D}=T;return p.xmin=Math.min(x,l),p.ymin=Math.min(v,O),p.xmax=Math.max(x,l),p.ymax=Math.max(v,O),p.spatialReference=D,p}new P.Z},33e3:(q,z,a)=>{a.d(z,{G:()=>P});var _=a(62208);class A{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(g,C){var m;return null==(m=this._outer.get(g))?void 0:m.get(C)}set(g,C,m){const U=this._outer.get(g);U?U.set(C,m):this._outer.set(g,new Map([[C,m]]))}delete(g,C){const m=this._outer.get(g);m&&(m.delete(C),0===m.size&&this._outer.delete(g))}forEach(g){this._outer.forEach((C,m)=>g(C,m))}}var E=a(99661);class P{constructor(g){this._rctx=g,this._store=new A}dispose(){this._store.forEach(g=>g.forEach(C=>C.dispose())),this._store.clear()}acquire(g,C,m,U){const T=this._store.get(g,C);if((0,_.pC)(T))return T.ref(),T;const p=new E.$(this._rctx,g,C,m,U);return p.ref(),this._store.set(g,C,p),p}get test(){let g=0;return this._store.forEach(C=>C.forEach(m=>g+=m.hasGLName?2:1)),{cachedWebGLObjects:g}}}},2757:(q,z,a)=>{function _(g,C,m){for(let U=0;U<m;++U)C[2*U]=g[U],C[2*U+1]=g[U]-C[2*U]}function E(g,C){const m=g.length;for(let U=0;U<m;++U)L[0]=g[U],C[U]=L[0];return C}function P(g,C){const m=g.length;for(let U=0;U<m;++U)L[0]=g[U],L[1]=g[U]-L[0],C[U]=L[1];return C}a.d(z,{GB:()=>P,LF:()=>_,U8:()=>E});const L=new Float32Array(2)},80322:(q,z,a)=>{function _(E){const{options:P,value:L}=E;return"number"==typeof P[L]}function A(E){let P="";for(const L in E){const g=E[L];if("boolean"==typeof g)g&&(P+=`#define ${L}\n`);else if("number"==typeof g)P+=`#define ${L} ${g.toFixed()}\n`;else if("object"==typeof g)if(_(g)){const{value:C,options:m,namespace:U}=g,T=U?`${U}_`:"";for(const p in m)P+=`#define ${T}${p} ${m[p].toFixed()}\n`;P+=`#define ${L} ${T}${C}\n`}else{const C=g.options;let m=0;for(const U in C)P+=`#define ${C[U]} ${(m++).toFixed()}\n`;P+=`#define ${L} ${C[g.value]}\n`}}return P}a.d(z,{K:()=>A})},2078:(q,z,a)=>{a.d(z,{BK:()=>U,LZ:()=>m,if:()=>E,jp:()=>ae,sm:()=>h,wK:()=>P,zp:()=>C});var _=a(42743),A=a(67969);function E(S,N,J=A.db.ADD,Z=[0,0,0,0]){return{srcRgb:S,srcAlpha:S,dstRgb:N,dstAlpha:N,opRgb:J,opAlpha:J,color:{r:Z[0],g:Z[1],b:Z[2],a:Z[3]}}}function P(S,N,J,Z,k=A.db.ADD,ee=A.db.ADD,te=[0,0,0,0]){return{srcRgb:S,srcAlpha:N,dstRgb:J,dstAlpha:Z,opRgb:k,opAlpha:ee,color:{r:te[0],g:te[1],b:te[2],a:te[3]}}}const L={face:A.LR.BACK,mode:A.Wf.CCW},g={face:A.LR.FRONT,mode:A.Wf.CCW},C=S=>S===_.Vr.Back?L:S===_.Vr.Front?g:null,m={zNear:0,zFar:1},U={r:!0,g:!0,b:!0,a:!0};function T(S){return I.intern(S)}function p(S){return B.intern(S)}function b(S){return H.intern(S)}function x(S){return j.intern(S)}function v(S){return M.intern(S)}function l(S){return F.intern(S)}function O(S){return G.intern(S)}function D(S){return Y.intern(S)}function h(S){return re.intern(S)}class d{constructor(N,J){this.makeKey=N,this.makeRef=J,this.interns=new Map}intern(N){if(!N)return null;const J=this.makeKey(N),Z=this.interns;return Z.has(J)||Z.set(J,this.makeRef(N)),Z.get(J)}}function y(S){return"["+S.join(",")+"]"}const I=new d(K,S=>oe({__tag:"Blending"},S));function K(S){return S?y([S.srcRgb,S.srcAlpha,S.dstRgb,S.dstAlpha,S.opRgb,S.opAlpha,S.color.r,S.color.g,S.color.b,S.color.a]):null}const B=new d(w,S=>oe({__tag:"Culling"},S));function w(S){return S?y([S.face,S.mode]):null}const H=new d($,S=>oe({__tag:"PolygonOffset"},S));function $(S){return S?y([S.factor,S.units]):null}const j=new d(W,S=>oe({__tag:"DepthTest"},S));function W(S){return S?y([S.func]):null}const M=new d(R,S=>oe({__tag:"StencilTest"},S));function R(S){return S?y([S.function.func,S.function.ref,S.function.mask,S.operation.fail,S.operation.zFail,S.operation.zPass]):null}const F=new d(V,S=>oe({__tag:"DepthWrite"},S));function V(S){return S?y([S.zNear,S.zFar]):null}const G=new d(X,S=>oe({__tag:"ColorWrite"},S));function X(S){return S?y([S.r,S.g,S.b,S.a]):null}const Y=new d(Q,S=>oe({__tag:"StencilWrite"},S));function Q(S){return S?y([S.mask]):null}const re=new d(function se(S){return S?y([K(S.blending),w(S.culling),$(S.polygonOffset),W(S.depthTest),R(S.stencilTest),V(S.depthWrite),X(S.colorWrite),Q(S.stencilWrite)]):null},S=>({blending:T(S.blending),culling:p(S.culling),polygonOffset:b(S.polygonOffset),depthTest:x(S.depthTest),stencilTest:v(S.stencilTest),depthWrite:l(S.depthWrite),colorWrite:O(S.colorWrite),stencilWrite:D(S.stencilWrite)}));class ae{constructor(N){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=N}setPipeline(N){(this._pipelineInvalid||N!==this._pipeline)&&(this._setBlending(N.blending),this._setCulling(N.culling),this._setPolygonOffset(N.polygonOffset),this._setDepthTest(N.depthTest),this._setStencilTest(N.stencilTest),this._setDepthWrite(N.depthWrite),this._setColorWrite(N.colorWrite),this._setStencilWrite(N.stencilWrite),this._pipeline=N),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}_setBlending(N){this._blending=this._setSubState(N,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(N){this._culling=this._setSubState(N,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(N){this._polygonOffset=this._setSubState(N,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(N){this._depthTest=this._setSubState(N,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(N){this._stencilTest=this._setSubState(N,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(N){this._depthWrite=this._setSubState(N,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(N){this._colorWrite=this._setSubState(N,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(N){this._stencilWrite=this._setSubState(N,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setSubState(N,J,Z,k){return(Z||N!==J)&&(k(N),this._pipelineInvalid=!0),N}}}}]);
"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[2445],{22445:(C,m,r)=>{r.r(m),r.d(m,{createLabelFunction:()=>W,formatField:()=>y});var D=r(15861),f=r(26584),M=r(63290),g=r(88411),O=r(15348),P=r(36630),h=r(86793),L=r(46679);const E=M.Z.getLogger("esri.layers.support.labelFormatUtils"),v={type:"simple",evaluate:()=>null},T={getAttribute:(t,a)=>t.field(a)};function W(t,a,e){return p.apply(this,arguments)}function p(){return(p=(0,D.Z)(function*(t,a,e){if(!t||!t.symbol)return v;const l=t.where,o=(0,h.hV)(t),d=l?yield r.e(410).then(r.bind(r,10410)):null;let i;if("arcade"===o.type){const s=yield(0,L.WW)(o.expression,e,a);i={type:"arcade",evaluate(u){try{const n=s.evaluate({$feature:"attributes"in u?s.repurposeFeature(u):u});if(null!=n)return n.toString()}catch(n){E.error(new f.Z("arcade-expression-error","Encountered an error when evaluating label expression for feature",{feature:u,expression:o}))}return null},needsHydrationToEvaluate:()=>null==(0,h.el)(o.expression)}}else i={type:"simple",evaluate:s=>o.expression.replace(/{[^}]*}/g,u=>{const n=u.slice(1,-1),c=a.get(n);if(!c)return u;let _=null;return"attributes"in s?s&&s.attributes&&(_=s.attributes[c.name]):_=s.field(c.name),null==_?"":y(_,c)})};if(l){let s;try{s=d.WhereClause.create(l,a)}catch(n){return E.error(new f.Z("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:l,error:n})),v}const u=i.evaluate;i.evaluate=n=>{const c="attributes"in n?void 0:T;try{if(s.testFeature(n,c))return u(n)}catch(_){E.error(new f.Z("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:l,feature:n,error:_}))}return null}}return i})).apply(this,arguments)}function y(t,a){if(null==t)return"";const e=a.domain;if(e)if("codedValue"===e.type||"coded-value"===e.type){const o=t;for(const d of e.codedValues)if(d.code===o)return d.name}else if("range"===e.type){const o=+t,i="range"in e?e.range[1]:e.maxValue;if(("range"in e?e.range[0]:e.minValue)<=o&&o<=i)return e.name}let l=t;return"date"===a.type||"esriFieldTypeDate"===a.type?l=(0,g.p6)(l,(0,g.Ze)("short-date")):(0,P.H7)(a)&&(l=(0,O.uf)(+l)),l||""}}}]);
"use strict";var zt=Object.defineProperty,Ut=Object.defineProperties,Kt=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable,_t=(N,T,C)=>T in N?zt(N,T,{enumerable:!0,configurable:!0,writable:!0,value:C}):N[T]=C,ot=(N,T)=>{for(var C in T||(T={}))Ft.call(T,C)&&_t(N,C,T[C]);if(yt)for(var C of yt(T))Yt.call(T,C)&&_t(N,C,T[C]);return N},it=(N,T)=>Ut(N,Kt(T));(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([["default-node_modules_arcgis_core_layers_support_rasterFunctions_rasterProjectionHelper_js"],{28594:(N,T,C)=>{C.d(T,{Hq:()=>ut,Mk:()=>F,P_:()=>Nt,Qp:()=>Ot,VO:()=>X,_D:()=>Ct,kZ:()=>kt,kr:()=>Dt,nF:()=>Q,tB:()=>q,ut:()=>W,vF:()=>Lt,zD:()=>wt});var K,t,dt=C(15861),Mt=(C(29132),C(26584)),E=C(62208),L=C(16730),w=C(44956),b=C(54614),A=C(2004),v=C(49672),Rt=C(37118),Pt=C(65234);function F(t,n,o){return!(0,b.Up)(t,n,o)}function j(t,n,o){const s=F(t,n,o);if(s&&!(0,b.kR)())throw new Mt.Z("rasterprojectionhelper-project","projection engine is not loaded");return s}(t=K||(K={}))[t.None=0]="None",t[t.North=1]="North",t[t.South=2]="South",t[t.Both=3]="Both";const st=(t,n,o,s=0)=>{if(1===o[0])return[0,0];let r=1,e=-1,i=1,u=-1;for(let c=0;c<t.length;c+=2)isNaN(t[c])||(r=r>t[c]?t[c]:r,e=e>t[c]?e:t[c],i=i>t[c+1]?t[c+1]:i,u=u>t[c+1]?u:t[c+1]);const{cols:l,rows:a}=n,m=(e-r)/l/o[0],d=(u-i)/a/o[1],g=2*s;let h=0,f=!1,x=[0,0];for(let c=0;c<l-3;c++){for(let R=0;R<a-3;R++){const y=c*a*2+2*R,_=(t[y+1]+t[y+5]+t[y+4*a+1]+t[y+4*a+5])/4,M=Math.abs(((t[y]+t[y+4]+t[y+4*a]+t[y+4*a+4])/4-t[y+2*a+2])/m),P=Math.abs((_-t[y+2*a+3])/d);if(M+P>h&&(h=M+P,x=[M,P]),g&&h>g){f=!0;break}}if(f)break}return x},Et={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},V=new Map,J=new Map;function wt(){return H.apply(this,arguments)}function H(){return(H=(0,dt.Z)(function*(){if((0,b.kR)())return null;yield(0,b.zD)()})).apply(this,arguments)}function Ct(t,n,o){return j(t.spatialReference,n)?o?(0,b.rS)(n,t.spatialReference,t):(0,b.rS)(t.spatialReference,n,t):null}function X(t,n,o,s=null){const r=t.spatialReference;if(r.equals(n))return t;j(r,n,s);const e=o.center,i=new A.Z({xmin:e.x-t.x/2,xmax:e.x+t.x/2,ymin:e.y-t.y/2,ymax:e.y+t.y/2,spatialReference:r}),u=(0,b.iV)(i,n,s),l=W(n);let a;if((0,E.Wi)(u)||(0,E.pC)(l)&&u.width>=l){const m=(0,L.c9)(r)/(0,L.c9)(n);a={x:t.x*m,y:t.y*m}}else a={x:u.width,y:u.height};return a}function G(t,n=.01){return(0,L.c9)(t)?n/(0,L.c9)(t):0}function Q(t,n,o=null,s=!0){const r=t.spatialReference;if(r.equals(n))return t;j(r,n,o);const e=(0,b.iV)(t,n,o);if(!s||!e)return e;const i=z(r,!0),u=z(n,!0),l=G(r);return l&&(0,E.pC)(i)&&(0,E.pC)(u)&&(e.x>0&&Math.abs(t.x-i[0])<l?e.x-=u[1]-u[0]:e.x<0&&Math.abs(t.x-i[1])<l&&(e.x+=u[1]-u[0])),e}function rt(t){const{inSR:n,outSR:o,datumTransformation:s}=t,r=D(n),{points:e,mask:i}=$(t,r);if(!n.isGeographic){const l=n.wkid?w.e.coordsys(n.wkid):w.e.fromString(n.isGeographic?w.f.PE_TYPE_GEOGCS:w.f.PE_TYPE_PROJCS,n.wkt);w.g.projToGeog(l,e.length,e)}if((0,E.pC)(s)&&s.steps.length&&s.steps.forEach(l=>{const a=l.wkid?w.e.geogtran(l.wkid):w.e.fromString(w.f.PE_TYPE_GEOGTRAN,l.wkt);w.h.geogToGeog(a,e.length,e,null,l.isInverse?w.f.PE_TRANSFORM_2_TO_1:w.f.PE_TRANSFORM_1_TO_2)}),!o.isGeographic){const l=D(o,!0),a=(0,E.pC)(l)&&l.isEnvelope?[l.bbox[1],l.bbox[3]]:[-90,90];!function vt(t,n){const[o,s]=n;for(let r=0;r<t.length;r++){const e=t[r][1];(e<o||e>s)&&(t[r]=[NaN,NaN])}}(e,a);const m=o.wkid?w.e.coordsys(o.wkid):w.e.fromString(o.isGeographic?w.f.PE_TYPE_GEOGCS:w.f.PE_TYPE_PROJCS,o.wkt);w.g.geogToProj(m,e.length,e)}let u=e;if(i&&e.length!==i.length){u=[];for(let l=0,a=0;l<i.length;l++)u.push(i[l]?e[a++]:[NaN,NaN])}return u}function D(t,n=!1){let o=t.wkid||t.wkt;if(!o||t.isGeographic)return null;if(o=String(o),V.has(o)){const i=V.get(o);return n?null==i?void 0:i.gcs:null==i?void 0:i.pcs}const s=t.wkid?w.e.coordsys(t.wkid):w.e.fromString(t.isGeographic?w.f.PE_TYPE_GEOGCS:w.f.PE_TYPE_PROJCS,t.wkt),r=at(s,G(t,1e-4)),e=at(s,0,!0);return V.set(o,{pcs:r,gcs:e}),n?e:r}function at(t,n=0,o=!1){const s=w.j.generate(t),r=o?t.horizonGcsGenerate():t.horizonPcsGenerate();if(null==r||!r.length)return null;let e=!1,i=r.find(c=>1===c.getInclusive()&&1===c.getKind());if(!i){if(i=r.find(c=>1===c.getInclusive()&&0===c.getKind()),!i)return null;e=!0}const u=o?0:(2===s.getNorthPoleLocation()?1:0)|(2===s.getSouthPoleLocation()?2:0),l=s.isPannableRectangle(),a=i.getCoord();if(e)return{isEnvelope:e,isPannable:l,vertices:a,coef:null,bbox:[a[0][0]-n,a[0][1]-n,a[1][0]+n,a[1][1]+n],poleLocation:u};let m=0;const d=[];let[g,h]=a[0],[f,x]=a[0];for(let c=0,R=a.length;c<R;c++){m++,m===R&&(m=0);const[y,p]=a[c],[_,M]=a[m];if(M===p)d.push([y,_,p,M,2]);else{const P=(_-y)/(M-p||1e-4),O=y-P*p;d.push(p<M?[P,O,p,M,0]:[P,O,M,p,1])}g=g<y?g:y,h=h<p?h:p,f=f>y?f:y,x=x>p?x:p}return{isEnvelope:!1,isPannable:l,vertices:a,coef:d,bbox:[g,h,f,x],poleLocation:u}}function $(t,n){const o=[],{cols:s,rows:r,xres:e,yres:i,usePixelCenter:u}=t;let{xmin:l,ymax:a}=t;if(u&&(l+=e/2,a-=i/2),(0,E.Wi)(n)){for(let h=0;h<s;h++)for(let f=0;f<r;f++)o.push([l+e*h,a-i*f]);return{points:o}}const m=new Uint8Array(s*r);if(n.isEnvelope){const{bbox:[h,f,x,c]}=n;for(let R=0,y=0;R<s;R++){const p=l+e*R,_=n.isPannable||p>=h&&p<=x;for(let M=0;M<r;M++,y++){const P=a-i*M;_&&P>=f&&P<=c&&(o.push([p,P]),m[y]=1)}}return{points:o,mask:m}}const{coef:d}=n,g=[];for(let h=0;h<r;h++){const f=a-i*h,x=[],c=[];for(let y=0;y<d.length;y++){const[p,_,M,P,O]=d[y];f===M&&M===P?(x.push(p),x.push(_),c.push(2),c.push(2)):f>=M&&f<=P&&(x.push(p*f+_),c.push(O))}let R=x;if(x.length>2){let y=2===c[0]?0:c[0],p=x[0];R=[];for(let _=1;_<c.length;_++)2===c[_]&&_!==c.length-1||(c[_]!==y&&(R.push(0===y?Math.min(p,x[_-1]):Math.max(p,x[_-1])),y=c[_],p=x[_]),_===c.length-1&&R.push(0===c[_]?Math.min(p,x[_]):Math.max(p,x[_])));R.sort((_,M)=>_-M)}else x[0]>x[1]&&(R=[x[1],x[0]]);g.push(R)}for(let h=0,f=0;h<s;h++){const x=l+e*h;for(let c=0;c<r;c++,f++){const R=a-i*c,y=g[c];if(2===y.length)x>=y[0]&&x<=y[1]&&(o.push([x,R]),m[f]=1);else if(y.length>2){let p=!1;for(let _=0;_<y.length;_+=2)if(x>=y[_]&&x<=y[_+1]){p=!0;break}p&&(o.push([x,R]),m[f]=1)}}}return{points:o,mask:m}}function lt(t){const n=W(t[0].spatialReference);if(t.length<2||(0,E.Wi)(n))return t[0];let{xmin:o,xmax:s,ymin:r,ymax:e}=t[0];for(let i=1;i<t.length;i++){const u=t[i];s=u.xmax+n*i,r=Math.min(r,u.ymin),e=Math.max(e,u.ymax)}return new A.Z({xmin:o,xmax:s,ymin:r,ymax:e,spatialReference:t[0].spatialReference})}function q(t,n,o=null,s=!0){const r=t.spatialReference;if(r.equals(n))return t;const e=ut(t),i=W(r,!0),u=W(n);if(0===e||(0,E.Wi)(i)||(0,E.Wi)(u)){const a=ct(t,n,o,s);if((0,E.Wi)(i)&&(0,E.pC)(u)&&Math.abs(a.width-u)<G(n)&&(0,b.kR)()){const m=D(r);if((0,E.pC)(m)&&m.poleLocation===K.None&&t.width<(m.bbox[2]-m.bbox[0])/2)return function Gt(t,n){const o=W(n);if((0,E.Wi)(o))return null;let{xmin:s,ymin:r,xmax:e,ymax:i}=t;const u=t.spatialReference,l=new Rt.Z({spatialReference:u,rings:[[[s,r],[e,r],[e,i],[s,i],[s,r]]]}),a=(0,b.iV)(l,n);if(2!==a.rings.length||!a.rings[0].length||!a.rings[1].length)return null;const{rings:m}=a,d=G(u),g=new A.Z({spatialReference:n});for(let h=0;h<2;h++){s=e=m[h][0][0],r=i=m[h][0][1];for(let f=0;f<m[h].length;f++)s=s>m[h][f][0]?m[h][f][0]:s,e=e<m[h][f][0]?m[h][f][0]:e,r=r>m[h][f][1]?m[h][f][1]:r,i=i<m[h][f][1]?m[h][f][1]:i;if(0===h)g.ymin=r,g.ymax=i,g.xmin=s,g.xmax=e;else if(g.ymin=Math.min(g.ymin,r),g.ymax=Math.max(g.ymax,i),Math.abs(e-o/2)<d)g.xmin=s,g.xmax=g.xmax+o;else{if(!(Math.abs(s+o/2)<d))return null;g.xmax=e+o}}return g}(t,n)||a}return a}const l=t.clone().normalize();if(1===l.length&&t.xmax<i&&t.xmax-i/2>G(r)){const{xmin:a,xmax:m}=t;for(let d=0;d<=e;d++)l[d]=new A.Z({xmin:0===d?a:-i/2,xmax:d===e?m-i*d:i/2,ymin:t.ymin,ymax:t.ymax,spatialReference:r})}return lt(l.map(a=>ct(a,n,o,s)).filter(a=>!!a))}function ct(t,n,o=null,s=!0,r=!0){const e=t.spatialReference;if(e.equals(n))return t;j(e,n,o);const i=(0,b.iV)(t,n,o);if(r&&n.isWebMercator&&i&&(i.ymax=Math.min(20037508.342787,i.ymax),i.ymin=Math.max(-20037508.342787,i.ymin),i.ymin>=i.ymax))return null;if(!s||!i)return i;const u=z(e,!0),l=z(n,!0);if((0,E.Wi)(u)||(0,E.Wi)(l))return i;const a=G(e,.001),m=G(e,500),d=G(n,.001);if(Math.abs(i.xmin-l[0])<d&&Math.abs(i.xmax-l[1])<d){const g=Math.abs(t.xmin-u[0]),h=Math.abs(u[1]-t.xmax);if(g<a&&h>m){i.xmin=l[0];const f=[];f.push(new v.Z(t.xmax,t.ymin,e)),f.push(new v.Z(t.xmax,(t.ymin+t.ymax)/2,e)),f.push(new v.Z(t.xmax,t.ymax,e));const x=f.map(c=>Q(c,n,o)).filter(c=>!isNaN(null==c?void 0:c.x)).map(c=>c.x);i.xmax=Math.max.apply(null,x)}if(h<a&&g>m){i.xmax=l[1];const f=[];f.push(new v.Z(t.xmin,t.ymin,e)),f.push(new v.Z(t.xmin,(t.ymin+t.ymax)/2,e)),f.push(new v.Z(t.xmin,t.ymax,e));const x=f.map(c=>Q(c,n,o)).filter(c=>!isNaN(null==c?void 0:c.x)).map(c=>c.x);i.xmin=Math.min.apply(null,x)}}else{const g=G(n,.001);Math.abs(i.xmin-l[0])<g&&(i.xmin=l[0]),Math.abs(i.xmax-l[1])<g&&(i.xmax=l[1])}return i}function W(t,n=!1){return t.isWebMercator?2*(n?20037508.342787:20037508.342788905):t.wkid&&t.isGeographic?360:2*Et[t.wkid]||null}function z(t,n=!1){if(t.isGeographic)return[-180,180];const o=W(t,n);return(0,E.pC)(o)?[-o/2,o/2]:null}function ft(t,n,o,s){let r=(t-n)/o;return r-Math.floor(r)!=0?r=Math.floor(r):s&&(r-=1),r}function ut(t,n=!1){const o=W(t.spatialReference);if((0,E.Wi)(o))return 0;const s=n?0:-o/2,r=G(t.spatialReference),e=!n&&Math.abs(t.xmax-o/2)<r?o/2:t.xmax,i=!n&&Math.abs(t.xmin+o/2)<r?-o/2:t.xmin;return ft(e,s,o,!0)-ft(i,s,o,!1)}function Nt(t){const n=t.storageInfo.origin.x,o=W(t.spatialReference,!0);if((0,E.Wi)(o))return{originX:n,halfWorldWidth:null,pyramidsInfo:null};const s=o/2,{nativePixelSize:r,storageInfo:e,extent:i}=t,{maximumPyramidLevel:u,blockWidth:l,pyramidScalingFactor:a}=e;let m=r.x;const d=[],g=(0,E.pC)(t.transform)&&"gcs-shift"===t.transform.type,h=n+(g?0:s),f=g?o-n:s-n;for(let x=0;x<=u;x++){const c=(i.xmax-n)/m/l,R=c-Math.floor(c)==0?c:Math.ceil(c),y=f/m/l,p=y-Math.floor(y)==0?y:Math.ceil(y),_=Math.floor(h/m/l),M=Math.round(h/m)%l,P=(l-Math.round(f/m)%l)%l;d.push({resolutionX:m,blockWidth:l,datsetColumnCount:R,worldColumnCountFromOrigin:p,leftMargin:M,rightPadding:P,originColumnOffset:_}),m*=a}return{originX:n,halfWorldWidth:s,pyramidsInfo:d,hasGCSSShiftTransform:g}}function Ot(t){const n=t.isAdaptive&&null==t.spacing;let o=t.spacing||[32,32],s=tt(t),r={cols:s.size[0]+1,rows:s.size[1]+1};const e=s.outofBoundPointCount>0&&s.outofBoundPointCount<s.offsets.length/2;let i=s.outofBoundPointCount===s.offsets.length/2||n&&e?[0,0]:st(s.offsets,r,o,4);const l=t.projectedExtent.spatialReference,a=t.srcBufferExtent.spatialReference;if(n&&(e||(i[0]+i[1])/2>4)&&(F(l,a,t.datumTransformation)&&(l.isGeographic||(0,E.pC)(D(l))),o=[4,4],s=tt(it(ot({},t),{spacing:o})),r={cols:s.size[0]+1,rows:s.size[1]+1},i=st(s.offsets,r,o,4)),s.error=i,o[0]>1&&(s.coefficients=mt(s.offsets,r,e)),t.includeGCSGrid&&!l.isGeographic&&!l.isWebMercator)if(a.isGeographic)s.gcsGrid={offsets:s.offsets,coefficients:s.coefficients,spacing:o};else{const m=D(l);if((0,E.pC)(m)&&!m.isEnvelope){const d=function Wt(t){if(!t||t.isGeographic)return t;const n=String(t.wkid||t.wkt);let o;return J.has(n)?o=J.get(n):(o=(t.wkid?w.e.coordsys(t.wkid):w.e.fromString(w.f.PE_TYPE_PROJCS,t.wkt)).getGeogcs().getCode(),J.set(n,o)),new Pt.Z({wkid:o})}(l),g=q(t.projectedExtent,d),{offsets:h}=tt(it(ot({},t),{srcBufferExtent:g,spacing:o})),f=mt(h,r,e);s.gcsGrid={offsets:h,coefficients:f,spacing:o}}}return s}function tt(t){const{projectedExtent:n,srcBufferExtent:o,pixelSize:s,datumTransformation:r,rasterTransform:e}=t,i=n.spatialReference,u=o.spatialReference,l=j(i,u),{xmin:a,ymin:m,xmax:d,ymax:g}=n,h=W(u),f=(0,E.pC)(h)&&(t.hasWrapAround||"gcs-shift"===(null==e?void 0:e.type)),x=t.spacing||[32,32],c=x[0]*s.x,R=x[1]*s.y,y=1===x[0],p=Math.ceil((d-a)/c-.1/x[0])+(y?0:1),_=Math.ceil((g-m)/R-.1/x[1])+(y?0:1),M=function St(t){const{inSR:n,outSR:o,datumTransformation:s,preferPE:r}=t;if(n.equals(o)){const{points:e}=$(t,null);return e}if(n.isWebMercator&&o.isWGS84||n.isWGS84&&o.isWebMercator)return function bt(t){const{cols:n,rows:o,xres:s,yres:r,usePixelCenter:e,inSR:i,outSR:u}=t;let{xmin:l,ymax:a}=t;e&&(l+=s/2,a-=r/2);const m=[],d=[],g=Math.max(n,o);for(let f=0;f<g;f++){const x=l+s*Math.min(n,f),c=a-r*Math.min(o,f),R=(0,b.iV)(new v.Z({x,y:c,spatialReference:i}),u);f<=n&&m.push(R.x),f<=o&&d.push(R.y)}const h=[];for(let f=0;f<n;f++)for(let x=0;x<o;x++)h.push([m[f],d[x]]);return h}(t);if(j(n,o,s)&&r){if(n.isGeographic)return rt(t);const e=D(n);if((0,E.pC)(e))return rt(t)}return function Tt(t){const{points:n}=$(t,null),o=n.map(s=>new v.Z(s[0],s[1],t.inSR));return(0,b.iV)(o,t.outSR,t.datumTransformation).map(s=>s?[s.x,s.y]:[NaN,NaN])}(t)}({cols:p,rows:_,xmin:a,ymax:g,xres:c,yres:R,inSR:i,outSR:u,datumTransformation:r,preferPE:x[0]<=4,usePixelCenter:y}),P=[];let O,U=0;const xt=y?-1:NaN,{xmin:ht,xmax:nt,ymax:jt,width:It,height:At}=o,Bt=G(u,500),Zt=(0,E.pC)(h)&&ht>0&&nt>h/2;let pt=!1;if(l){const k=D(i);pt=(0,E.pC)(k)&&k.poleLocation>0}for(let k=0;k<p;k++){const et=[];for(let I=0;I<_;I++){let S=M[k*_+I];if(f&&S[0]>nt&&S[0]>h/2-Bt?S[0]-=h:f&&0===k&&S[0]<0&&Zt&&!e&&(S[0]+=h),!S||isNaN(S[0])||isNaN(S[1]))P.push(xt),P.push(xt),et.push(null),U++;else{if(e){const gt=e.inverseTransform(new v.Z({x:S[0],y:S[1],spatialReference:u}));S=[gt.x,gt.y]}et.push(S),k>0&&f&&O[I]&&S[0]<O[I][0]&&(S[0]+=h,pt&&S[0]>nt&&S[0]>h&&(S[0]-=h)),P.push((S[0]-ht)/It),P.push((jt-S[1])/At)}}O=et}return{offsets:P,error:null,coefficients:null,outofBoundPointCount:U,spacing:x,size:y?[p,_]:[p-1,_-1]}}function mt(t,n,o){const{cols:s,rows:r}=n,e=new Float32Array((s-1)*(r-1)*2*6),i=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),u=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let l=0;l<s-1;l++){for(let a=0;a<r-1;a++){let m=l*r*2+2*a;const d=t[m],g=t[m+1],h=t[m+2],f=t[m+3];m+=2*r;const x=t[m],c=t[m+1],R=t[m+2],y=t[m+3];let p=0,_=12*(a*(s-1)+l);for(let M=0;M<3;M++)e[_++]=i[p++]*d+i[p++]*h+i[p++]*R;p=0;for(let M=0;M<3;M++)e[_++]=i[p++]*g+i[p++]*f+i[p++]*y;p=0;for(let M=0;M<3;M++)e[_++]=u[p++]*d+u[p++]*x+u[p++]*R;p=0;for(let M=0;M<3;M++)e[_++]=u[p++]*g+u[p++]*c+u[p++]*y}if(o)for(let a=0;a<e.length;a++)isNaN(e[a])&&(e[a]=-1)}return e}function kt(t){const n=t.clone().normalize();return 1===n.length?n[0]:lt(n)}function Dt(t,n,o){const{storageInfo:s,pixelSize:r}=n;let e,i=!1;const{pyramidResolutions:u}=s;if((0,E.pC)(u)&&u.length){const g=(t.x+t.y)/2,h=u[u.length-1],f=(h.x+h.y)/2,x=(r.x+r.y)/2;if(g<=x)e=0;else if(g>=f)e=u.length,i=g/f>8;else{let R,y=x;for(let p=1;p<=u.length;p++){if(R=(u[p-1].x+u[p-1].y)/2,g<=R){g===R?e=p:"down"===o?(e=p-1,i=g/y>8):e="up"===o||g-y>R-g||g/y>2?p:p-1;break}y=R}}const c=0===e?r:u[e-1];return i&&Math.min(c.x,c.y)*(0,L.c9)(n.spatialReference)>19567&&(i=!1),{pyramidLevel:e,pyramidResolution:new v.Z({x:c.x,y:c.y,spatialReference:n.spatialReference}),excessiveReading:i}}const l=Math.log(t.x/r.x)/Math.LN2,a=Math.log(t.y/r.y)/Math.LN2,m=n.storageInfo.maximumPyramidLevel||0;e="down"===o?Math.floor(Math.min(l,a)):"up"===o?Math.ceil(Math.max(l,a)):Math.round((l+a)/2),e<0?e=0:e>m&&(i=e>m+3,e=m);const d=2**e;return{pyramidLevel:e,pyramidResolution:new v.Z({x:d*n.nativePixelSize.x,y:d*n.nativePixelSize.y,spatialReference:n.spatialReference}),excessiveReading:i}}function Lt(t,n,o=512,s=!0){const{extent:r,spatialReference:e,pixelSize:i}=t,u=X(new v.Z({x:i.x,y:i.y,spatialReference:e}),n,r);if(null==u)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const l=(u.x+u.y)/2,a=(0,L.c9)(n),m=l*a*96*39.37,d=n.isGeographic?256/o*295828763.7958547:256/o*591657527.591555;let g="vector-magdir"===t.dataType||"vector-uv"===t.dataType;const h=q(r,n);g||s&&(n.isGeographic||n.isWebMercator)&&(g=h.xmin*h.xmax<0);let f,x=m;const c=1.001;if(g){x=d;const M=n.isGeographic?1341104507446289e-21:.29858214164761665,P=M*(96*a*39.37);f=X(new v.Z({x:M,y:M,spatialReference:{wkid:n.isGeographic?4326:3857}}),e,h),f.x*=x/P,f.y*=x/P}else{f={x:i.x,y:i.y};const M=Math.ceil(Math.log(Math.min(t.width,t.height)/32)/Math.LN2);let P=0;for(;x<d*(c/2)&&P<M;)P++,x*=2,f.x*=2,f.y*=2;Math.max(x,d)/Math.min(x,d)<=c&&(x=d)}const R=[x],y=[{x:f.x,y:f.y}],_=Math.min(70.5310735,m)/c;for(;x>=_;)x/=2,f.x/=2,f.y/=2,R.push(x),y.push({x:f.x,y:f.y});return{projectedPixelSize:u,scales:R,srcResolutions:y,isCustomTilingScheme:!g}}}}]);
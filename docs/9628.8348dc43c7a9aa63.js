"use strict";var Ce=Object.defineProperty,We=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Ee=(j,h,a)=>h in j?Ce(j,h,{enumerable:!0,configurable:!0,writable:!0,value:a}):j[h]=a,b=(j,h)=>{for(var a in h||(h={}))Se.call(h,a)&&Ee(j,a,h[a]);if(he)for(var a of he(h))Re.call(h,a)&&Ee(j,a,h[a]);return j},U=(j,h)=>We(j,ve(h));(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[9628],{58775:(j,h,a)=>{a.d(h,{O3:()=>te,lG:()=>fe,my:()=>de,q9:()=>y});var O=a(26584),ne=a(66385),F=a(88071),I=a(36630);const X={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function y(e){return X[e]}function*$(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*N(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const n of t)yield*n}}function Y(e){for(const t of e)if(t.length>2)return!0;return!1}function Z(e){let t=0;for(let n=0;n<e.length;n++){const i=e[n],f=e[(n+1)%e.length];t+=i[0]*f[1]-f[0]*i[1]}return t<=0}function H(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function w(e,t,n){switch(t.type){case"LineString":return function J(e,t,n){return S(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function q(e,t,n){for(const i of t.coordinates)S(e,i,n);return e}(e,t,n);case"MultiPoint":return function le(e,t,n){return S(e,t.coordinates,n),e}(e,t,n);case"MultiPolygon":return function ue(e,t,n){for(const i of t.coordinates){z(e,i[0],n);for(let f=1;f<i.length;f++)re(e,i[f],n)}return e}(e,t,n);case"Point":return function ee(e,t,n){return G(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function ce(e,t,n){const i=t.coordinates;z(e,i[0],n);for(let f=1;f<i.length;f++)re(e,i[f],n);return e}(e,t,n)}}function z(e,t,n){const i=H(t);!function E(e){return!Z(e)}(i)?S(e,i,n):oe(e,i,n)}function re(e,t,n){const i=H(t);!function T(e){return Z(e)}(i)?S(e,i,n):oe(e,i,n)}function S(e,t,n){for(const i of t)G(e,i,n);e.lengths.push(t.length)}function oe(e,t,n){for(let i=t.length-1;i>=0;i--)G(e,t[i],n);e.lengths.push(t.length)}function G(e,t,n){const[i,f,C]=t;e.coords.push(i,f),n.hasZ&&e.coords.push(C||0)}function pe(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function te(e){if(!e)throw new O.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new O.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,i=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!i.test(n))throw new O.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function de(e,t={}){const n=[],i=new Set,f=new Set;let C,W=!1,P=null,R=!1,{geometryType:g=null}=t,r=!1;for(const s of $(e)){const{geometry:l,properties:p,id:d}=s;if((!l||(g||(g=y(l.type)),y(l.type)===g))&&(W||(W=Y(N(l))),R||(R=null!=d,R&&(C=typeof d,P=Object.keys(p).filter(_=>p[_]===d))),R&&null!=d&&(P.length>1?P=P.filter(_=>p[_]===d):1===P.length&&(P=p[P[0]]===d?P:[])),!r&&p)){let _=!0;for(const c in p){if(i.has(c))continue;const D=p[c];if(null==D){_=!1,f.add(c);continue}const k=pe(D);"unknown"!==k?(f.delete(c),i.add(c),n.push({name:c,alias:c,type:k})):f.add(c)}r=_}}const o=P&&1===P.length&&P[0]||null;if(o)for(const s of n)if(s.name===o&&(0,I.H7)(s)){s.type="esriFieldTypeOID";break}return{fields:n,geometryType:g,hasZ:W,objectIdFieldName:o,objectIdFieldType:C,unknownFields:Array.from(f)}}function fe(e,t){return Array.from(function*x(e,t={}){var f;const{geometryType:n,objectIdField:i}=t;for(const C of e){const{geometry:W,properties:P,id:R}=C;if(W&&y(W.type)!==n)continue;const g=P||{};let r=null!=(f=g[i])?f:null;i&&null!=R&&!g[i]&&(g[i]=r=R),yield new ne.u_(W?w(new F.Z,W,t):null,g,null,r)}}($(e),t))}},56554:(j,h,a)=>{a.d(h,{Dm:()=>N,Hq:()=>x,MS:()=>Y,bU:()=>X});var O=a(8314),ne=a(58817),F=a(87757),I=a(24837);function X(E){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===E||"esriGeometryMultipoint"===E?I.I4:"esriGeometryPolyline"===E?I.ET:I.lF}}}const y=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let $=1;function N(E,T){if((0,O.Z)("esri-csp-restrictions"))return()=>b({[T]:null},E);try{let Z=`this.${T} = null;`;for(const w in E)Z+=`this${y.test(w)?`.${w}`:`["${w}"]`} = ${JSON.stringify(E[w])};`;const H=new Function(`\n      return class AttributesClass$${$++} {\n        constructor() {\n          ${Z};\n        }\n      }\n    `)();return()=>new H}catch(Z){return()=>b({[T]:null},E)}}function x(E={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,ne.d9)(E)}}]}function Y(E,T){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:E},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:T,supportsDelete:T,supportsEditing:T,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:T,supportsExceedsLimitStatistics:!0},query:F.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:T,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},89628:(j,h,a)=>{a.d(h,{$9:()=>le,G4:()=>re,Lu:()=>q,WW:()=>t,d:()=>de,eS:()=>pe,gp:()=>oe,j:()=>ce,w9:()=>ue,yN:()=>fe});var O=a(15861),F=(a(29132),a(84792)),I=a(26584),X=a(63290),y=a(62208),$=a(37053),N=a(46367),x=a(82054),Y=a(95786),E=a(58775),T=a(56554),Z=a(60466),H=a(85),w=a(65234);const J=X.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),q="http://www.opengis.net/def/crs/",le=`${q}OGC/1.3/CRS84`;function ue(r,o){return ee.apply(this,arguments)}function ee(){return(ee=(0,O.Z)(function*(r,o,s={},l=5){const{links:p}=r,d=g(p,"items","application/geo+json")||g(p,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,y.Wi)(d))throw new I.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:_}=yield(0,F.default)(d.href,{signal:s.signal,query:U(b({limit:l},s.customParameters),{token:s.apiKey}),headers:{accept:"application/geo+json"}});yield(0,E.O3)(_);const c=(0,E.my)(_,{geometryType:o.geometryType}),D=o.fields||c.fields||[],k=null!=o.hasZ?o.hasZ:c.hasZ,Q=c.geometryType,A=o.objectIdField||c.objectIdFieldName||"OBJECTID";let m=o.timeInfo;const L=D.find(u=>u.name===A);if(L)L.type="esriFieldTypeOID",L.editable=!1,L.nullable=!1;else{if(!c.objectIdFieldType)throw new I.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");D.unshift({name:A,alias:A,type:"esriFieldTypeOID",editable:!1,nullable:!1})}if(A!==c.objectIdFieldName){const u=D.find(M=>M.name===c.objectIdFieldName);u&&(u.type="esriFieldTypeInteger")}D===c.fields&&c.unknownFields.length>0&&J.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:c.unknownFields}});for(const u of D){if(null==u.name&&(u.name=u.alias),null==u.alias&&(u.alias=u.name),"esriFieldTypeOID"!==u.type&&"esriFieldTypeGlobalID"!==u.type&&(u.editable=null==u.editable||!!u.editable,u.nullable=null==u.nullable||!!u.nullable),!u.name)throw new I.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:u});if(!H.v.jsonValues.includes(u.type))throw new I.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${u.name}"`,{field:u})}if(m){const u=new Z.Z(D);if(m.startTimeField){const M=u.get(m.startTimeField);M?(m.startTimeField=M.name,M.type="esriFieldTypeDate"):m.startTimeField=null}if(m.endTimeField){const M=u.get(m.endTimeField);M?(m.endTimeField=M.name,M.type="esriFieldTypeDate"):m.endTimeField=null}if(m.trackIdField){const M=u.get(m.trackIdField);M?m.trackIdField=M.name:(m.trackIdField=null,J.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:m}}))}m.startTimeField||m.endTimeField||(J.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:m}}),m=null)}return{drawingInfo:Q?(0,T.bU)(Q):null,geometryType:Q,fields:D,hasZ:!!k,objectIdField:A,timeInfo:m}})).apply(this,arguments)}function ce(r){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(r,o={}){const{links:s}=r,l=g(s,"data","application/json")||g(s,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,y.Wi)(l))throw new I.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:p,customParameters:d,signal:_}=o,{data:c}=yield(0,F.default)(l.href,{signal:_,headers:{accept:"application/json"},query:U(b({},d),{token:p})});return c})).apply(this,arguments)}function re(r){return S.apply(this,arguments)}function S(){return(S=(0,O.Z)(function*(r,o={}){const{links:s}=r,l=g(s,"conformance","application/json")||g(s,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,y.Wi)(l))throw new I.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:p,customParameters:d,signal:_}=o,{data:c}=yield(0,F.default)(l.href,{signal:_,headers:{accept:"application/json"},query:U(b({},d),{token:p})});return c})).apply(this,arguments)}function oe(r){return G.apply(this,arguments)}function G(){return(G=(0,O.Z)(function*(r,o={}){const{apiKey:s,customParameters:l,signal:p}=o,{data:d}=yield(0,F.default)(r,{signal:p,headers:{accept:"application/json"},query:U(b({},l),{token:s})});return d})).apply(this,arguments)}function pe(r){return te.apply(this,arguments)}function te(){return(te=(0,O.Z)(function*(r,o={}){const s="application/vnd.oai.openapi+json;version=3.0",l=g(r.links,"service-desc",s);if((0,y.Wi)(l))return J.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:p,customParameters:d,signal:_}=o,{data:c}=yield(0,F.default)(l.href,{signal:_,headers:{accept:s},query:U(b({},d),{token:p})});return c})).apply(this,arguments)}function de(r){var p;const o=null==(p=new RegExp("^http:\\/\\/www\\.opengis.net\\/def\\/crs\\/(?<authority>.*)\\/(?<version>.*)\\/(?<code>.*)$","i").exec(r))?void 0:p.groups;if(!o)return null;const{authority:s,code:l}=o;switch(s.toLowerCase()){case"ogc":switch(l.toLowerCase()){case"crs27":return w.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return w.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const d=Number.parseInt(l,10);return Number.isNaN(d)?null:d}default:return null}}function fe(r,o,s){return e.apply(this,arguments)}function e(){return(e=(0,O.Z)(function*(r,o,s){const l=yield t(r,o,s);return(0,x.cn)(l)})).apply(this,arguments)}function t(r,o,s){return n.apply(this,arguments)}function n(){return(n=(0,O.Z)(function*(r,o,s){const{capabilities:{query:{maxRecordCount:l}},collection:p,layerDefinition:d,queryParameters:{apiKey:_,customParameters:c},spatialReference:D,supportedCrs:k}=r,{links:Q}=p,A=g(Q,"items","application/geo+json")||g(Q,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,y.Wi)(A))throw new I.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:m,num:L,start:u,timeExtent:M,where:Pe}=o;if(o.objectIds)throw new I.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const Ie=w.Z.fromJSON(D),V=(0,y.Pt)(o.outSpatialReference,Ie),se=V.isWGS84?null:f(V,k),Me=R(m,k),Oe=W(M),Te=P(Pe),je=null!=L?L:null!=u&&void 0!==u?10:l,{data:B}=yield(0,F.default)(A.href,U(b({},s),{query:U(b(b({},c),Me),{crs:se,datetime:Oe,query:Te,limit:je,startindex:u,token:_}),headers:{accept:"application/geo+json"}}));let ie=!1;B.links&&(ie=!!B.links.find(ae=>"next"===ae.rel)),!ie&&Number.isInteger(B.numberMatched)&&Number.isInteger(B.numberReturned)&&(ie=B.numberReturned<B.numberMatched);const{fields:we,globalIdField:De,hasM:be,hasZ:ye,objectIdField:me}=d,_e=d.geometryType,ge=(0,E.lG)(B,{geometryType:_e,hasZ:ye,objectIdField:me});if(!se&&V.isWebMercator)for(const K of ge)if((0,y.pC)(K.geometry)){const ae=(0,x.di)(K.geometry,_e,ye,!1);ae.spatialReference=w.Z.WGS84,K.geometry=(0,x.GH)((0,N.iV)(ae,V))}for(const K of ge)K.objectId=K.attributes[me];const Fe=se||!se&&V.isWebMercator?V.toJSON():$.Zn,v=new Y.Z;return v.exceededTransferLimit=ie,v.features=ge,v.fields=we,v.geometryType=_e,v.globalIdFieldName=De,v.hasM=be,v.hasZ=ye,v.objectIdFieldName=me,v.spatialReference=Fe,v})).apply(this,arguments)}function f(r,o){var d,_,c;const{isWebMercator:s,wkid:l}=r;if(!l)return null;const p=s?null!=(c=null!=(_=null!=(d=o[3857])?d:o[102100])?_:o[102113])?c:o[900913]:o[r.wkid];return p?`${q}${p}`:null}function C(r){if((0,y.Wi)(r))return"";const{xmin:o,ymin:s,xmax:l,ymax:p}=r;return`${o},${s},${l},${p}`}function W(r){if((0,y.Wi)(r))return null;const{start:o,end:s}=r;return`${(0,y.pC)(o)?o.toISOString():".."}/${(0,y.pC)(s)?s.toISOString():".."}`}function P(r){return(0,y.Wi)(r)||!r||"1=1"===r?null:r}function R(r,o){if(!function i(r){return(0,y.pC)(r)&&"extent"===r.type}(r))return null;const{spatialReference:s}=r;if(!s||s.isWGS84)return{bbox:C(r)};const l=f(s,o);return(0,y.pC)(l)?{bbox:C(r),"bbox-crs":l}:s.isWebMercator?{bbox:C((0,N.iV)(r,w.Z.WGS84))}:null}function g(r,o,s){return r.find(l=>l.rel===o&&l.type===s)||r.find(l=>l.rel===o&&!l.type)}}}]);
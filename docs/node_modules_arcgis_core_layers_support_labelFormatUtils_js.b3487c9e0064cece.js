"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([["node_modules_arcgis_core_layers_support_labelFormatUtils_js"],{22445:(T,m,r)=>{r.r(m),r.d(m,{createLabelFunction:()=>C,formatField:()=>y});var D=r(15861),f=r(26584),M=r(63290),g=r(88411),O=r(15348),P=r(36630),h=r(86793),L=r(46679);const E=M.Z.getLogger("esri.layers.support.labelFormatUtils"),v={type:"simple",evaluate:()=>null},W={getAttribute:(t,a)=>t.field(a)};function C(t,a,e){return p.apply(this,arguments)}function p(){return(p=(0,D.Z)(function*(t,a,e){if(!t||!t.symbol)return v;const l=t.where,o=(0,h.hV)(t),_=l?yield r.e("default-node_modules_arcgis_core_core_sql_WhereClause_js").then(r.bind(r,10410)):null;let i;if("arcade"===o.type){const s=yield(0,L.WW)(o.expression,e,a);i={type:"arcade",evaluate(u){try{const n=s.evaluate({$feature:"attributes"in u?s.repurposeFeature(u):u});if(null!=n)return n.toString()}catch(n){E.error(new f.Z("arcade-expression-error","Encountered an error when evaluating label expression for feature",{feature:u,expression:o}))}return null},needsHydrationToEvaluate:()=>null==(0,h.el)(o.expression)}}else i={type:"simple",evaluate:s=>o.expression.replace(/{[^}]*}/g,u=>{const n=u.slice(1,-1),d=a.get(n);if(!d)return u;let c=null;return"attributes"in s?s&&s.attributes&&(c=s.attributes[d.name]):c=s.field(d.name),null==c?"":y(c,d)})};if(l){let s;try{s=_.WhereClause.create(l,a)}catch(n){return E.error(new f.Z("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:l,error:n})),v}const u=i.evaluate;i.evaluate=n=>{const d="attributes"in n?void 0:W;try{if(s.testFeature(n,d))return u(n)}catch(c){E.error(new f.Z("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:l,feature:n,error:c}))}return null}}return i})).apply(this,arguments)}function y(t,a){if(null==t)return"";const e=a.domain;if(e)if("codedValue"===e.type||"coded-value"===e.type){const o=t;for(const _ of e.codedValues)if(_.code===o)return _.name}else if("range"===e.type){const o=+t,i="range"in e?e.range[1]:e.maxValue;if(("range"in e?e.range[0]:e.minValue)<=o&&o<=i)return e.name}let l=t;return"date"===a.type||"esriFieldTypeDate"===a.type?l=(0,g.p6)(l,(0,g.Ze)("short-date")):(0,P.H7)(a)&&(l=(0,O.uf)(+l)),l||""}}}]);
"use strict";var Ye=Object.defineProperty,He=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,Ve=(le,V,v)=>V in le?Ye(le,V,{enumerable:!0,configurable:!0,writable:!0,value:v}):le[V]=v,Te=(le,V)=>{for(var v in V||(V={}))Je.call(V,v)&&Ve(le,v,V[v]);if(Ge)for(var v of Ge(V))$e.call(V,v)&&Ve(le,v,V[v]);return le},ze=(le,V)=>He(le,Xe(V));(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([["default-node_modules_arcgis_core_chunks_vec42_js-node_modules_arcgis_core_geometry_support_bu-91cb56"],{98148:(le,V,v)=>{function X(F,Z){const S=F.count;Z||(Z=new F.TypedArrayConstructor(S));for(let D=0;D<S;D++)Z[D]=F.get(D);return Z}v.d(V,{m:()=>X}),Object.freeze(Object.defineProperty({__proto__:null,copy:function A(F,Z,S){const D=F.typedBuffer,_=F.typedBufferStride,b=Z.typedBuffer,x=Z.typedBufferStride,O=S?S.count:Z.count;let B=(S&&S.dstIndex?S.dstIndex:0)*_,I=(S&&S.srcIndex?S.srcIndex:0)*x;for(let R=0;R<O;++R)D[B]=b[I],B+=_,I+=x},makeDense:X},Symbol.toStringTag,{value:"Module"}))},35995:(le,V,v)=>{v.d(V,{f:()=>F,n:()=>Q});var A=v(81096);function X(S,D,_){const b=S.typedBuffer,x=S.typedBufferStride,O=D.typedBuffer,B=D.typedBufferStride,I=_?_.count:D.count;let R=(_&&_.dstIndex?_.dstIndex:0)*x,P=(_&&_.srcIndex?_.srcIndex:0)*B;for(let G=0;G<I;++G)b[R]=O[P],b[R+1]=O[P+1],R+=x,P+=B}function Q(S,D,_){const b=S.typedBuffer,x=S.typedBufferStride,O=D.typedBuffer,B=D.typedBufferStride,I=_?_.count:D.count;let R=(_&&_.dstIndex?_.dstIndex:0)*x,P=(_&&_.srcIndex?_.srcIndex:0)*B;if((0,A.U)(D.elementType)){const G=(0,A.Op)(D.elementType);if((0,A.B3)(D.elementType))for(let J=0;J<I;++J)b[R]=Math.max(O[P]/G,-1),b[R+1]=Math.max(O[P+1]/G,-1),R+=x,P+=B;else for(let J=0;J<I;++J)b[R]=O[P]/G,b[R+1]=O[P+1]/G,R+=x,P+=B}else X(S,D,_);return S}function F(S,D,_,b){var R,P;const x=S.typedBuffer,O=S.typedBufferStride,B=null!=(R=null==b?void 0:b.count)?R:S.count;let I=(null!=(P=null==b?void 0:b.dstIndex)?P:0)*O;for(let G=0;G<B;++G)x[I]=D,x[I+1]=_,I+=O}Object.freeze(Object.defineProperty({__proto__:null,copy:X,normalizeIntegerBuffer:Q,fill:F},Symbol.toStringTag,{value:"Module"}))},63657:(le,V,v)=>{v.d(V,{a:()=>S,n:()=>F,s:()=>Z,t:()=>Q});var A=v(96286);function Q(_,b,x){if(_.count!==b.count)return void A.c.error("source and destination buffers need to have the same number of elements");const O=_.count,B=x[0],I=x[1],R=x[2],P=x[3],G=x[4],J=x[5],N=x[6],q=x[7],ee=x[8],se=_.typedBuffer,C=_.typedBufferStride,K=b.typedBuffer,Y=b.typedBufferStride;for(let de=0;de<O;de++){const he=de*C,j=de*Y,ne=K[j],ue=K[j+1],oe=K[j+2],M=K[j+3];se[he]=B*ne+P*ue+N*oe,se[he+1]=I*ne+G*ue+q*oe,se[he+2]=R*ne+J*ue+ee*oe,se[he+3]=M}}function F(_,b){const x=Math.min(_.count,b.count),O=_.typedBuffer,B=_.typedBufferStride,I=b.typedBuffer,R=b.typedBufferStride;for(let P=0;P<x;P++){const G=P*B,J=P*R,N=I[J],q=I[J+1],ee=I[J+2],se=N*N+q*q+ee*ee;if(se>0){const C=1/Math.sqrt(se);O[G]=C*N,O[G+1]=C*q,O[G+2]=C*ee}}}function Z(_,b,x){const O=Math.min(_.count,b.count),B=_.typedBuffer,I=_.typedBufferStride,R=b.typedBuffer,P=b.typedBufferStride;for(let G=0;G<O;G++){const J=G*I,N=G*P;B[J]=x*R[N],B[J+1]=x*R[N+1],B[J+2]=x*R[N+2],B[J+3]=x*R[N+3]}}function S(_,b,x){const O=Math.min(_.count,b.count),B=_.typedBuffer,I=_.typedBufferStride,R=b.typedBuffer,P=b.typedBufferStride;for(let G=0;G<O;G++){const J=G*I,N=G*P;B[J]=R[N]>>x,B[J+1]=R[N+1]>>x,B[J+2]=R[N+2]>>x,B[J+3]=R[N+3]>>x}}Object.freeze(Object.defineProperty({__proto__:null,transformMat4:function X(_,b,x){if(_.count!==b.count)return void A.c.error("source and destination buffers need to have the same number of elements");const O=_.count,B=x[0],I=x[1],R=x[2],P=x[3],G=x[4],J=x[5],N=x[6],q=x[7],ee=x[8],se=x[9],C=x[10],K=x[11],Y=x[12],de=x[13],he=x[14],j=x[15],ne=_.typedBuffer,ue=_.typedBufferStride,oe=b.typedBuffer,M=b.typedBufferStride;for(let E=0;E<O;E++){const U=E*ue,z=E*M,L=oe[z],$=oe[z+1],W=oe[z+2],te=oe[z+3];ne[U]=B*L+G*$+ee*W+Y*te,ne[U+1]=I*L+J*$+se*W+de*te,ne[U+2]=R*L+N*$+C*W+he*te,ne[U+3]=P*L+q*$+K*W+j*te}},transformMat3:Q,normalize:F,scale:Z,shiftRight:S},Symbol.toStringTag,{value:"Module"}))},63470:(le,V,v)=>{function A(F,Z,S){const D=F.typedBuffer,_=F.typedBufferStride,b=Z.typedBuffer,x=Z.typedBufferStride,O=S?S.count:Z.count;let B=(S&&S.dstIndex?S.dstIndex:0)*_,I=(S&&S.srcIndex?S.srcIndex:0)*x;for(let R=0;R<O;++R)D[B]=b[I],D[B+1]=b[I+1],D[B+2]=b[I+2],D[B+3]=b[I+3],B+=_,I+=x}function X(F,Z,S,D,_,b){var R,P;const x=F.typedBuffer,O=F.typedBufferStride,B=null!=(R=null==b?void 0:b.count)?R:F.count;let I=(null!=(P=null==b?void 0:b.dstIndex)?P:0)*O;for(let G=0;G<B;++G)x[I]=Z,x[I+1]=S,x[I+2]=D,x[I+3]=_,I+=O}v.d(V,{c:()=>A,f:()=>X}),Object.freeze(Object.defineProperty({__proto__:null,copy:A,fill:X},Symbol.toStringTag,{value:"Module"}))},97535:(le,V,v)=>{v.d(V,{x:()=>X});var A=v(79682);class X{constructor(Z){this.allocator=Z,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,A.Y)(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const Z=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*Q);this._items.length=Math.min(Z,this._items.length),this._itemsPtr=0}_grow(){for(let Z=0;Z<Math.max(8,Math.min(this._items.length,Q));Z++)this._items.push(this.allocator())}}const Q=1024},81096:(le,V,v)=>{function X(S){switch(S){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function Q(S){switch(S){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function F(S){switch(S){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function Z(S){switch(S){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}v.d(V,{B3:()=>Q,Op:()=>Z,U:()=>F,n1:()=>X}),v(8314)},60490:(le,V,v)=>{v.d(V,{gS:()=>x});var A=v(81096);function x(O,B){return new O(new ArrayBuffer(B*O.ElementCount*(0,A.n1)(O.ElementType)))}Object.freeze(Object.defineProperty({__proto__:null,copy:function X(O,B,I){const R=O.typedBuffer,P=O.typedBufferStride,G=B.typedBuffer,J=B.typedBufferStride,N=I?I.count:B.count;let q=(I&&I.dstIndex?I.dstIndex:0)*P,ee=(I&&I.srcIndex?I.srcIndex:0)*J;for(let se=0;se<N;++se){for(let C=0;C<9;++C)R[q+C]=G[ee+C];q+=P,ee+=J}}},Symbol.toStringTag,{value:"Module"})),Object.freeze(Object.defineProperty({__proto__:null,copy:function F(O,B,I){const R=O.typedBuffer,P=O.typedBufferStride,G=B.typedBuffer,J=B.typedBufferStride,N=I?I.count:B.count;let q=(I&&I.dstIndex?I.dstIndex:0)*P,ee=(I&&I.srcIndex?I.srcIndex:0)*J;for(let se=0;se<N;++se){for(let C=0;C<16;++C)R[q+C]=G[ee+C];q+=P,ee+=J}}},Symbol.toStringTag,{value:"Module"})),v(98148),v(35995),v(9554),v(63470)},10992:(le,V,v)=>{v.d(V,{Ue:()=>S,nF:()=>I,zk:()=>x});var A=v(21286),X=v(97535),Q=v(84161),F=v(28093),Z=v(26242);function S(C){return C?{origin:(0,F.a)(C.origin),vector:(0,F.a)(C.vector)}:{origin:(0,F.c)(),vector:(0,F.c)()}}function x(C,K,Y=S()){return(0,Q.c)(Y.origin,C),(0,Q.b)(Y.vector,K,C),Y}function I(C,K,Y){return function P(C,K,Y,de,he){const{vector:j,origin:ne}=C,ue=(0,Q.b)(Z.WM.get(),K,ne),oe=(0,Q.e)(j,ue)/(0,Q.p)(j);return(0,Q.g)(he,j,(0,A.uZ)(oe,Y,de)),(0,Q.a)(he,he,C.origin)}(C,K,0,1,Y)}(0,F.c)(),(0,F.c)(),new X.x(()=>({origin:null,vector:null}))},26242:(le,V,v)=>{v.d(V,{MP:()=>P,WM:()=>B});var A=v(27306),X=v(79682),Q=v(550),F=v(43703),Z=v(78451),S=v(99770),D=v(28093),_=v(4794);class b{constructor(N,q,ee){this.itemByteSize=N,this.itemCreate=q,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(ee/this.itemByteSize)}get(){0===this._itemsPtr&&(0,X.Y)(()=>this._reset());const N=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=N;){const q=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let ee=0;ee<this._itemsPerBuffer;++ee)this._items.push(this.itemCreate(q,ee*this.itemByteSize));this._buffers.push(q)}return this._items[this._itemsPtr++]}_reset(){const N=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>N;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(N=x){return new b(16,S.c,N)}static createVec3f64(N=x){return new b(24,D.b,N)}static createVec4f64(N=x){return new b(32,_.a,N)}static createMat3f64(N=x){return new b(72,Q.a,N)}static createMat4f64(N=x){return new b(128,F.a,N)}static createQuatf64(N=x){return new b(32,Z.c,N)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const x=4*A.Y8.KILOBYTES,B=(b.createVec2f64(),b.createVec3f64()),P=(b.createVec4f64(),b.createMat3f64(),b.createMat4f64());b.createQuatf64()},9160:(le,V,v)=>{v.d(V,{C:()=>_});var A=v(15861),X=v(84792),Q=v(59213),F=v(26584),Z=v(62208),S=v(10699),D=v(21726);class _{constructor(O){this.streamDataRequester=O}loadJSON(O,B){var I=this;return(0,A.Z)(function*(){return I._load("json",O,B)})()}loadBinary(O,B){var I=this;return(0,A.Z)(function*(){return(0,D.HK)(O)?((0,S.k_)(B),(0,D.AH)(O)):I._load("binary",O,B)})()}loadImage(O,B){var I=this;return(0,A.Z)(function*(){return I._load("image",O,B)})()}_load(O,B,I){var R=this;return(0,A.Z)(function*(){if((0,Z.Wi)(R.streamDataRequester))return(yield(0,X.default)(B,{responseType:b[O]})).data;const P=yield(0,Q.q6)(R.streamDataRequester.request(B,O,I));if(!0===P.ok)return P.value;throw(0,S.r9)(P.error),new F.Z("",`Request for resource failed: ${P.error}`)})()}}const b={image:"image",binary:"array-buffer",json:"json"}},96170:(le,V,v)=>{v.d(V,{DA:()=>F,jX:()=>Z,nh:()=>Q});var A=v(55713),X=v(68738);function Q(S,D=X.p){return"number"==typeof S?D(S):(0,A.Uc)(S)||(0,A.lq)(S)?new Uint32Array(S):S}function F(S){const D="number"==typeof S?S:S.length;if(D<3)return new Uint16Array(0);const _=D-2,b=_<=65536?new Uint16Array(3*_):new Uint32Array(3*_);if("number"==typeof S){let x=0;for(let O=0;O<_;O+=1)O%2==0?(b[x++]=O,b[x++]=O+1,b[x++]=O+2):(b[x++]=O+1,b[x++]=O,b[x++]=O+2)}else{let x=0;for(let O=0;O<_;O+=1)if(O%2==0){const I=S[O+1],R=S[O+2];b[x++]=S[O],b[x++]=I,b[x++]=R}else{const I=S[O],R=S[O+2];b[x++]=S[O+1],b[x++]=I,b[x++]=R}}return b}function Z(S){const D="number"==typeof S?S:S.length;if(D<3)return new Uint16Array(0);const _=D-2,b=_<=65536?new Uint16Array(3*_):new Uint32Array(3*_);if("number"==typeof S){let x=0;for(let O=0;O<_;++O)b[x++]=0,b[x++]=O+1,b[x++]=O+2;return b}{const x=S[0];let O=S[1],B=0;for(let I=0;I<_;++I){const R=S[I+2];b[B++]=x,b[B++]=O,b[B++]=R,O=R}return b}}},93831:(le,V,v)=>{v.d(V,{z:()=>xe});var A=v(15861),X=v(62208),Q=v(43703),F=v(26584);const S=v(63290).Z.getLogger("esri.views.3d.glTF");var se,C,T,_=v(67969),O=v(94573),B=v(88159),I=v(21726),R=v(10349),P=v(28347),G=v(48977),J=v(78451),N=v(60479),q=v(98148);class ee{constructor(a){this.data=a,this.offset4=0,this.dataUint32=new Uint32Array(this.data,0,Math.floor(this.data.byteLength/4))}readUint32(){const a=this.offset4;return this.offset4+=1,this.dataUint32[a]}readUint8Array(a){const y=4*this.offset4;return this.offset4+=a/4,new Uint8Array(this.data,y,a)}remainingBytes(){return this.data.byteLength-4*this.offset4}}(T=se||(se={})).SCALAR="SCALAR",T.VEC2="VEC2",T.VEC3="VEC3",T.VEC4="VEC4",T.MAT2="MAT2",T.MAT3="MAT3",T.MAT4="MAT4",function(T){T[T.ARRAY_BUFFER=34962]="ARRAY_BUFFER",T[T.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(C||(C={}));const K={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},Y={pbrMetallicRoughness:K,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},de={ESRI_externalColorMixMode:"tint"},he=(T={})=>{const a=Te(Te({},K),T.pbrMetallicRoughness),y=function j(T){switch(T.ESRI_externalColorMixMode){case"multiply":case"tint":case"ignore":case"replace":break;default:(0,O.Bg)(T.ESRI_externalColorMixMode),T.ESRI_externalColorMixMode="tint"}return T}(Te(Te({},de),T.extras));return ze(Te(Te({},Y),T),{pbrMetallicRoughness:a,extras:y})},ne={magFilter:_.cw.LINEAR,minFilter:_.cw.LINEAR_MIPMAP_LINEAR,wrapS:_.e8.REPEAT,wrapT:_.e8.REPEAT};class E{constructor(a,y,h,l,d){this.context=a,this.errorContext=y,this.uri=h,this.json=l,this.glbBuffer=d,this.bufferLoaders=new Map,this.textureLoaders=new Map,this.textureCache=new Map,this.materialCache=new Map,this.nodeParentMap=new Map,this.nodeTransformCache=new Map,this.baseUri=function oe(T){let a,y;return T.replace(/^(.*\/)?([^/]*)$/,(h,l,d)=>(a=l||"",y=d||"","")),{dirPart:a,filePart:y}}(this.uri).dirPart,this._checkVersionSupported(),this._checkRequiredExtensionsSupported(),y.errorUnsupportedIf(null==l.scenes,"Scenes must be defined."),y.errorUnsupportedIf(null==l.meshes,"Meshes must be defined"),y.errorUnsupportedIf(null==l.nodes,"Nodes must be defined."),this._computeNodeParents()}static load(a,y,h,l){var d=this;return(0,A.Z)(function*(){if((0,I.HK)(h)){const ae=(0,I.sJ)(h);if("model/gltf-binary"!==ae.mediaType)try{const k=JSON.parse(ae.isBase64?atob(ae.data):ae.data);return new E(a,y,h,k)}catch(k){}const ce=(0,I.AH)(h);if(E._isGLBData(ce))return d._fromGLBData(a,y,h,ce)}if(h.endsWith(".gltf")){const ae=yield a.loadJSON(h,l);return new E(a,y,h,ae)}const w=yield a.loadBinary(h,l);if(E._isGLBData(w))return d._fromGLBData(a,y,h,w);const H=yield a.loadJSON(h,l);return new E(a,y,h,H)})()}static _isGLBData(a){const y=new ee(a);return y.remainingBytes()>=4&&1179937895===y.readUint32()}static _fromGLBData(a,y,h,l){return(0,A.Z)(function*(){const d=yield E._parseGLBData(y,l);return new E(a,y,h,d.json,d.binaryData)})()}static _parseGLBData(a,y){return(0,A.Z)(function*(){const h=new ee(y);a.assert(h.remainingBytes()>=12,"GLB binary data is insufficiently large.");const l=h.readUint32(),d=h.readUint32(),w=h.readUint32();a.assert(1179937895===l,"Magic first 4 bytes do not fit to expected GLB value."),a.assert(y.byteLength>=w,"GLB binary data is smaller than header specifies."),a.errorUnsupportedIf(2!==d,"An unsupported GLB container version was detected. Only version 2 is supported.");let H,ae,ce=0;for(;h.remainingBytes()>=8;){const k=h.readUint32(),ye=h.readUint32();0===ce?(a.assert(1313821514===ye,"First GLB chunk must be JSON."),a.assert(k>=0,"No JSON data found."),H=yield re(h.readUint8Array(k))):1===ce?(a.errorUnsupportedIf(5130562!==ye,"Second GLB chunk expected to be BIN."),ae=h.readUint8Array(k)):a.warnUnsupported("More than 2 GLB chunks detected. Skipping."),ce+=1}return H||a.error("No GLB JSON chunk detected."),{json:H,binaryData:ae}})()}getBuffer(a,y){var h=this;return(0,A.Z)(function*(){const l=h.json.buffers[a],d=h.errorContext;if(null==l.uri)return d.assert(null!=h.glbBuffer,"GLB buffer not present"),h.glbBuffer;const w=yield h._getBufferLoader(a,y);return d.assert(w.byteLength===l.byteLength,"Buffer byte lengths should match."),w})()}_getBufferLoader(a,y){var h=this;return(0,A.Z)(function*(){const l=h.bufferLoaders.get(a);if(l)return l;const w=h.context.loadBinary(h._resolveUri(h.json.buffers[a].uri),y).then(H=>new Uint8Array(H));return h.bufferLoaders.set(a,w),w})()}getAccessor(a,y){var h=this;return(0,A.Z)(function*(){const l=h.errorContext;l.errorUnsupportedIf(!h.json.accessors,"Accessors missing.");const d=h.json.accessors[a];l.errorUnsupportedIf(null==(null==d?void 0:d.bufferView),"Some accessor does not specify a bufferView."),l.errorUnsupportedIf(d.type in[se.MAT2,se.MAT3,se.MAT4],`AttributeType ${d.type} is not supported`);const w=h.json.bufferViews[d.bufferView],H=yield h.getBuffer(w.buffer,y),ae=$[d.type],ce=W[d.componentType],k=ae*ce,ye=w.byteStride||k;return{raw:H.buffer,byteStride:ye,byteOffset:H.byteOffset+(w.byteOffset||0)+(d.byteOffset||0),entryCount:d.count,isDenselyPacked:ye===k,componentCount:ae,componentByteSize:ce,componentType:d.componentType,min:d.min,max:d.max,normalized:!!d.normalized}})()}getIndexData(a,y){var h=this;return(0,A.Z)(function*(){if(null==a.indices)return null;const l=yield h.getAccessor(a.indices,y);if(l.isDenselyPacked)switch(l.componentType){case _.g.UNSIGNED_BYTE:return new Uint8Array(l.raw,l.byteOffset,l.entryCount);case _.g.UNSIGNED_SHORT:return new Uint16Array(l.raw,l.byteOffset,l.entryCount);case _.g.UNSIGNED_INT:return new Uint32Array(l.raw,l.byteOffset,l.entryCount)}else switch(l.componentType){case _.g.UNSIGNED_BYTE:return(0,q.m)(h._wrapAccessor(N.D_,l));case _.g.UNSIGNED_SHORT:return(0,q.m)(h._wrapAccessor(N.av,l));case _.g.UNSIGNED_INT:return(0,q.m)(h._wrapAccessor(N.Nu,l))}})()}getPositionData(a,y){var h=this;return(0,A.Z)(function*(){const l=h.errorContext;l.errorUnsupportedIf(null==a.attributes.POSITION,"No POSITION vertex data found.");const d=yield h.getAccessor(a.attributes.POSITION,y);return l.errorUnsupportedIf(d.componentType!==_.g.FLOAT,"Expected type FLOAT for POSITION vertex attribute, but found "+_e[d.componentType]),l.errorUnsupportedIf(3!==d.componentCount,"POSITION vertex attribute must have 3 components, but found "+d.componentCount.toFixed()),h._wrapAccessor(N.ct,d)})()}getNormalData(a,y){var h=this;return(0,A.Z)(function*(){const l=h.errorContext;l.assert(null!=a.attributes.NORMAL,"No NORMAL vertex data found.");const d=yield h.getAccessor(a.attributes.NORMAL,y);return l.errorUnsupportedIf(d.componentType!==_.g.FLOAT,"Expected type FLOAT for NORMAL vertex attribute, but found "+_e[d.componentType]),l.errorUnsupportedIf(3!==d.componentCount,"NORMAL vertex attribute must have 3 components, but found "+d.componentCount.toFixed()),h._wrapAccessor(N.ct,d)})()}getTangentData(a,y){var h=this;return(0,A.Z)(function*(){const l=h.errorContext;l.assert(null!=a.attributes.TANGENT,"No TANGENT vertex data found.");const d=yield h.getAccessor(a.attributes.TANGENT,y);return l.errorUnsupportedIf(d.componentType!==_.g.FLOAT,"Expected type FLOAT for TANGENT vertex attribute, but found "+_e[d.componentType]),l.errorUnsupportedIf(4!==d.componentCount,"TANGENT vertex attribute must have 4 components, but found "+d.componentCount.toFixed()),new N.ek(d.raw,d.byteOffset,d.byteStride,d.byteOffset+d.byteStride*d.entryCount)})()}getTextureCoordinates(a,y){var h=this;return(0,A.Z)(function*(){const l=h.errorContext;l.assert(null!=a.attributes.TEXCOORD_0,"No TEXCOORD_0 vertex data found.");const d=yield h.getAccessor(a.attributes.TEXCOORD_0,y);return l.errorUnsupportedIf(2!==d.componentCount,"TEXCOORD_0 vertex attribute must have 2 components, but found "+d.componentCount.toFixed()),d.componentType===_.g.FLOAT?h._wrapAccessor(N.Eu,d):(l.errorUnsupportedIf(!d.normalized,"Integer component types are only supported for a normalized accessor for TEXCOORD_0."),function te(T){switch(T.componentType){case _.g.BYTE:return new N.Vs(T.raw,T.byteOffset,T.byteStride,T.byteOffset+T.byteStride*T.entryCount);case _.g.UNSIGNED_BYTE:return new N.xA(T.raw,T.byteOffset,T.byteStride,T.byteOffset+T.byteStride*T.entryCount);case _.g.SHORT:return new N.or(T.raw,T.byteOffset,T.byteStride,T.byteOffset+T.byteStride*T.entryCount);case _.g.UNSIGNED_SHORT:return new N.TS(T.raw,T.byteOffset,T.byteStride,T.byteOffset+T.byteStride*T.entryCount);case _.g.UNSIGNED_INT:return new N.qt(T.raw,T.byteOffset,T.byteStride,T.byteOffset+T.byteStride*T.entryCount);case _.g.FLOAT:return new N.Eu(T.raw,T.byteOffset,T.byteStride,T.byteOffset+T.byteStride*T.entryCount);default:return void(0,O.Bg)(T.componentType)}}(d))})()}getVertexColors(a,y){var h=this;return(0,A.Z)(function*(){const l=h.errorContext;l.assert(null!=a.attributes.COLOR_0,"No COLOR_0 vertex data found.");const d=yield h.getAccessor(a.attributes.COLOR_0,y);if(l.errorUnsupportedIf(4!==d.componentCount&&3!==d.componentCount,"COLOR_0 attribute must have 3 or 4 components, but found "+d.componentCount.toFixed()),4===d.componentCount){if(d.componentType===_.g.FLOAT)return h._wrapAccessor(N.ek,d);if(d.componentType===_.g.UNSIGNED_BYTE)return h._wrapAccessor(N.mc,d);if(d.componentType===_.g.UNSIGNED_SHORT)return h._wrapAccessor(N.v6,d)}else if(3===d.componentCount){if(d.componentType===_.g.FLOAT)return h._wrapAccessor(N.ct,d);if(d.componentType===_.g.UNSIGNED_BYTE)return h._wrapAccessor(N.ne,d);if(d.componentType===_.g.UNSIGNED_SHORT)return h._wrapAccessor(N.mw,d)}l.errorUnsupported("Unsupported component type for COLOR_0 attribute: "+_e[d.componentType])})()}hasPositions(a){return void 0!==a.attributes.POSITION}hasNormals(a){return void 0!==a.attributes.NORMAL}hasVertexColors(a){return void 0!==a.attributes.COLOR_0}hasTextureCoordinates(a){return void 0!==a.attributes.TEXCOORD_0}hasTangents(a){return void 0!==a.attributes.TANGENT}getMaterial(a,y,h){var l=this;return(0,A.Z)(function*(){let d=l.materialCache.get(a.material);if(!d){const w=null!=a.material?he(l.json.materials[a.material]):he(),H=w.pbrMetallicRoughness,ae=l.hasVertexColors(a),ce=l.getTexture(H.baseColorTexture,y),k=l.getTexture(w.normalTexture,y),ye=h?l.getTexture(w.occlusionTexture,y):null,me=h?l.getTexture(w.emissiveTexture,y):null,Me=h?l.getTexture(H.metallicRoughnessTexture,y):null,Ce=null!=a.material?a.material:-1;d={alphaMode:w.alphaMode,alphaCutoff:w.alphaCutoff,color:H.baseColorFactor,doubleSided:!!w.doubleSided,colorTexture:yield ce,normalTexture:yield k,name:w.name,id:Ce,occlusionTexture:yield ye,emissiveTexture:yield me,emissiveFactor:w.emissiveFactor,metallicFactor:H.metallicFactor,roughnessFactor:H.roughnessFactor,metallicRoughnessTexture:yield Me,hasVertexColors:ae,ESRI_externalColorMixMode:w.extras.ESRI_externalColorMixMode}}return d})()}getTexture(a,y){var h=this;return(0,A.Z)(function*(){if(!a)return null;h.errorContext.errorUnsupportedIf(0!==(a.texCoord||0),"Only TEXCOORD with index 0 is supported.");const l=a.index,d=h.errorContext,w=h.json.textures[l],H=(T=>Te(Te({},ne),T))(null!=w.sampler?h.json.samplers[w.sampler]:{});d.errorUnsupportedIf(null==w.source,"Source is expected to be defined for a texture.");const ae=h.json.images[w.source],ce=yield h._loadTextureImageData(l,w,y);return(0,B.s1)(h.textureCache,l,()=>{const k=me=>33071===me||33648===me||10497===me,ye=me=>(d.error(`Unexpected TextureSampler WrapMode: ${me}. Using default REPEAT(10497).`),10497);return{data:ce,wrapS:k(H.wrapS)?H.wrapS:ye(H.wrapS),wrapT:k(H.wrapT)?H.wrapT:ye(H.wrapT),minFilter:H.minFilter,name:ae.name,id:l}})})()}getNodeTransform(a){if(void 0===a)return z;let y=this.nodeTransformCache.get(a);if(!y){const h=this.getNodeTransform(this._getNodeParent(a)),l=this.json.nodes[a];l.matrix?y=(0,P.m)((0,Q.c)(),h,l.matrix):l.translation||l.rotation||l.scale?(y=(0,Q.b)(h),l.translation&&(0,P.j)(y,y,l.translation),l.rotation&&(L[3]=(0,G.g)(L,l.rotation),(0,P.e)(y,y,L[3],L)),l.scale&&(0,P.h)(y,y,l.scale)):y=h,this.nodeTransformCache.set(a,y)}return y}_wrapAccessor(a,y){return new a(y.raw,y.byteOffset,y.byteStride,y.byteOffset+y.byteStride*(y.entryCount-1)+y.componentByteSize*y.componentCount)}_resolveUri(a){return(0,I.hF)(a,this.baseUri)}_getNodeParent(a){return this.nodeParentMap.get(a)}_checkVersionSupported(){const a=R.G.parse(this.json.asset.version,"glTF");U.validate(a)}_checkRequiredExtensionsSupported(){const a=this.json;a.extensionsRequired&&0!==a.extensionsRequired.length&&this.errorContext.errorUnsupported("gltf loader was not able to load unsupported feature. Required extensions: "+a.extensionsRequired.join(", "))}_computeNodeParents(){this.json.nodes.forEach((a,y)=>{a.children&&a.children.forEach(h=>{this.nodeParentMap.set(h,y)})})}_loadTextureImageData(a,y,h){var l=this;return(0,A.Z)(function*(){const d=l.textureLoaders.get(a);if(d)return d;const w=l._createTextureLoader(y,h);return l.textureLoaders.set(a,w),w})()}_createTextureLoader(a,y){var h=this;return(0,A.Z)(function*(){const l=h.json.images[a.source];if(l.uri)return h.context.loadImage(h._resolveUri(l.uri),y);const d=h.errorContext;d.errorUnsupportedIf(null==l.bufferView,"Image bufferView must be defined."),d.errorUnsupportedIf(null==l.mimeType,"Image mimeType must be defined.");const w=h.json.bufferViews[l.bufferView],H=yield h.getBuffer(w.buffer,y);return d.errorUnsupportedIf(null!=w.byteStride,"byteStride not supported for image buffer"),function fe(T,a){return ie.apply(this,arguments)}(new Uint8Array(H.buffer,H.byteOffset+(w.byteOffset||0),w.byteLength),l.mimeType)})()}}const U=new R.G(2,0,"glTF"),z=(0,P.z)((0,Q.c)(),Math.PI/2),L=(0,J.a)(),$={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},W={[_.g.BYTE]:1,[_.g.UNSIGNED_BYTE]:1,[_.g.SHORT]:2,[_.g.UNSIGNED_SHORT]:2,[_.g.FLOAT]:4,[_.g.UNSIGNED_INT]:4};function re(T){return pe.apply(this,arguments)}function pe(){return pe=(0,A.Z)(function*(T){return new Promise((a,y)=>{const h=new Blob([T]),l=new FileReader;l.onload=()=>{a(JSON.parse(l.result))},l.onerror=d=>{y(d)},l.readAsText(h)})}),pe.apply(this,arguments)}function ie(){return ie=(0,A.Z)(function*(T,a){return new Promise((y,h)=>{const l=new Blob([T],{type:a}),d=URL.createObjectURL(l),w=new Image;w.addEventListener("load",()=>{URL.revokeObjectURL(d),"decode"in w?w.decode().then(()=>y(w),()=>y(w)):y(w)}),w.addEventListener("error",H=>{URL.revokeObjectURL(d),h(H)}),w.src=d})}),ie.apply(this,arguments)}const _e={5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5125:"UNSIGNED_INT",5126:"FLOAT"};let be=0;function xe(T,a){return ge.apply(this,arguments)}function ge(){return ge=(0,A.Z)(function*(T,a,y={},h=!0){const l=yield E.load(T,Ee,a,y),d="gltf_"+be++,w={lods:[],materials:new Map,textures:new Map,meta:Se(l)},H=!(!l.json.asset.extras||"symbolResource"!==l.json.asset.extras.ESRI_type),ae=new Map;yield Oe(l,function(){var ce=(0,A.Z)(function*(k,ye,me,Me){var Fe;const Ce=null!=(Fe=ae.get(me))?Fe:0;ae.set(me,Ce+1);const we=void 0!==k.mode?k.mode:_.MX.TRIANGLES,Ne=we===_.MX.TRIANGLES||we===_.MX.TRIANGLE_STRIP||we===_.MX.TRIANGLE_FAN?we:null;if((0,X.Wi)(Ne))return void Ee.warnUnsupported("Unsupported primitive mode ("+Be[we]+"). Skipping primitive.");if(!l.hasPositions(k))return void Ee.warn("Skipping primitive without POSITION vertex attribute.");const Ze=l.getPositionData(k,y),Ke=l.getMaterial(k,y,h),Re=l.hasNormals(k)?l.getNormalData(k,y):null,Pe=l.hasTangents(k)?l.getTangentData(k,y):null,Le=l.hasTextureCoordinates(k)?l.getTextureCoordinates(k,y):null,De=l.hasVertexColors(k)?l.getVertexColors(k,y):null,We=l.getIndexData(k,y),ke={transform:(0,Q.b)(ye),attributes:{position:yield Ze,normal:Re?yield Re:null,texCoord0:Le?yield Le:null,color:De?yield De:null,tangent:Pe?yield Pe:null},indices:yield We,primitiveType:Ne,material:Ae(w,yield Ke,d)};let je=null;(0,X.pC)(w.meta)&&(0,X.pC)(w.meta.ESRI_lod)&&"screenSpaceRadius"===w.meta.ESRI_lod.metric&&(je=w.meta.ESRI_lod.thresholds[me]),w.lods[me]=w.lods[me]||{parts:[],name:Me,lodThreshold:je},w.lods[me].parts[Ce]=ke});return function(k,ye,me,Me){return ce.apply(this,arguments)}}());for(const ce of w.lods)ce.parts=ce.parts.filter(k=>!!k);return{model:w,meta:{isEsriSymbolResource:H,uri:l.uri},customMeta:{}}}),ge.apply(this,arguments)}function Se(T){let y=null;return T.json.nodes.forEach(h=>{const l=h.extras;(0,X.pC)(l)&&(l.ESRI_proxyEllipsoid||l.ESRI_lod)&&(y=l)}),y}function Oe(T,a){return ve.apply(this,arguments)}function ve(){return ve=(0,A.Z)(function*(T,a){const y=T.json,h=y.scenes[y.scene||0].nodes,l=h.length>1,d=[];for(const ae of h){const ce=y.nodes[ae];d.push(w(ae,0)),Ie(ce)&&!l&&ce.extensions.MSFT_lod.ids.forEach((k,ye)=>w(k,ye+1))}function w(ae,ce){return H.apply(this,arguments)}function H(){return(H=(0,A.Z)(function*(ae,ce){const k=y.nodes[ae],ye=T.getNodeTransform(ae);if(Ee.warnUnsupportedIf(null!=k.weights,"Morph targets are not supported."),null!=k.mesh){const me=y.meshes[k.mesh];for(const Me of me.primitives)d.push(a(Me,ye,ce,me.name))}for(const me of k.children||[])d.push(w(me,ce))})).apply(this,arguments)}yield Promise.all(d)}),ve.apply(this,arguments)}function Ie(T){return T.extensions&&T.extensions.MSFT_lod&&Array.isArray(T.extensions.MSFT_lod.ids)}function Ae(T,a,y){const h=d=>{const w=`${y}_tex_${d&&d.id}${d&&d.name?"_"+d.name:""}`;if(d&&!T.textures.has(w)){const H=function x(T,a={}){return{data:T,parameters:Te({wrap:Te({s:_.e8.REPEAT,t:_.e8.REPEAT},a.wrap),noUnpackFlip:!0,mipmap:!1},a)}}(d.data,{wrap:{s:d.wrapS,t:d.wrapT},mipmap:Ue.includes(d.minFilter),noUnpackFlip:!0});T.textures.set(w,H)}return w},l=`${y}_mat_${a.id}_${a.name}`;if(!T.materials.has(l)){const d=function b(T={}){return Te({color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply"},T)}({color:[a.color[0],a.color[1],a.color[2]],opacity:a.color[3],alphaMode:a.alphaMode,alphaCutoff:a.alphaCutoff,doubleSided:a.doubleSided,colorMixMode:a.ESRI_externalColorMixMode,textureColor:a.colorTexture?h(a.colorTexture):void 0,textureNormal:a.normalTexture?h(a.normalTexture):void 0,textureOcclusion:a.occlusionTexture?h(a.occlusionTexture):void 0,textureEmissive:a.emissiveTexture?h(a.emissiveTexture):void 0,textureMetallicRoughness:a.metallicRoughnessTexture?h(a.metallicRoughnessTexture):void 0,emissiveFactor:[a.emissiveFactor[0],a.emissiveFactor[1],a.emissiveFactor[2]],metallicFactor:a.metallicFactor,roughnessFactor:a.roughnessFactor});T.materials.set(l,d)}return l}const Ee=new class D{error(a){throw new F.Z("gltf-loader-error",a)}errorUnsupported(a){throw new F.Z("gltf-loader-unsupported-feature",a)}errorUnsupportedIf(a,y){a&&this.errorUnsupported(y)}assert(a,y){a||this.error(y)}warn(a){S.warn(a)}warnUnsupported(a){this.warn("[Unsupported Feature] "+a)}warnUnsupportedIf(a,y){a&&this.warnUnsupported(y)}},Ue=[_.cw.LINEAR_MIPMAP_LINEAR,_.cw.LINEAR_MIPMAP_NEAREST],Be=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]},68738:(le,V,v)=>{v.d(V,{NO:()=>de,cM:()=>Y,p:()=>C,DX:()=>K});var A=v(84161),X=v(28093),Q=v(97535),F=v(10992);function R(M,E,U){return(0,A.b)(J,E,M),(0,A.b)(N,U,M),(0,A.l)((0,A.f)(J,J,N))/2}v(26242),new Q.x(F.Ue),new Q.x(()=>({p0:null,p1:null,p2:null}));const J=(0,X.c)(),N=(0,X.c)();let q=(()=>{const M=new Uint32Array(131072);for(let E=0;E<M.length;++E)M[E]=E;return M})();const ee=new Uint16Array([0]),se=(()=>{const M=new Uint16Array(65536);for(let E=0;E<M.length;++E)M[E]=E;return M})();function C(M){if(1===M)return ee;if(M<se.length)return new Uint16Array(se.buffer,0,M);if(M>q.length){const E=Math.max(2*q.length,M);q=new Uint32Array(E);for(let U=0;U<q.length;U++)q[U]=U}return new Uint32Array(q.buffer,0,M)}function K(M){if(1===M)return new Uint16Array(ee);if(M<se.length)return new Uint16Array(se.slice(0,M));if(M>q.length){const E=new Uint32Array(M);for(let U=0;U<E.length;U++)E[U]=U;return E}return new Uint32Array(q.slice(0,M))}function Y(M,E,U){if(!M)return!1;const{size:z,data:L}=M;(0,A.s)(U,0,0,0),(0,A.s)(oe,0,0,0);let $=0,W=0;for(let te=0;te<E.length-2;te+=3){const re=E[te+0]*z,pe=E[te+1]*z,fe=E[te+2]*z;(0,A.s)(j,L[re+0],L[re+1],L[re+2]),(0,A.s)(ne,L[pe+0],L[pe+1],L[pe+2]),(0,A.s)(ue,L[fe+0],L[fe+1],L[fe+2]);const ie=R(j,ne,ue);ie?((0,A.a)(j,j,ne),(0,A.a)(j,j,ue),(0,A.g)(j,j,1/3*ie),(0,A.a)(U,U,j),$+=ie):((0,A.a)(oe,oe,j),(0,A.a)(oe,oe,ne),(0,A.a)(oe,oe,ue),W+=3)}return!(0===W&&0===$||(0!==$?((0,A.g)(U,U,1/$),0):0===W||((0,A.g)(U,oe,1/W),0)))}function de(M,E,U){if(!M||!E)return!1;const{size:z,data:L}=M;(0,A.s)(U,0,0,0);let $=-1,W=0;for(let te=0;te<E.length;te++){const re=E[te]*z;$!==re&&(U[0]+=L[re+0],U[1]+=L[re+1],U[2]+=L[re+2],W++),$=re}return W>1&&(0,A.g)(U,U,1/W),W>0}const j=(0,X.c)(),ne=(0,X.c)(),ue=(0,X.c)(),oe=(0,X.c)()},8159:(le,V,v)=>{v.d(V,{K:()=>A});const A=2.1}}]);